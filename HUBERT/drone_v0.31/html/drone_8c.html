<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Drone hexacoptère, segment vol: drone.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Drone hexacoptère, segment vol
   &#160;<span id="projectnumber">0.31</span>
   </div>
   <div id="projectbrief">Projet de mastère 2 ESTEI 2013-2014 : Drone hexacoptère à vol immersif, segment vol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('drone_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">drone.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;FreeRTOS.h&quot;</code><br/>
<code>#include &quot;task.h&quot;</code><br/>
<code>#include &quot;queue.h&quot;</code><br/>
<code>#include &quot;timers.h&quot;</code><br/>
<code>#include &quot;semphr.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="drone_8h_source.html">drone.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="zigbee_8h_source.html">zigbee.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="telemeter_8h_source.html">telemeter.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="gps_8h_source.html">gps.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="imu_8h_source.html">imu.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="pwm_8h_source.html">pwm.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="pid_8h_source.html">pid.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="flight_8h_source.html">flight.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for drone.c:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c__incl.png" border="0" usemap="#drone_8c" alt=""/></div>
<map name="drone_8c" id="drone_8c">
<area shape="rect" id="node13" href="drone_8h.html" title="drone.h" alt="" coords="91,160,155,189"/><area shape="rect" id="node41" href="zigbee_8h.html" title="zigbee.h" alt="" coords="163,83,232,112"/><area shape="rect" id="node45" href="flight_8h.html" title="flight.h" alt="" coords="231,160,292,189"/><area shape="rect" id="node48" href="imu_8h.html" title="imu.h" alt="" coords="261,237,315,267"/><area shape="rect" id="node51" href="telemeter_8h.html" title="telemeter.h" alt="" coords="339,237,424,267"/><area shape="rect" id="node55" href="gps_8h.html" title="gps.h" alt="" coords="417,160,471,189"/><area shape="rect" id="node59" href="pwm_8h.html" title="pwm.h" alt="" coords="499,237,560,267"/><area shape="rect" id="node62" href="pid_8h.html" title="pid.h" alt="" coords="557,160,608,189"/><area shape="rect" id="node15" href="common_8h.html" title="common.h" alt="" coords="313,315,396,344"/><area shape="rect" id="node29" href="debug_8h.html" title="debug.h" alt="" coords="176,392,243,421"/></map>
</div>
</div>
<p><a href="drone_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdroneState.html">droneState</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a349546f52603af80fca62125057ca705"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a349546f52603af80fca62125057ca705">droneBATTERY_MONITORING_PRIO</a>&#160;&#160;&#160;( tskIDLE_PRIORITY + 4 )</td></tr>
<tr class="separator:a349546f52603af80fca62125057ca705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af89575d357154a274ec81f405641fe04"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#af89575d357154a274ec81f405641fe04">droneDETECT_OBSTACLE_PRIO</a>&#160;&#160;&#160;( tskIDLE_PRIORITY + 4 )</td></tr>
<tr class="separator:af89575d357154a274ec81f405641fe04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a003b4e42477f4404f91ef029ac4cd38a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a003b4e42477f4404f91ef029ac4cd38a">droneFLIGHT_CTRL_PRIO</a>&#160;&#160;&#160;( tskIDLE_PRIORITY + 3 )</td></tr>
<tr class="separator:a003b4e42477f4404f91ef029ac4cd38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab91090a6f723202776a4ca66ccc521d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ab91090a6f723202776a4ca66ccc521d9">droneGPS_RECEIVE_PRIO</a>&#160;&#160;&#160;( tskIDLE_PRIORITY + 2 )</td></tr>
<tr class="separator:ab91090a6f723202776a4ca66ccc521d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65947b9ee1dbe41a04e280f585aa5d6f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a65947b9ee1dbe41a04e280f585aa5d6f">droneVIDEO_TOGGLE_PRIO</a>&#160;&#160;&#160;( tskIDLE_PRIORITY + 1 )</td></tr>
<tr class="separator:a65947b9ee1dbe41a04e280f585aa5d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2131e59c4f7534bc6c28daf2ec6f80a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a2131e59c4f7534bc6c28daf2ec6f80a2">droneZIGBEE_RECEIVE_PRIO</a>&#160;&#160;&#160;( tskIDLE_PRIORITY + 2 )</td></tr>
<tr class="separator:a2131e59c4f7534bc6c28daf2ec6f80a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aad4124e5a34e185d704fe88506ecf352"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352">droneError</a> { <br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a> = 0x00, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a> = 0x01, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66">DRN_ERR_TLM_INVAL</a> = 0x02, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a> = 0x04, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433">DRN_ERR_IMU_INVAL</a> = 0x08, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a> = 0x10, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4">DRN_ERR_GPS_INVAL</a> = 0x20, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c">DRN_ERR_CMD_TOUT</a> = 0x40, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a> = 0x80, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2">DRN_ERR_BATT_INVAL</a> = 0x100, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a> = 0x200, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2">DRN_ERR_CONFIG</a> = 0x400, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a> = 0x800, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f">DRN_ERR_INIT</a> = 0x8000
<br/>
 }</td></tr>
<tr class="separator:aad4124e5a34e185d704fe88506ecf352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac9034800b5ef8e755ade03d164e3b6c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6c">droneFltState</a> { <br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a>, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a>, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a>, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a>, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a>, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a>, 
<br/>
&#160;&#160;<a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a>
<br/>
 }</td></tr>
<tr class="separator:aac9034800b5ef8e755ade03d164e3b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933cc0454396f7bcf7739819287e8403"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a933cc0454396f7bcf7739819287e8403">prvBatteryCritical</a> (const uint32_t *const pulPowerLvl, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:a933cc0454396f7bcf7739819287e8403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdcc9b7762286ffa0216c945cb83a42"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42">prvBatteryMonitoringTask</a> (void *pvParam)</td></tr>
<tr class="separator:abbdcc9b7762286ffa0216c945cb83a42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b8e7c4d4d11484a45ec2552b5f996a"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ab0b8e7c4d4d11484a45ec2552b5f996a">prvBatteryTimedout</a> (const struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> *const pxCurrBatteryWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:ab0b8e7c4d4d11484a45ec2552b5f996a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc35b7fc0649dac5fb29fc313d4e1dc"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#abfc35b7fc0649dac5fb29fc313d4e1dc">prvBatteryValid</a> (const uint32_t *const pulNewBattLvl)</td></tr>
<tr class="separator:abfc35b7fc0649dac5fb29fc313d4e1dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f26a5a0f6e36469031ef12396418848"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848">prvDetectObstacleTask</a> (void *pvParam)</td></tr>
<tr class="separator:a2f26a5a0f6e36469031ef12396418848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a095421af495ba7c58b7595dc5bebeb86"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a095421af495ba7c58b7595dc5bebeb86">prvDisableVideo</a> (void)</td></tr>
<tr class="separator:a095421af495ba7c58b7595dc5bebeb86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3685ed7436c17274035fd5ab62a058"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a3a3685ed7436c17274035fd5ab62a058">prvDroneConfigValid</a> (struct <a class="el" href="structdroneConfig.html">droneConfig</a> *pxNewDroneConfig)</td></tr>
<tr class="separator:a3a3685ed7436c17274035fd5ab62a058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0c8b07d0be360e948fd5f870edc426d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ae0c8b07d0be360e948fd5f870edc426d">prvEnableVideo</a> (void)</td></tr>
<tr class="separator:ae0c8b07d0be360e948fd5f870edc426d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82a6ebf7a4c139c50e1a7e812c8cb6ff"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff">prvFlightCtrlTask</a> (void *pvParam)</td></tr>
<tr class="separator:a82a6ebf7a4c139c50e1a7e812c8cb6ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e1041de28ba7002b53a2ee4922519f"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a40e1041de28ba7002b53a2ee4922519f">prvFltCmdTimedout</a> (const struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const pxCurrZigbeeWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:a40e1041de28ba7002b53a2ee4922519f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20dca1b3854cdf78a615e59568f885af"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a20dca1b3854cdf78a615e59568f885af">prvGetBatteryLvl</a> (uint32_t *pulBatteryLvl)</td></tr>
<tr class="separator:a20dca1b3854cdf78a615e59568f885af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1653124f3df3818ea0ae53f80f871399"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a1653124f3df3818ea0ae53f80f871399">prvGPSReceiveTask</a> (void *pvParam)</td></tr>
<tr class="separator:a1653124f3df3818ea0ae53f80f871399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5e99e35d098018f72a95c59d4d6efb3"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ac5e99e35d098018f72a95c59d4d6efb3">prvGPSTimedout</a> (const struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a> *const pxCurrGPSWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:ac5e99e35d098018f72a95c59d4d6efb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae749156ddeaadb095f1dab13cd3d4b0d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d">prvHandleTimouts</a> (const struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const pxCurrTelemeterWrapper, const struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> *const pxCurrBatteryWrapper, const struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const pxCurrIMUWrapper, const struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a> *const pxCurrGPSWrapper, struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const pxCurrZigbeeWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig, struct <a class="el" href="structdroneState.html">droneState</a> *const pxCurrDroneState)</td></tr>
<tr class="separator:ae749156ddeaadb095f1dab13cd3d4b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce3420491fa2834d600ad074cdfbc81"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a3ce3420491fa2834d600ad074cdfbc81">prvIMUTimedout</a> (const struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const pxCurrIMUWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:a3ce3420491fa2834d600ad074cdfbc81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b04c7311a05ab6768750b627eaa78a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a55b04c7311a05ab6768750b627eaa78a">prvInitAltitude</a> (const struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const pxCurrIMUWrapper, struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:a55b04c7311a05ab6768750b627eaa78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0724fb0f205cdcd54445b0bbb246dd44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a0724fb0f205cdcd54445b0bbb246dd44">prvInitDroneConfig</a> (void)</td></tr>
<tr class="separator:a0724fb0f205cdcd54445b0bbb246dd44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93cacd884464cad591e6bb9bc161bcd"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352">droneError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#aa93cacd884464cad591e6bb9bc161bcd">prvInitTestPeriph</a> (void)</td></tr>
<tr class="separator:aa93cacd884464cad591e6bb9bc161bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1ecc8f8fb6e88e193c25cff0bfc9250"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#af1ecc8f8fb6e88e193c25cff0bfc9250">prvLandingDone</a> (const struct <a class="el" href="structIMUData.html">IMUData</a> *const pxCurrIMUData, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:af1ecc8f8fb6e88e193c25cff0bfc9250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8675332e0b2080876b3a17ee1bcd17a3"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a8675332e0b2080876b3a17ee1bcd17a3">prvObstacleDetected</a> (const struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const pxCurrTelemeterWrapper)</td></tr>
<tr class="separator:a8675332e0b2080876b3a17ee1bcd17a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a48012129930abc6fec3f10590867f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a1a48012129930abc6fec3f10590867f4">prvReboot</a> (void)</td></tr>
<tr class="separator:a1a48012129930abc6fec3f10590867f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c6c01d7b7a525778a42d5d9d5ad22c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a31c6c01d7b7a525778a42d5d9d5ad22c">prvResetDroneConfig</a> (void)</td></tr>
<tr class="separator:a31c6c01d7b7a525778a42d5d9d5ad22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c264049cf21d075ca999e8baed2b722"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722">prvSafeGetBatteryData</a> (struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> *const pxNewBattWrapper)</td></tr>
<tr class="separator:a1c264049cf21d075ca999e8baed2b722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52ed89dea0bcfffadeca6535234ee8a6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a> (struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxNewConfig)</td></tr>
<tr class="separator:a52ed89dea0bcfffadeca6535234ee8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95e9ad134d650153cb01a06003aeb343"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a> (struct <a class="el" href="structdroneState.html">droneState</a> *const pxNewState)</td></tr>
<tr class="separator:a95e9ad134d650153cb01a06003aeb343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2163c1693d3186f6bf764a939764c90"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ad2163c1693d3186f6bf764a939764c90">prvSafeGetGPSData</a> (struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a> *const pxNewGPSWrapper)</td></tr>
<tr class="separator:ad2163c1693d3186f6bf764a939764c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7108c3d763912fb80781465b0b15f0a7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7">prvSafeGetIMUData</a> (struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const pxNewIMUWrapper)</td></tr>
<tr class="separator:a7108c3d763912fb80781465b0b15f0a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf7884f575110d3c64162edc8e1fa95"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a7cf7884f575110d3c64162edc8e1fa95">prvSafeGetTelemeterData</a> (struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const pxNewTlmWrapper)</td></tr>
<tr class="separator:a7cf7884f575110d3c64162edc8e1fa95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02c9abf2df2882099febd3a5329e94ad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a02c9abf2df2882099febd3a5329e94ad">prvSafeGetZigbeeData</a> (struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const pxNewZigbeeWrapper)</td></tr>
<tr class="separator:a02c9abf2df2882099febd3a5329e94ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60082ba0309194b6c32f3c0385e135f3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a60082ba0309194b6c32f3c0385e135f3">prvSafeSetBatteryData</a> (const uint32_t *const pulNewBatteryLvl)</td></tr>
<tr class="separator:a60082ba0309194b6c32f3c0385e135f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b501b8fd615ad95fb6d32f4bbadd9e6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig</a> (const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxNewDroneConfig)</td></tr>
<tr class="separator:a7b501b8fd615ad95fb6d32f4bbadd9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba79a8c759d64b5d1df90fe8028cdd18"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a> (const struct <a class="el" href="structdroneState.html">droneState</a> *const xNewDroneState)</td></tr>
<tr class="separator:aba79a8c759d64b5d1df90fe8028cdd18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877358e4b568f286c9e983dacbe76b90"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a877358e4b568f286c9e983dacbe76b90">prvSafeSetGPSData</a> (const struct <a class="el" href="structGPSData.html">GPSData</a> *const pxNewGPSData)</td></tr>
<tr class="separator:a877358e4b568f286c9e983dacbe76b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e476734aad041a30d224248842252ee"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a6e476734aad041a30d224248842252ee">prvSafeSetIMUData</a> (const struct <a class="el" href="structIMUData.html">IMUData</a> *const pxNewIMUData)</td></tr>
<tr class="separator:a6e476734aad041a30d224248842252ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4bece13abfc26bfff4fc4a4c80a175"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#afe4bece13abfc26bfff4fc4a4c80a175">prvSafeSetTelemeterData</a> (const struct <a class="el" href="structtelemeterData.html">telemeterData</a> *const pxNewTelemeterData)</td></tr>
<tr class="separator:afe4bece13abfc26bfff4fc4a4c80a175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cc2e07bf4ac9357c253fe77a21c47c4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4">prvSafeSetZigbeeData</a> (const struct <a class="el" href="structflightCommand.html">flightCommand</a> *const pxNewFltCmd)</td></tr>
<tr class="separator:a1cc2e07bf4ac9357c253fe77a21c47c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8aba28838d473eae5660936d6f2f71c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c">prvSelectErrorState</a> (struct <a class="el" href="structdroneState.html">droneState</a> *const pxCurrState)</td></tr>
<tr class="separator:af8aba28838d473eae5660936d6f2f71c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487e133a34630d9ba54a1932e97d0383"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a487e133a34630d9ba54a1932e97d0383">prvSendConfig</a> (const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxDroneConfig)</td></tr>
<tr class="separator:a487e133a34630d9ba54a1932e97d0383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae263682a12eb5f65afe246a9931efb07"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ae263682a12eb5f65afe246a9931efb07">prvSendError</a> (const struct <a class="el" href="structdroneState.html">droneState</a> *const xCurrDroneState)</td></tr>
<tr class="separator:ae263682a12eb5f65afe246a9931efb07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed0192c590c18579fd803b7dfd4b6ee"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a6ed0192c590c18579fd803b7dfd4b6ee">prvSendStatus</a> (void)</td></tr>
<tr class="separator:a6ed0192c590c18579fd803b7dfd4b6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464ac1a014942c092b752b720c4ff294"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a464ac1a014942c092b752b720c4ff294">prvSetupHardware</a> (void)</td></tr>
<tr class="separator:a464ac1a014942c092b752b720c4ff294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade91bfc77ee5354a85d413273f19ac0f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a> (void)</td></tr>
<tr class="separator:ade91bfc77ee5354a85d413273f19ac0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ad73bd40e656d85654c7196d442055"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a55ad73bd40e656d85654c7196d442055">prvTakeoffDone</a> (const struct <a class="el" href="structIMUData.html">IMUData</a> *const pxCurrIMUData, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:a55ad73bd40e656d85654c7196d442055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94711ce6896840fdb3ab94d61d976ff8"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a94711ce6896840fdb3ab94d61d976ff8">prvTelemeterTimedout</a> (const struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const pxCurrTelemeterWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:a94711ce6896840fdb3ab94d61d976ff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc20e4087bfd6cf789c7552627ad89a8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8">prvZigbeeReceiveTask</a> (void *pvParam)</td></tr>
<tr class="separator:adc20e4087bfd6cf789c7552627ad89a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab575e06e044c1798598861974642a5fe"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ab575e06e044c1798598861974642a5fe">prvZigbeeSignalCritical</a> (const struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const pxCurrZigbeeWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:ab575e06e044c1798598861974642a5fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657ad9692e768102eeb45847d8048925"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a657ad9692e768102eeb45847d8048925">prvZigbeeTimedout</a> (const struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const pxCurrZigbeeWrapper, const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const pxCurrDroneConfig)</td></tr>
<tr class="separator:a657ad9692e768102eeb45847d8048925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2157f133b73a40a4e5f788ec29e842e5"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a2157f133b73a40a4e5f788ec29e842e5">ucBatteryInitTest</a> (void)</td></tr>
<tr class="separator:a2157f133b73a40a4e5f788ec29e842e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97fd430f36f8b065226e2bff9bad1de5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a97fd430f36f8b065226e2bff9bad1de5">vApplicationIdleHook</a> (void)</td></tr>
<tr class="separator:a97fd430f36f8b065226e2bff9bad1de5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a42451c65b3fff36ca56dcd9cd1bf3442"><td class="memItemLeft" align="right" valign="top">xTaskHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a42451c65b3fff36ca56dcd9cd1bf3442">xBatteryMonitoringHandle</a></td></tr>
<tr class="separator:a42451c65b3fff36ca56dcd9cd1bf3442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd6991a017520b9200602c2118bde5e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#adcd6991a017520b9200602c2118bde5e">xBatteryWrapper</a></td></tr>
<tr class="separator:adcd6991a017520b9200602c2118bde5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e8d0933ca64cf79d6f310d004928c6"><td class="memItemLeft" align="right" valign="top">xTaskHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a37e8d0933ca64cf79d6f310d004928c6">xDetectObstacleHandle</a></td></tr>
<tr class="separator:a37e8d0933ca64cf79d6f310d004928c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22f98659c296fba68aad49993f676bb7"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structdroneConfig.html">droneConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a22f98659c296fba68aad49993f676bb7">xDfltDroneConfig</a></td></tr>
<tr class="separator:a22f98659c296fba68aad49993f676bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3283bf4f08e89f5b0eb8d610720bb09b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdroneConfig.html">droneConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a></td></tr>
<tr class="separator:a3283bf4f08e89f5b0eb8d610720bb09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b9ccec43699282550b9e25ee80bf2c8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdroneState.html">droneState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a></td></tr>
<tr class="separator:a6b9ccec43699282550b9e25ee80bf2c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a02b3d4c485151a4860c6a02648ede3"><td class="memItemLeft" align="right" valign="top">xTaskHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a6a02b3d4c485151a4860c6a02648ede3">xFlightCtrlHandle</a></td></tr>
<tr class="separator:a6a02b3d4c485151a4860c6a02648ede3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24c04e8b5033a2e1436a75ce4905ee01"><td class="memItemLeft" align="right" valign="top">static xSemaphoreHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a> = NULL</td></tr>
<tr class="separator:a24c04e8b5033a2e1436a75ce4905ee01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5729ce590faf1b566d18ec398eeaed6c"><td class="memItemLeft" align="right" valign="top">xTaskHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a5729ce590faf1b566d18ec398eeaed6c">xGPSReceiveHandle</a></td></tr>
<tr class="separator:a5729ce590faf1b566d18ec398eeaed6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95131cdfae1cf00f4e600b7a53952e12"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a95131cdfae1cf00f4e600b7a53952e12">xGPSWrapper</a></td></tr>
<tr class="separator:a95131cdfae1cf00f4e600b7a53952e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a171f507970d5344c145f142f325600f9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a></td></tr>
<tr class="separator:a171f507970d5344c145f142f325600f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743e8352cd525db816aac0c78c0b5029"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="structdroneState.html">droneState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a743e8352cd525db816aac0c78c0b5029">xInitDroneState</a></td></tr>
<tr class="separator:a743e8352cd525db816aac0c78c0b5029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af497c945c13c6caaf85fb54e895bb5db"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structflightCommand.html">flightCommand</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#af497c945c13c6caaf85fb54e895bb5db">xStationaryFlightCmd</a></td></tr>
<tr class="separator:af497c945c13c6caaf85fb54e895bb5db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27964d5f5462c40830fb4484a4279d0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structflightMovement.html">flightMovement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#aa27964d5f5462c40830fb4484a4279d0">xStationaryFlightMvt</a></td></tr>
<tr class="separator:aa27964d5f5462c40830fb4484a4279d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b82954258dd1d9c8da2cfd29600dc1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#ad2b82954258dd1d9c8da2cfd29600dc1">xTelemeterWrapper</a></td></tr>
<tr class="separator:ad2b82954258dd1d9c8da2cfd29600dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb3ddfcb69cef27439613d15f2fff6d"><td class="memItemLeft" align="right" valign="top">xTaskHandle&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#aecb3ddfcb69cef27439613d15f2fff6d">xZigbeeReceiveHandle</a></td></tr>
<tr class="separator:aecb3ddfcb69cef27439613d15f2fff6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0745b90bb718aa3f4a7b68c9c18aa60f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a></td></tr>
<tr class="separator:a0745b90bb718aa3f4a7b68c9c18aa60f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a349546f52603af80fca62125057ca705"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define droneBATTERY_MONITORING_PRIO&#160;&#160;&#160;( tskIDLE_PRIORITY + 4 )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Peripheral includes Motor control libraries </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00051">51</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="af89575d357154a274ec81f405641fe04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define droneDETECT_OBSTACLE_PRIO&#160;&#160;&#160;( tskIDLE_PRIORITY + 4 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00055">55</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a003b4e42477f4404f91ef029ac4cd38a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define droneFLIGHT_CTRL_PRIO&#160;&#160;&#160;( tskIDLE_PRIORITY + 3 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00056">56</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab91090a6f723202776a4ca66ccc521d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define droneGPS_RECEIVE_PRIO&#160;&#160;&#160;( tskIDLE_PRIORITY + 2 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00052">52</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a65947b9ee1dbe41a04e280f585aa5d6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define droneVIDEO_TOGGLE_PRIO&#160;&#160;&#160;( tskIDLE_PRIORITY + 1 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00054">54</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2131e59c4f7534bc6c28daf2ec6f80a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define droneZIGBEE_RECEIVE_PRIO&#160;&#160;&#160;( tskIDLE_PRIORITY + 2 )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00053">53</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="aad4124e5a34e185d704fe88506ecf352"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352">droneError</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mainly used for status transmission - Used as a mask </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a"></a>DRN_ERR_NONE</em>&#160;</td><td class="fielddoc">
<p>Everything is shiny </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5"></a>DRN_ERR_TLM_TOUT</em>&#160;</td><td class="fielddoc">
<p>Timeout of telemeter data </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66"></a>DRN_ERR_TLM_INVAL</em>&#160;</td><td class="fielddoc">
<p>Data out of valid range </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60"></a>DRN_ERR_IMU_TOUT</em>&#160;</td><td class="fielddoc">
<p>Timeout of IMU data </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433"></a>DRN_ERR_IMU_INVAL</em>&#160;</td><td class="fielddoc">
<p>Data out of valid range </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a"></a>DRN_ERR_GPS_TOUT</em>&#160;</td><td class="fielddoc">
<p>Timeout of GPS data </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4"></a>DRN_ERR_GPS_INVAL</em>&#160;</td><td class="fielddoc">
<p>Data out of valid range </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c"></a>DRN_ERR_CMD_TOUT</em>&#160;</td><td class="fielddoc">
<p>Timeout of telemeter data </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186"></a>DRN_ERR_BATT_TOUT</em>&#160;</td><td class="fielddoc">
<p>Timeout of battery level </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2"></a>DRN_ERR_BATT_INVAL</em>&#160;</td><td class="fielddoc">
<p>Data out of valid range </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77"></a>DRN_ERR_RX_TOUT</em>&#160;</td><td class="fielddoc">
<p>Timeout of base-drone communication data </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2"></a>DRN_ERR_CONFIG</em>&#160;</td><td class="fielddoc">
<p>Initialization errors Configuration invalid </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204"></a>DRN_ERR_CMD</em>&#160;</td><td class="fielddoc">
<p>Invalid command </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f"></a>DRN_ERR_INIT</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00084">84</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a>        = 0x00,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a>    = 0x01,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66">DRN_ERR_TLM_INVAL</a>   = 0x02,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a>    = 0x04,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433">DRN_ERR_IMU_INVAL</a>   = 0x08,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a>    = 0x10,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4">DRN_ERR_GPS_INVAL</a>   = 0x20,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c">DRN_ERR_CMD_TOUT</a>    = 0x40,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a>   = 0x80,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2">DRN_ERR_BATT_INVAL</a>  = 0x100,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a>     = 0x200,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">//  Covered by STATE_STARTING and normal errors</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2">DRN_ERR_CONFIG</a>      = 0x400,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>         = 0x800,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">//  DRN_ERR_INIT_RX     = 0x1000,</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">//  DRN_ERR_INIT_BATT   = 0x2000,</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">//  DRN_ERR_INIT_TLM    = 0x4000,</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f">DRN_ERR_INIT</a>        = 0x8000,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;};</div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433">DRN_ERR_IMU_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00095">drone.c:95</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00107">drone.c:107</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00113">drone.c:113</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2">DRN_ERR_BATT_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00105">drone.c:105</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00089">drone.c:89</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66">DRN_ERR_TLM_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00091">drone.c:91</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00103">drone.c:103</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c">DRN_ERR_CMD_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00101">drone.c:101</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00097">drone.c:97</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f">DRN_ERR_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00117">drone.c:117</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00087">drone.c:87</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4">DRN_ERR_GPS_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00099">drone.c:99</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00093">drone.c:93</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2">DRN_ERR_CONFIG</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00111">drone.c:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6c">droneFltState</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mutually exclusive drone states behavior. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037"></a>STATE_STARTING</em>&#160;</td><td class="fielddoc">
<p>Initialization phase </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0"></a>STATE_GROUND_RDY</em>&#160;</td><td class="fielddoc">
<p>Initialization successful </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235"></a>STATE_GROUND_ERR</em>&#160;</td><td class="fielddoc">
<p>Error while landed </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853"></a>STATE_TAKEOFF</em>&#160;</td><td class="fielddoc">
<p>Must be landed </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c"></a>STATE_FLIGHT</em>&#160;</td><td class="fielddoc">
<p>Normal flight, stationary flight if no flight command received </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f"></a>STATE_AUTOTUNING</em>&#160;</td><td class="fielddoc">
<p>PID parameters autotuning </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa"></a>STATE_FLIGHT_ERR</em>&#160;</td><td class="fielddoc">
<p>Error while flying - triggers emergency landing </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7"></a>STATE_LANDING</em>&#160;</td><td class="fielddoc">
<p>Must be flying </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00063">63</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a>,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a>,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a>,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a>,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a>,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a>,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a>,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;};</div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00080">drone.c:80</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00072">drone.c:72</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00076">drone.c:76</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00078">drone.c:78</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00070">drone.c:70</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00068">drone.c:68</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00066">drone.c:66</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00074">drone.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00340">340</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">/* Local variable for commands on error */</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="keyword">struct </span><a class="code" href="structzigbeeData.html">zigbeeData</a> xLocZigbeeData;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">/* Clock and NVIC setup */</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="drone_8c.html#a464ac1a014942c092b752b720c4ff294">prvSetupHardware</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">/* Initialize UART6 if debugUSE_DEBUG_UART is set */</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="debug_8h.html#a12a14788b9256e00d6548471bf257f2b">debugUART_INIT</a>();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">/* Initialize xDroneState and xDroneConfig global variable to default</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">    behavior */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="drone_8c.html#a0724fb0f205cdcd54445b0bbb246dd44">prvInitDroneConfig</a>();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">/* Setup and check correct behavior of each peripheral */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> = <a class="code" href="drone_8c.html#aa93cacd884464cad591e6bb9bc161bcd">prvInitTestPeriph</a>();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">/* Error on GPS only is ignored altogether */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> != <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a> )</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            &amp;&amp; ( <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> != <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a> ) )</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                 ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>, <span class="stringliteral">&quot;main()&quot;</span>,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="stringliteral">&quot;Bad initialization of some critical peripheral !&quot;</span> );</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="comment">/* We should add some tests there in case the peripheral eventually</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">        responds correctly, to not get stuck rebooting. */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <a class="code" href="drone_8c.html#ae263682a12eb5f65afe246a9931efb07">prvSendError</a>( &amp;<a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a> );</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac">vZigbeeReceiveData</a>( &amp;xLocZigbeeData );</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">while</span>( ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a> )</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                || ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a> ) );</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">/* Execute the requested action */</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">switch</span>( xLocZigbeeData.eCmdId )</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a>:</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <a class="code" href="drone_8c.html#a1a48012129930abc6fec3f10590867f4">prvReboot</a>();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a>:</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="comment">/* Just in case */</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">/* Binary semaphore used to wake up the flight control task */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Creating xFlightCtrlSem&quot;</span> );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">/* Same as vSemaphoreCreateBinary( xFlightCtrlSem ); with a semaphore</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">    initialized as taken instead of free. */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a> = xQueueCreate( ( <span class="keywordtype">unsigned</span> portBASE_TYPE ) 1,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            semSEMAPHORE_QUEUE_ITEM_LENGTH );</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a> == NULL )</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="stringliteral">&quot;drone&quot;</span>, <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;xFlightCtrlSem creation failed !&quot;</span> );</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="comment">/* Anonymous initialization error */</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f">DRN_ERR_INIT</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <a class="code" href="drone_8c.html#ae263682a12eb5f65afe246a9931efb07">prvSendError</a>( &amp;<a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a> );</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <a class="code" href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac">vZigbeeReceiveData</a>( &amp;xLocZigbeeData );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">while</span>( ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a> )</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                || ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a> ) );</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="comment">/* Execute the requested action */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">switch</span>( xLocZigbeeData.eCmdId )</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a>:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="drone_8c.html#a1a48012129930abc6fec3f10590867f4">prvReboot</a>();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a>:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="comment">/* Just in case */</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Creating prvDetectObstacleTask&quot;</span> );</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    xTaskCreate( <a class="code" href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848">prvDetectObstacleTask</a>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;Obs&quot;</span>,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            configMINIMAL_STACK_SIZE, NULL,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <a class="code" href="drone_8c.html#af89575d357154a274ec81f405641fe04">droneDETECT_OBSTACLE_PRIO</a>, &amp;<a class="code" href="drone_8c.html#a37e8d0933ca64cf79d6f310d004928c6">xDetectObstacleHandle</a> );</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Creating prvBatteryMonitoringTask&quot;</span> );</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    xTaskCreate( <a class="code" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42">prvBatteryMonitoringTask</a>,</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;Bat&quot;</span>,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            configMINIMAL_STACK_SIZE, NULL,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <a class="code" href="drone_8c.html#a349546f52603af80fca62125057ca705">droneBATTERY_MONITORING_PRIO</a>, &amp;<a class="code" href="drone_8c.html#a42451c65b3fff36ca56dcd9cd1bf3442">xBatteryMonitoringHandle</a> );</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Creating prvFlightCtrlTask&quot;</span> );</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    xTaskCreate( <a class="code" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff">prvFlightCtrlTask</a>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;Flt&quot;</span>,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            configMINIMAL_STACK_SIZE, NULL,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <a class="code" href="drone_8c.html#a003b4e42477f4404f91ef029ac4cd38a">droneFLIGHT_CTRL_PRIO</a>, &amp;<a class="code" href="drone_8c.html#a6a02b3d4c485151a4860c6a02648ede3">xFlightCtrlHandle</a> );</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Creating prvZigbeeReceiveTask&quot;</span> );</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    xTaskCreate( <a class="code" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8">prvZigbeeReceiveTask</a>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;Zig&quot;</span>,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            configMINIMAL_STACK_SIZE, NULL,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <a class="code" href="drone_8c.html#a2131e59c4f7534bc6c28daf2ec6f80a2">droneZIGBEE_RECEIVE_PRIO</a>, &amp;<a class="code" href="drone_8c.html#aecb3ddfcb69cef27439613d15f2fff6d">xZigbeeReceiveHandle</a> );</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Creating prvGPSReceiveTask&quot;</span> );</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">/* At this point, the drone is hopefully correctly initialized and waiting</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">    for orders */</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">/* TODO :buzzer ready signal */</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    xTaskCreate( <a class="code" href="drone_8c.html#a1653124f3df3818ea0ae53f80f871399">prvGPSReceiveTask</a>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;GPS&quot;</span>,</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            configMINIMAL_STACK_SIZE, NULL,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <a class="code" href="drone_8c.html#ab91090a6f723202776a4ca66ccc521d9">droneGPS_RECEIVE_PRIO</a>, &amp;<a class="code" href="drone_8c.html#a5729ce590faf1b566d18ec398eeaed6c">xGPSReceiveHandle</a> );</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">/* TODO : check validity */</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">/* Test whether tasks where correctly created */</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span>( ( <a class="code" href="drone_8c.html#a37e8d0933ca64cf79d6f310d004928c6">xDetectObstacleHandle</a> == NULL )</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            || ( <a class="code" href="drone_8c.html#a6a02b3d4c485151a4860c6a02648ede3">xFlightCtrlHandle</a> == NULL )</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            || ( <a class="code" href="drone_8c.html#aecb3ddfcb69cef27439613d15f2fff6d">xZigbeeReceiveHandle</a> == NULL )</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            || ( <a class="code" href="drone_8c.html#a42451c65b3fff36ca56dcd9cd1bf3442">xBatteryMonitoringHandle</a> == NULL )</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            || ( <a class="code" href="drone_8c.html#a5729ce590faf1b566d18ec398eeaed6c">xGPSReceiveHandle</a> == NULL ) )</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Tasks creation failed !&quot;</span> );</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="comment">/* TODO : Refactor into a routine */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment">/* Anonymous initialization error */</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f">DRN_ERR_INIT</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <a class="code" href="drone_8c.html#ae263682a12eb5f65afe246a9931efb07">prvSendError</a>( &amp;<a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a> );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <a class="code" href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac">vZigbeeReceiveData</a>( &amp;xLocZigbeeData );</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">while</span>( ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a> )</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                || ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a> ) );</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="comment">/* Execute the requested action */</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">switch</span>( xLocZigbeeData.eCmdId )</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a>:</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <a class="code" href="drone_8c.html#a1a48012129930abc6fec3f10590867f4">prvReboot</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a>:</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="comment">/* Just in case */</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">/* Tasks are associated with a voltage on whatever pin is defined in the</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">    traceTASK_SWITCHED_IN() macro (in FreeRTOSConfig.h).</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">    Sorted by increasing priority then frequency */</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//  vTaskSetApplicationTaskTag( xTaskGetIdleTaskHandle(), ( void * ) 1 );</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">//  vTaskSetApplicationTaskTag( xGPSReceiveHandle, ( void * ) 2 );</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">//  vTaskSetApplicationTaskTag( xZigbeeReceiveHandle, ( void * ) 3 );</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">//  vTaskSetApplicationTaskTag( xFlightCtrlHandle, ( void * ) 4 );</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">//  vTaskSetApplicationTaskTag( xBatteryMonitoringHandle, ( void * ) 5 );</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">//  vTaskSetApplicationTaskTag( xDetectObstacleHandle, ( void * ) 6 );</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0, <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Starting scheduler&quot;</span> );</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    vTaskStartScheduler();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, ( <span class="keywordtype">signed</span> <span class="keywordtype">char</span> * ) <span class="stringliteral">&quot;-&quot;</span>, 0,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="stringliteral">&quot;drone&quot;</span>, <span class="stringliteral">&quot;main()&quot;</span>, <span class="stringliteral">&quot;Scheduler returned !&quot;</span> );</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">/* If all is well, the scheduler will now be running, and the following</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">    line will never be reached.  If the following line does execute, then</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">    there was insufficient FreeRTOS heap memory available for the idle</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">    and/or timer tasks to be created. */</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f">DRN_ERR_INIT</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <a class="code" href="drone_8c.html#ae263682a12eb5f65afe246a9931efb07">prvSendError</a>( &amp;<a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a> );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac">vZigbeeReceiveData</a>( &amp;xLocZigbeeData );</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">while</span>( ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a> )</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            || ( xLocZigbeeData.eCmdId != <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a> ) );</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">/* Execute the requested action */</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">switch</span>( xLocZigbeeData.eCmdId )</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a>:</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="drone_8c.html#a1a48012129930abc6fec3f10590867f4">prvReboot</a>();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a>:</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">/* Just in case */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">while</span>( 1 )</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">/* Nothing to do */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div>
<div class="ttc" id="structdroneState_html_a6bac61f96c145cf395b2a4fb359be46b"><div class="ttname"><a href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">droneState::eFltState</a></div><div class="ttdeci">enum droneFltState eFltState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00124">drone.c:124</a></div></div>
<div class="ttc" id="drone_8c_html_af89575d357154a274ec81f405641fe04"><div class="ttname"><a href="drone_8c.html#af89575d357154a274ec81f405641fe04">droneDETECT_OBSTACLE_PRIO</a></div><div class="ttdeci">#define droneDETECT_OBSTACLE_PRIO</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00055">drone.c:55</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a239722b6c1371469bb65b83c5aa92a31">CMD_REBOOT</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00014">zigbee.h:14</a></div></div>
<div class="ttc" id="drone_8c_html_a1653124f3df3818ea0ae53f80f871399"><div class="ttname"><a href="drone_8c.html#a1653124f3df3818ea0ae53f80f871399">prvGPSReceiveTask</a></div><div class="ttdeci">static void prvGPSReceiveTask(void *pvParam)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01206">drone.c:1206</a></div></div>
<div class="ttc" id="drone_8c_html_a2f26a5a0f6e36469031ef12396418848"><div class="ttname"><a href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848">prvDetectObstacleTask</a></div><div class="ttdeci">static void prvDetectObstacleTask(void *pvParam)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00573">drone.c:573</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a8bbf29869938b9b99e9e98e2685c2af0">CMD_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00016">zigbee.h:16</a></div></div>
<div class="ttc" id="drone_8c_html_a82a6ebf7a4c139c50e1a7e812c8cb6ff"><div class="ttname"><a href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff">prvFlightCtrlTask</a></div><div class="ttdeci">static void prvFlightCtrlTask(void *pvParam)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00728">drone.c:728</a></div></div>
<div class="ttc" id="drone_8c_html_a0724fb0f205cdcd54445b0bbb246dd44"><div class="ttname"><a href="drone_8c.html#a0724fb0f205cdcd54445b0bbb246dd44">prvInitDroneConfig</a></div><div class="ttdeci">static void prvInitDroneConfig(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01280">drone.c:1280</a></div></div>
<div class="ttc" id="zigbee_8c_html_a086880a41e9dcff0444893eaa3aa5eac"><div class="ttname"><a href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac">vZigbeeReceiveData</a></div><div class="ttdeci">void vZigbeeReceiveData(struct zigbeeData *const pxZigbeeData)</div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8c_source.html#l00034">zigbee.c:34</a></div></div>
<div class="ttc" id="drone_8c_html_abbdcc9b7762286ffa0216c945cb83a42"><div class="ttname"><a href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42">prvBatteryMonitoringTask</a></div><div class="ttdeci">static void prvBatteryMonitoringTask(void *pvParam)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01142">drone.c:1142</a></div></div>
<div class="ttc" id="drone_8c_html_aecb3ddfcb69cef27439613d15f2fff6d"><div class="ttname"><a href="drone_8c.html#aecb3ddfcb69cef27439613d15f2fff6d">xZigbeeReceiveHandle</a></div><div class="ttdeci">xTaskHandle xZigbeeReceiveHandle</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00225">drone.c:225</a></div></div>
<div class="ttc" id="structzigbeeData_html"><div class="ttname"><a href="structzigbeeData.html">zigbeeData</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00057">zigbee.h:57</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="drone_8c_html_a003b4e42477f4404f91ef029ac4cd38a"><div class="ttname"><a href="drone_8c.html#a003b4e42477f4404f91ef029ac4cd38a">droneFLIGHT_CTRL_PRIO</a></div><div class="ttdeci">#define droneFLIGHT_CTRL_PRIO</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00056">drone.c:56</a></div></div>
<div class="ttc" id="drone_8c_html_a6b9ccec43699282550b9e25ee80bf2c8"><div class="ttname"><a href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a></div><div class="ttdeci">struct droneState xDroneState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00248">drone.c:248</a></div></div>
<div class="ttc" id="drone_8c_html_a2131e59c4f7534bc6c28daf2ec6f80a2"><div class="ttname"><a href="drone_8c.html#a2131e59c4f7534bc6c28daf2ec6f80a2">droneZIGBEE_RECEIVE_PRIO</a></div><div class="ttdeci">#define droneZIGBEE_RECEIVE_PRIO</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00053">drone.c:53</a></div></div>
<div class="ttc" id="drone_8c_html_a349546f52603af80fca62125057ca705"><div class="ttname"><a href="drone_8c.html#a349546f52603af80fca62125057ca705">droneBATTERY_MONITORING_PRIO</a></div><div class="ttdeci">#define droneBATTERY_MONITORING_PRIO</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00051">drone.c:51</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00070">drone.c:70</a></div></div>
<div class="ttc" id="drone_8c_html_a37e8d0933ca64cf79d6f310d004928c6"><div class="ttname"><a href="drone_8c.html#a37e8d0933ca64cf79d6f310d004928c6">xDetectObstacleHandle</a></div><div class="ttdeci">xTaskHandle xDetectObstacleHandle</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00224">drone.c:224</a></div></div>
<div class="ttc" id="drone_8c_html_a1a48012129930abc6fec3f10590867f4"><div class="ttname"><a href="drone_8c.html#a1a48012129930abc6fec3f10590867f4">prvReboot</a></div><div class="ttdeci">static void prvReboot(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01811">drone.c:1811</a></div></div>
<div class="ttc" id="drone_8c_html_a42451c65b3fff36ca56dcd9cd1bf3442"><div class="ttname"><a href="drone_8c.html#a42451c65b3fff36ca56dcd9cd1bf3442">xBatteryMonitoringHandle</a></div><div class="ttdeci">xTaskHandle xBatteryMonitoringHandle</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00226">drone.c:226</a></div></div>
<div class="ttc" id="drone_8c_html_ae263682a12eb5f65afe246a9931efb07"><div class="ttname"><a href="drone_8c.html#ae263682a12eb5f65afe246a9931efb07">prvSendError</a></div><div class="ttdeci">static void prvSendError(const struct droneState *const xCurrDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01805">drone.c:1805</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00097">drone.c:97</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a68060eb9b68ae5cd82c632ff11429c2f">DRN_ERR_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00117">drone.c:117</a></div></div>
<div class="ttc" id="drone_8c_html_ab91090a6f723202776a4ca66ccc521d9"><div class="ttname"><a href="drone_8c.html#ab91090a6f723202776a4ca66ccc521d9">droneGPS_RECEIVE_PRIO</a></div><div class="ttdeci">#define droneGPS_RECEIVE_PRIO</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00052">drone.c:52</a></div></div>
<div class="ttc" id="debug_8h_html_a12a14788b9256e00d6548471bf257f2b"><div class="ttname"><a href="debug_8h.html#a12a14788b9256e00d6548471bf257f2b">debugUART_INIT</a></div><div class="ttdeci">#define debugUART_INIT()</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00037">debug.h:37</a></div></div>
<div class="ttc" id="structdroneState_html_a79b353e05acdbce9cd51016fbc3eb61d"><div class="ttname"><a href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">droneState::eErrorMask</a></div><div class="ttdeci">enum droneError eErrorMask</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00126">drone.c:126</a></div></div>
<div class="ttc" id="drone_8c_html_adc20e4087bfd6cf789c7552627ad89a8"><div class="ttname"><a href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8">prvZigbeeReceiveTask</a></div><div class="ttdeci">static void prvZigbeeReceiveTask(void *pvParam)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00941">drone.c:941</a></div></div>
<div class="ttc" id="drone_8c_html_a6a02b3d4c485151a4860c6a02648ede3"><div class="ttname"><a href="drone_8c.html#a6a02b3d4c485151a4860c6a02648ede3">xFlightCtrlHandle</a></div><div class="ttdeci">xTaskHandle xFlightCtrlHandle</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00223">drone.c:223</a></div></div>
<div class="ttc" id="drone_8c_html_ade91bfc77ee5354a85d413273f19ac0f"><div class="ttname"><a href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f">prvShutdown</a></div><div class="ttdeci">static void prvShutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01816">drone.c:1816</a></div></div>
<div class="ttc" id="drone_8c_html_a5729ce590faf1b566d18ec398eeaed6c"><div class="ttname"><a href="drone_8c.html#a5729ce590faf1b566d18ec398eeaed6c">xGPSReceiveHandle</a></div><div class="ttdeci">xTaskHandle xGPSReceiveHandle</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00227">drone.c:227</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00087">drone.c:87</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00068">drone.c:68</a></div></div>
<div class="ttc" id="drone_8c_html_aa93cacd884464cad591e6bb9bc161bcd"><div class="ttname"><a href="drone_8c.html#aa93cacd884464cad591e6bb9bc161bcd">prvInitTestPeriph</a></div><div class="ttdeci">static enum droneError prvInitTestPeriph(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01303">drone.c:1303</a></div></div>
<div class="ttc" id="drone_8c_html_a24c04e8b5033a2e1436a75ce4905ee01"><div class="ttname"><a href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a></div><div class="ttdeci">static xSemaphoreHandle xFlightCtrlSem</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00218">drone.c:218</a></div></div>
<div class="ttc" id="drone_8c_html_a464ac1a014942c092b752b720c4ff294"><div class="ttname"><a href="drone_8c.html#a464ac1a014942c092b752b720c4ff294">prvSetupHardware</a></div><div class="ttdeci">static void prvSetupHardware(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01291">drone.c:1291</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph.png" border="0" usemap="#drone_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph" alt=""/></div>
<map name="drone_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph" id="drone_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph">
<area shape="rect" id="node3" href="drone_8c.html#a464ac1a014942c092b752b720c4ff294" title="prvSetupHardware" alt="" coords="104,115,235,144"/><area shape="rect" id="node5" href="drone_8c.html#a0724fb0f205cdcd54445b0bbb246dd44" title="prvInitDroneConfig" alt="" coords="104,168,235,197"/><area shape="rect" id="node7" href="drone_8c.html#aa93cacd884464cad591e6bb9bc161bcd" title="prvInitTestPeriph" alt="" coords="311,139,431,168"/><area shape="rect" id="node11" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="729,928,823,957"/><area shape="rect" id="node26" href="drone_8c.html#ae263682a12eb5f65afe246a9931efb07" title="prvSendError" alt="" coords="120,351,219,380"/><area shape="rect" id="node28" href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac" title="vZigbeeReceiveData" alt="" coords="521,637,665,667"/><area shape="rect" id="node31" href="drone_8c.html#a1a48012129930abc6fec3f10590867f4" title="prvReboot" alt="" coords="128,455,211,484"/><area shape="rect" id="node33" href="drone_8c.html#ade91bfc77ee5354a85d413273f19ac0f" title="prvShutdown" alt="" coords="120,508,219,537"/><area shape="rect" id="node35" href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848" title="prvDetectObstacleTask" alt="" coords="291,824,451,853"/><area shape="rect" id="node53" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="285,1167,456,1196"/><area shape="rect" id="node71" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="108,1549,231,1579"/><area shape="rect" id="node120" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="293,585,448,615"/><area shape="rect" id="node138" href="drone_8c.html#a1653124f3df3818ea0ae53f80f871399" title="prvGPSReceiveTask" alt="" coords="299,532,443,561"/><area shape="rect" id="node9" href="gps_8c.html#afaa59ead95954d284cef53931b8a9b39" title="ucGPSInitTest" alt="" coords="540,112,647,141"/><area shape="rect" id="node13" href="imu_8c.html#a585f070e778f42d47703fb0b2b3402a4" title="ucIMUInitTest" alt="" coords="541,165,645,195"/><area shape="rect" id="node16" href="zigbee_8c.html#a3b7d284c2e4806df0c9b676ded44670b" title="ucZigbeeInitTest" alt="" coords="535,219,652,248"/><area shape="rect" id="node19" href="telemeter_8c.html#a0a690aa29f9fb858829e2f23df838068" title="ucTelemeterInitTest" alt="" coords="524,5,663,35"/><area shape="rect" id="node22" href="drone_8c.html#a2157f133b73a40a4e5f788ec29e842e5" title="ucBatteryInitTest" alt="" coords="532,59,655,88"/><area shape="rect" id="node37" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6" title="prvSafeGetDroneConfig" alt="" coords="513,691,673,720"/><area shape="rect" id="node39" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343" title="prvSafeGetDroneState" alt="" coords="516,1061,671,1091"/><area shape="rect" id="node41" href="telemeter_8c.html#ab4fff6ea13609ac80d79fdfeab2b472b" title="vTelemeterGetData" alt="" coords="525,744,661,773"/><area shape="rect" id="node43" href="telemeter_8c.html#a4dffe6c395c7511da8b58f4108f07b9f" title="ucTelemeterIsDataValid" alt="" coords="512,901,675,931"/><area shape="rect" id="node46" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18" title="prvSafeSetDroneState" alt="" coords="517,955,669,984"/><area shape="rect" id="node49" href="drone_8c.html#afe4bece13abfc26bfff4fc4a4c80a175" title="prvSafeSetTelemeterData" alt="" coords="507,797,680,827"/><area shape="rect" id="node56" href="drone_8c.html#a20dca1b3854cdf78a615e59568f885af" title="prvGetBatteryLvl" alt="" coords="533,1325,653,1355"/><area shape="rect" id="node60" href="drone_8c.html#abfc35b7fc0649dac5fb29fc313d4e1dc" title="prvBatteryValid" alt="" coords="539,1168,648,1197"/><area shape="rect" id="node62" href="drone_8c.html#a60082ba0309194b6c32f3c0385e135f3" title="prvSafeSetBatteryData" alt="" coords="515,1221,672,1251"/><area shape="rect" id="node65" href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722" title="prvSafeGetBatteryData" alt="" coords="515,1379,672,1408"/><area shape="rect" id="node69" href="drone_8c.html#a933cc0454396f7bcf7739819287e8403" title="prvBatteryCritical" alt="" coords="532,1115,655,1144"/><area shape="rect" id="node76" href="imu_8c.html#ac4ad027278ff7ebbcd4b4f1686aaa404" title="vIMUGetData" alt="" coords="320,1469,421,1499"/><area shape="rect" id="node79" href="imu_8c.html#a11e78f1736ae8585497eff9eafe5ea07" title="eIMUIsDataValid" alt="" coords="309,1523,432,1552"/><area shape="rect" id="node82" href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7" title="prvSafeGetIMUData" alt="" coords="523,1008,664,1037"/><area shape="rect" id="node85" href="drone_8c.html#a6e476734aad041a30d224248842252ee" title="prvSafeSetIMUData" alt="" coords="301,1576,440,1605"/><area shape="rect" id="node88" href="drone_8c.html#a7cf7884f575110d3c64162edc8e1fa95" title="prvSafeGetTelemeterData" alt="" coords="284,1789,457,1819"/><area shape="rect" id="node91" href="drone_8c.html#ad2163c1693d3186f6bf764a939764c90" title="prvSafeGetGPSData" alt="" coords="299,1843,443,1872"/><area shape="rect" id="node93" href="drone_8c.html#a02c9abf2df2882099febd3a5329e94ad" title="prvSafeGetZigbeeData" alt="" coords="293,1896,448,1925"/><area shape="rect" id="node95" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="307,1007,435,1036"/><area shape="rect" id="node98" href="drone_8c.html#a8675332e0b2080876b3a17ee1bcd17a3" title="prvObstacleDetected" alt="" coords="299,2003,443,2032"/><area shape="rect" id="node100" href="drone_8c.html#a55ad73bd40e656d85654c7196d442055" title="prvTakeoffDone" alt="" coords="313,1315,428,1344"/><area shape="rect" id="node102" href="flight_8c.html#ad89bf60943a4c09254b7bc38d35651aa" title="vFlightTakeoffMvt" alt="" coords="308,1629,433,1659"/><area shape="rect" id="node105" href="flight_8c.html#a012b2b748783aff0385d79f1990a8eed" title="ucFlightAutotuneMvt" alt="" coords="300,1683,441,1712"/><area shape="rect" id="node108" href="flight_8c.html#abd8c22b30dd926141a233934ee8c56ed" title="vFlightCommandMvt" alt="" coords="300,1736,441,1765"/><area shape="rect" id="node111" href="drone_8c.html#af1ecc8f8fb6e88e193c25cff0bfc9250" title="prvLandingDone" alt="" coords="313,1949,428,1979"/><area shape="rect" id="node114" href="flight_8c.html#a9572a0151bab9b0ef3506466d3952dec" title="vFlightLandMvt" alt="" coords="316,2056,425,2085"/><area shape="rect" id="node117" href="flight_8c.html#acac293933dc8e8dc33e9ad9cd6f36fdf" title="vFlightExecuteMvt" alt="" coords="305,2109,436,2139"/><area shape="rect" id="node127" href="drone_8c.html#a6ed0192c590c18579fd803b7dfd4b6ee" title="prvSendStatus" alt="" coords="540,531,647,560"/><area shape="rect" id="node129" href="drone_8c.html#a3a3685ed7436c17274035fd5ab62a058" title="prvDroneConfigValid" alt="" coords="523,584,664,613"/><area shape="rect" id="node131" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6" title="prvSafeSetDroneConfig" alt="" coords="513,373,673,403"/><area shape="rect" id="node134" href="drone_8c.html#ae0c8b07d0be360e948fd5f870edc426d" title="prvEnableVideo" alt="" coords="537,427,649,456"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a933cc0454396f7bcf7739819287e8403"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvBatteryCritical </td>
          <td>(</td>
          <td class="paramtype">const uint32_t *const&#160;</td>
          <td class="paramname"><em>pulPowerLvl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01609">1609</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">return</span> ( *pulPowerLvl &lt; pxCurrDroneConfig-&gt;ulCritBatteryLvl );</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a933cc0454396f7bcf7739819287e8403_icgraph.png" border="0" usemap="#drone_8c_a933cc0454396f7bcf7739819287e8403_icgraph" alt=""/></div>
<map name="drone_8c_a933cc0454396f7bcf7739819287e8403_icgraph" id="drone_8c_a933cc0454396f7bcf7739819287e8403_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="176,5,347,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="395,5,445,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abbdcc9b7762286ffa0216c945cb83a42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvBatteryMonitoringTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01142">1142</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;{</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;portTickType xNextWakeTime = xTaskGetTickCount();</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneState.html">droneState</a> xCurrDroneState;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneConfig.html">droneConfig</a> xCurrConfig;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> xNewBatteryWrapper;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">while</span>( 1 )</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                <span class="stringliteral">&quot;prvBatteryMonitoringTask()&quot;</span>, <span class="stringliteral">&quot;Woken up&quot;</span> );</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="comment">/* Measure battery level */</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <a class="code" href="drone_8c.html#a20dca1b3854cdf78a615e59568f885af">prvGetBatteryLvl</a>( &amp;( xNewBatteryWrapper.ulPowerLvl ) );</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="comment">/* Update local copy of xDroneState */</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="comment">/* Check measurement consistency */</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#abfc35b7fc0649dac5fb29fc313d4e1dc">prvBatteryValid</a>( &amp;( xNewBatteryWrapper.ulPowerLvl ) ) )</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="comment">/* Update global battery level */</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <a class="code" href="drone_8c.html#a60082ba0309194b6c32f3c0385e135f3">prvSafeSetBatteryData</a>( &amp;( xNewBatteryWrapper.ulPowerLvl ) );</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="comment">/* Register measurement success */</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2">DRN_ERR_BATT_INVAL</a>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2">DRN_ERR_BATT_INVAL</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="comment">/* Discard this measure altogether */</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            <a class="code" href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722">prvSafeGetBatteryData</a>( &amp;xNewBatteryWrapper );</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="comment">/* Update global xDroneState */</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="comment">/* Update local copy of xDroneConfig */</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <a class="code" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a>( &amp;xCurrConfig );</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="comment">/* Land if battery is critical */</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a933cc0454396f7bcf7739819287e8403">prvBatteryCritical</a>( &amp;( xNewBatteryWrapper.ulPowerLvl ),</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                &amp;xCurrConfig ) )</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                    uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                    <span class="stringliteral">&quot;prvBatteryMonitoringTask()&quot;</span>,</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                    <span class="stringliteral">&quot;Critical battery level detected&quot;</span> );</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                <span class="stringliteral">&quot;prvBatteryMonitoringTask()&quot;</span>, <span class="stringliteral">&quot;Delayed&quot;</span> );</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        vTaskDelayUntil( &amp;xNextWakeTime,</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                xCurrConfig.xBatteryMonitoringPeriod );</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">/* TODO : send error to base if gets out of infinite loop */</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="stringliteral">&quot;prvBatteryMonitoringTask()&quot;</span>,</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            <span class="stringliteral">&quot;Got out of infinite loop !&quot;</span> );</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a933cc0454396f7bcf7739819287e8403"><div class="ttname"><a href="drone_8c.html#a933cc0454396f7bcf7739819287e8403">prvBatteryCritical</a></div><div class="ttdeci">static uint8_t prvBatteryCritical(const uint32_t *const pulPowerLvl, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01609">drone.c:1609</a></div></div>
<div class="ttc" id="structdroneBatteryWrapper_html"><div class="ttname"><a href="structdroneBatteryWrapper.html">droneBatteryWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00168">drone.c:168</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a85117dc073a0b9e9143d5fc903512fb2">DRN_ERR_BATT_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00105">drone.c:105</a></div></div>
<div class="ttc" id="drone_8c_html_a60082ba0309194b6c32f3c0385e135f3"><div class="ttname"><a href="drone_8c.html#a60082ba0309194b6c32f3c0385e135f3">prvSafeSetBatteryData</a></div><div class="ttdeci">static void prvSafeSetBatteryData(const uint32_t *const pulNewBatteryLvl)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01440">drone.c:1440</a></div></div>
<div class="ttc" id="drone_8c_html_a95e9ad134d650153cb01a06003aeb343"><div class="ttname"><a href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a></div><div class="ttdeci">static void prvSafeGetDroneState(struct droneState *const pxNewState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01547">drone.c:1547</a></div></div>
<div class="ttc" id="drone_8c_html_a20dca1b3854cdf78a615e59568f885af"><div class="ttname"><a href="drone_8c.html#a20dca1b3854cdf78a615e59568f885af">prvGetBatteryLvl</a></div><div class="ttdeci">static void prvGetBatteryLvl(uint32_t *pulBatteryLvl)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01791">drone.c:1791</a></div></div>
<div class="ttc" id="drone_8c_html_aba79a8c759d64b5d1df90fe8028cdd18"><div class="ttname"><a href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a></div><div class="ttdeci">static void prvSafeSetDroneState(const struct droneState *const xNewDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01482">drone.c:1482</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00078">drone.c:78</a></div></div>
<div class="ttc" id="drone_8c_html_a1c264049cf21d075ca999e8baed2b722"><div class="ttname"><a href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722">prvSafeGetBatteryData</a></div><div class="ttdeci">static void prvSafeGetBatteryData(struct droneBatteryWrapper *const pxNewBattWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01521">drone.c:1521</a></div></div>
<div class="ttc" id="structdroneState_html"><div class="ttname"><a href="structdroneState.html">droneState</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00121">drone.c:121</a></div></div>
<div class="ttc" id="drone_8c_html_a52ed89dea0bcfffadeca6535234ee8a6"><div class="ttname"><a href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a></div><div class="ttdeci">static void prvSafeGetDroneConfig(struct droneConfig *const pxNewConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01530">drone.c:1530</a></div></div>
<div class="ttc" id="structdroneConfig_html"><div class="ttname"><a href="structdroneConfig.html">droneConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00012">drone.h:12</a></div></div>
<div class="ttc" id="drone_8c_html_abfc35b7fc0649dac5fb29fc313d4e1dc"><div class="ttname"><a href="drone_8c.html#abfc35b7fc0649dac5fb29fc313d4e1dc">prvBatteryValid</a></div><div class="ttdeci">static uint8_t prvBatteryValid(const uint32_t *const pulNewBattLvl)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01352">drone.c:1352</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_abbdcc9b7762286ffa0216c945cb83a42_cgraph.png" border="0" usemap="#drone_8c_abbdcc9b7762286ffa0216c945cb83a42_cgraph" alt=""/></div>
<map name="drone_8c_abbdcc9b7762286ffa0216c945cb83a42_cgraph" id="drone_8c_abbdcc9b7762286ffa0216c945cb83a42_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="436,121,529,150"/><area shape="rect" id="node5" href="drone_8c.html#a20dca1b3854cdf78a615e59568f885af" title="prvGetBatteryLvl" alt="" coords="245,41,365,70"/><area shape="rect" id="node8" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343" title="prvSafeGetDroneState" alt="" coords="228,94,383,124"/><area shape="rect" id="node10" href="drone_8c.html#abfc35b7fc0649dac5fb29fc313d4e1dc" title="prvBatteryValid" alt="" coords="251,148,360,177"/><area shape="rect" id="node12" href="drone_8c.html#a60082ba0309194b6c32f3c0385e135f3" title="prvSafeSetBatteryData" alt="" coords="227,201,384,230"/><area shape="rect" id="node15" href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722" title="prvSafeGetBatteryData" alt="" coords="227,254,384,284"/><area shape="rect" id="node17" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18" title="prvSafeSetDroneState" alt="" coords="229,308,381,337"/><area shape="rect" id="node20" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6" title="prvSafeGetDroneConfig" alt="" coords="225,361,385,390"/><area shape="rect" id="node22" href="drone_8c.html#a933cc0454396f7bcf7739819287e8403" title="prvBatteryCritical" alt="" coords="244,414,367,444"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_abbdcc9b7762286ffa0216c945cb83a42_icgraph.png" border="0" usemap="#drone_8c_abbdcc9b7762286ffa0216c945cb83a42_icgraph" alt=""/></div>
<map name="drone_8c_abbdcc9b7762286ffa0216c945cb83a42_icgraph" id="drone_8c_abbdcc9b7762286ffa0216c945cb83a42_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="224,5,275,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab0b8e7c4d4d11484a45ec2552b5f996a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvBatteryTimedout </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrBatteryWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01621">1621</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;{</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment">/* Since last update */</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;portTickType ulTimeElapsed;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">/* TODO : take into account systick overflow (probably not an issue for low</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">    SysTick frequency and short periods). */</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    ulTimeElapsed = xTaskGetTickCount() - pxCurrBatteryWrapper-&gt;<a class="code" href="structdroneBatteryWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">return</span> ulTimeElapsed &gt; ( pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#ac221ea13d2025526825987b3d52fe154">xBatteryTimeout</a> * pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#ace4621532d49f4bb0d0eac5e9331b197">xBatteryMonitoringPeriod</a> );</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div>
<div class="ttc" id="structdroneConfig_html_ace4621532d49f4bb0d0eac5e9331b197"><div class="ttname"><a href="structdroneConfig.html#ace4621532d49f4bb0d0eac5e9331b197">droneConfig::xBatteryMonitoringPeriod</a></div><div class="ttdeci">portTickType xBatteryMonitoringPeriod</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00030">drone.h:30</a></div></div>
<div class="ttc" id="structdroneConfig_html_ac221ea13d2025526825987b3d52fe154"><div class="ttname"><a href="structdroneConfig.html#ac221ea13d2025526825987b3d52fe154">droneConfig::xBatteryTimeout</a></div><div class="ttdeci">uint8_t xBatteryTimeout</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00042">drone.h:42</a></div></div>
<div class="ttc" id="structdroneBatteryWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneBatteryWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneBatteryWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00172">drone.c:172</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ab0b8e7c4d4d11484a45ec2552b5f996a_icgraph.png" border="0" usemap="#drone_8c_ab0b8e7c4d4d11484a45ec2552b5f996a_icgraph" alt=""/></div>
<map name="drone_8c_ab0b8e7c4d4d11484a45ec2552b5f996a_icgraph" id="drone_8c_ab0b8e7c4d4d11484a45ec2552b5f996a_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="189,5,317,35"/><area shape="rect" id="node5" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="365,5,488,35"/><area shape="rect" id="node7" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="536,5,587,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abfc35b7fc0649dac5fb29fc313d4e1dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvBatteryValid </td>
          <td>(</td>
          <td class="paramtype">const uint32_t *const&#160;</td>
          <td class="paramname"><em>pulNewBattLvl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01352">1352</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;{</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="comment">/* TODO : Implement it */</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">//  if(  )</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">//  {</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">//  else</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">//  {</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">//      return 0;</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_abfc35b7fc0649dac5fb29fc313d4e1dc_icgraph.png" border="0" usemap="#drone_8c_abfc35b7fc0649dac5fb29fc313d4e1dc_icgraph" alt=""/></div>
<map name="drone_8c_abfc35b7fc0649dac5fb29fc313d4e1dc_icgraph" id="drone_8c_abfc35b7fc0649dac5fb29fc313d4e1dc_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="165,5,336,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="384,5,435,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2f26a5a0f6e36469031ef12396418848"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvDetectObstacleTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Task to update xTelemeterWrapper global variable, sets eDroneState.eErrorMask with DRN_ERR_TLM_INVAL if measured telemeter distances are invalid, and wakes <a class="el" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff">prvFlightCtrlTask()</a> if an obstacle is detected </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00573">573</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;portTickType xNextWakeTime = xTaskGetTickCount();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keyword">struct </span><a class="code" href="structtelemeterData.html">telemeterData</a> xNewTlmData;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneConfig.html">droneConfig</a> xCurrConfig;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneState.html">droneState</a> xCurrDroneState;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">while</span>( 1 )</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="comment">/* Secure xCurrDroneConfig update */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a>( &amp;xCurrConfig );</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="comment">/* Update local copy of xDroneState */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="comment">/* TODO :   - Check them all with a telemeter specific function,</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">                      returning a mask for invalid measures.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">                    - Update xDroneState.eErrorMask (set DRN_ERR_TLM_INVAL or</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">                      reset it) */</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">/* Update each telemeter measurement */</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="telemeter_8c.html#ab4fff6ea13609ac80d79fdfeab2b472b">vTelemeterGetData</a>( &amp;xNewTlmData );</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">/* Check their validity */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="telemeter_8c.html#a4dffe6c395c7511da8b58f4108f07b9f">ucTelemeterIsDataValid</a>( &amp;xNewTlmData ) )</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="comment">/* Register success */</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66">DRN_ERR_TLM_INVAL</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">if</span>( xNewTlmData.ulFrontDist &lt; xCurrConfig.ulCritObstacleDist )</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="comment">/* Register obstacle on this telemeter */</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                xNewTlmData.eIdMask |= <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a42f31571b46d76758882d0b2c6f7382a">TLM_FRT</a>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a42f31571b46d76758882d0b2c6f7382a">TLM_FRT</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">if</span>( xNewTlmData.ulBackDist &lt; xCurrConfig.ulCritObstacleDist )</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <span class="comment">/* Register obstacle on this telemeter */</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                xNewTlmData.eIdMask |= <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a4e3ee6491fe6896724f5df6880ac6dc0">TLM_BCK</a>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a4e3ee6491fe6896724f5df6880ac6dc0">TLM_BCK</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">if</span>( xNewTlmData.ulLeftBackDist &lt; xCurrConfig.ulCritObstacleDist )</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="comment">/* Register obstacle on this telemeter */</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                xNewTlmData.eIdMask |= <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a60b699157b9a22c6676293d9d4d25c53">TLM_LFT_BCK</a>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a60b699157b9a22c6676293d9d4d25c53">TLM_LFT_BCK</a>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">if</span>( xNewTlmData.ulLeftFrontDist &lt; xCurrConfig.ulCritObstacleDist )</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="comment">/* Register obstacle on this telemeter */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                xNewTlmData.eIdMask |= <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98abf5b5a128cd512f4900407f990109625">TLM_LFT_FRT</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98abf5b5a128cd512f4900407f990109625">TLM_LFT_FRT</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">if</span>( xNewTlmData.ulRightBackDist &lt; xCurrConfig.ulCritObstacleDist )</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <span class="comment">/* Register obstacle on this telemeter */</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                xNewTlmData.eIdMask |= <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a377cbc68dfe3a563a9adb99e518be231">TLM_RGT_BCK</a>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a377cbc68dfe3a563a9adb99e518be231">TLM_RGT_BCK</a>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordflow">if</span>( xNewTlmData.ulRightFrontDist &lt; xCurrConfig.ulCritObstacleDist )</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <span class="comment">/* Register obstacle on this telemeter */</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                xNewTlmData.eIdMask |= <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a5fed61b64357947f3e523fc90e0e67f4">TLM_RGT_FRT</a>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a5fed61b64357947f3e523fc90e0e67f4">TLM_RGT_FRT</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="comment">/* Ignore bottom &quot;obstacles&quot; while landed and landing;</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">            ulBottomDist is still updated. */</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordflow">if</span>( ( <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> != <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a> )</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    || (<a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> != <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a> ) )</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <span class="keywordflow">if</span>( xNewTlmData.ulBottomDist &lt; xCurrConfig.ulMinAltitude )</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    <span class="comment">/* Register obstacle on this telemeter */</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    xNewTlmData.eIdMask |= <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a0c0c6a1219ebf777c03ee10d6bae6c59">TLM_BOT</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                    <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a0c0c6a1219ebf777c03ee10d6bae6c59">TLM_BOT</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <span class="comment">/* Register no obstacle on this telemeter */</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                xNewTlmData.eIdMask &amp;= ~<a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a0c0c6a1219ebf777c03ee10d6bae6c59">TLM_BOT</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="comment">/* Update xTelemeterWrapper global variable */</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <a class="code" href="drone_8c.html#afe4bece13abfc26bfff4fc4a4c80a175">prvSafeSetTelemeterData</a>( &amp;xNewTlmData );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <span class="comment">/* Set xDroneMode to MODE_AVOIDANCE to and immediately wake up</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">            prvFlightCtrlTask() for better reactivity. */</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="keywordflow">if</span>( xNewTlmData.eIdMask != <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a633464c2bc1c60bd686204417a306d3c">TLM_NONE</a> )</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="comment">/* Set FlightCtrlTask in obstacle avoidance mode */</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="comment">//prvSafeGetDroneState( &amp;xNewDroneState );</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="comment">/* FIXME */</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="comment">//xNewDroneState.eErrorMask = DRN_ERR_TLM;</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="comment">//prvSafeSetDroneState( &amp;xNewDroneState );</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                xSemaphoreGive( <a class="code" href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a> );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="comment">/* Register measurement invalidity */</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66">DRN_ERR_TLM_INVAL</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="comment">/* The global variable is not updated */</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        vTaskDelayUntil( &amp;xNextWakeTime, xCurrConfig.xDetectObstaclePeriod );</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">/* Should never get there */</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvDetectObstacleTask()&quot;</span>,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="stringliteral">&quot;Got out of infinite loop !&quot;</span> );</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a377cbc68dfe3a563a9adb99e518be231"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a377cbc68dfe3a563a9adb99e518be231">TLM_RGT_BCK</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00015">telemeter.h:15</a></div></div>
<div class="ttc" id="structdroneState_html_a6bac61f96c145cf395b2a4fb359be46b"><div class="ttname"><a href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">droneState::eFltState</a></div><div class="ttdeci">enum droneFltState eFltState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00124">drone.c:124</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00080">drone.c:80</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a60b699157b9a22c6676293d9d4d25c53"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a60b699157b9a22c6676293d9d4d25c53">TLM_LFT_BCK</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00013">telemeter.h:13</a></div></div>
<div class="ttc" id="drone_8c_html_a95e9ad134d650153cb01a06003aeb343"><div class="ttname"><a href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a></div><div class="ttdeci">static void prvSafeGetDroneState(struct droneState *const pxNewState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01547">drone.c:1547</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a0c0c6a1219ebf777c03ee10d6bae6c59"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a0c0c6a1219ebf777c03ee10d6bae6c59">TLM_BOT</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00017">telemeter.h:17</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a475a89ae9e8123cb50bbcd0fd519dd66">DRN_ERR_TLM_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00091">drone.c:91</a></div></div>
<div class="ttc" id="drone_8c_html_aba79a8c759d64b5d1df90fe8028cdd18"><div class="ttname"><a href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a></div><div class="ttdeci">static void prvSafeSetDroneState(const struct droneState *const xNewDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01482">drone.c:1482</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a5fed61b64357947f3e523fc90e0e67f4"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a5fed61b64357947f3e523fc90e0e67f4">TLM_RGT_FRT</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00014">telemeter.h:14</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="drone_8c_html_a6b9ccec43699282550b9e25ee80bf2c8"><div class="ttname"><a href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a></div><div class="ttdeci">struct droneState xDroneState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00248">drone.c:248</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a633464c2bc1c60bd686204417a306d3c"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a633464c2bc1c60bd686204417a306d3c">TLM_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00010">telemeter.h:10</a></div></div>
<div class="ttc" id="structdroneState_html"><div class="ttname"><a href="structdroneState.html">droneState</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00121">drone.c:121</a></div></div>
<div class="ttc" id="telemeter_8c_html_ab4fff6ea13609ac80d79fdfeab2b472b"><div class="ttname"><a href="telemeter_8c.html#ab4fff6ea13609ac80d79fdfeab2b472b">vTelemeterGetData</a></div><div class="ttdeci">void vTelemeterGetData(struct telemeterData *const pxNewTlmData)</div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8c_source.html#l00109">telemeter.c:109</a></div></div>
<div class="ttc" id="drone_8c_html_afe4bece13abfc26bfff4fc4a4c80a175"><div class="ttname"><a href="drone_8c.html#afe4bece13abfc26bfff4fc4a4c80a175">prvSafeSetTelemeterData</a></div><div class="ttdeci">static void prvSafeSetTelemeterData(const struct telemeterData *const pxNewTelemeterData)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01468">drone.c:1468</a></div></div>
<div class="ttc" id="telemeter_8c_html_a4dffe6c395c7511da8b58f4108f07b9f"><div class="ttname"><a href="telemeter_8c.html#a4dffe6c395c7511da8b58f4108f07b9f">ucTelemeterIsDataValid</a></div><div class="ttdeci">uint8_t ucTelemeterIsDataValid(const struct telemeterData *const pxTelemeterData)</div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8c_source.html#l00084">telemeter.c:84</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a4e3ee6491fe6896724f5df6880ac6dc0"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a4e3ee6491fe6896724f5df6880ac6dc0">TLM_BCK</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00016">telemeter.h:16</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00068">drone.c:68</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a42f31571b46d76758882d0b2c6f7382a"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a42f31571b46d76758882d0b2c6f7382a">TLM_FRT</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00011">telemeter.h:11</a></div></div>
<div class="ttc" id="drone_8c_html_a52ed89dea0bcfffadeca6535234ee8a6"><div class="ttname"><a href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a></div><div class="ttdeci">static void prvSafeGetDroneConfig(struct droneConfig *const pxNewConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01530">drone.c:1530</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98abf5b5a128cd512f4900407f990109625"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98abf5b5a128cd512f4900407f990109625">TLM_LFT_FRT</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00012">telemeter.h:12</a></div></div>
<div class="ttc" id="drone_8c_html_a24c04e8b5033a2e1436a75ce4905ee01"><div class="ttname"><a href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a></div><div class="ttdeci">static xSemaphoreHandle xFlightCtrlSem</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00218">drone.c:218</a></div></div>
<div class="ttc" id="structdroneConfig_html"><div class="ttname"><a href="structdroneConfig.html">droneConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00012">drone.h:12</a></div></div>
<div class="ttc" id="structtelemeterData_html"><div class="ttname"><a href="structtelemeterData.html">telemeterData</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00022">telemeter.h:22</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a2f26a5a0f6e36469031ef12396418848_cgraph.png" border="0" usemap="#drone_8c_a2f26a5a0f6e36469031ef12396418848_cgraph" alt=""/></div>
<map name="drone_8c_a2f26a5a0f6e36469031ef12396418848_cgraph" id="drone_8c_a2f26a5a0f6e36469031ef12396418848_cgraph">
<area shape="rect" id="node3" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6" title="prvSafeGetDroneConfig" alt="" coords="215,5,375,35"/><area shape="rect" id="node5" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343" title="prvSafeGetDroneState" alt="" coords="217,59,372,88"/><area shape="rect" id="node7" href="telemeter_8c.html#ab4fff6ea13609ac80d79fdfeab2b472b" title="vTelemeterGetData" alt="" coords="227,112,363,141"/><area shape="rect" id="node11" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="647,241,740,271"/><area shape="rect" id="node13" href="telemeter_8c.html#a4dffe6c395c7511da8b58f4108f07b9f" title="ucTelemeterIsDataValid" alt="" coords="213,216,376,245"/><area shape="rect" id="node19" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18" title="prvSafeSetDroneState" alt="" coords="435,320,587,349"/><area shape="rect" id="node22" href="drone_8c.html#afe4bece13abfc26bfff4fc4a4c80a175" title="prvSafeSetTelemeterData" alt="" coords="424,373,597,403"/><area shape="rect" id="node9" href="telemeter_8c.html#afa90e065b5e3087b7e0e87497330e0b6" title="usTelemeterGetDist" alt="" coords="441,112,580,141"/><area shape="rect" id="node15" href="telemeter_8c.html#aa55a5816824de2911572bf6a563247b4" title="prvTelemeterIsDistValid" alt="" coords="429,267,592,296"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a2f26a5a0f6e36469031ef12396418848_icgraph.png" border="0" usemap="#drone_8c_a2f26a5a0f6e36469031ef12396418848_icgraph" alt=""/></div>
<map name="drone_8c_a2f26a5a0f6e36469031ef12396418848_icgraph" id="drone_8c_a2f26a5a0f6e36469031ef12396418848_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="213,5,264,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a095421af495ba7c58b7595dc5bebeb86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvDisableVideo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01563">1563</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;{</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">/* TODO */</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;TODO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvDisableVideo()&quot;</span>,</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;            <span class="stringliteral">&quot;Does nothing ATM&quot;</span> );</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;}</div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a095421af495ba7c58b7595dc5bebeb86_cgraph.png" border="0" usemap="#drone_8c_a095421af495ba7c58b7595dc5bebeb86_cgraph" alt=""/></div>
<map name="drone_8c_a095421af495ba7c58b7595dc5bebeb86_cgraph" id="drone_8c_a095421af495ba7c58b7595dc5bebeb86_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="172,5,265,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a095421af495ba7c58b7595dc5bebeb86_icgraph.png" border="0" usemap="#drone_8c_a095421af495ba7c58b7595dc5bebeb86_icgraph" alt=""/></div>
<map name="drone_8c_a095421af495ba7c58b7595dc5bebeb86_icgraph" id="drone_8c_a095421af495ba7c58b7595dc5bebeb86_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="172,5,327,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="376,5,427,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3a3685ed7436c17274035fd5ab62a058"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvDroneConfigValid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneConfig.html">droneConfig</a> *&#160;</td>
          <td class="paramname"><em>pxNewDroneConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks xDroneConfig, returns 1 if valid, 0 otherwise </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01345">1345</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;{</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">/* TODO : implement it */</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a3a3685ed7436c17274035fd5ab62a058_icgraph.png" border="0" usemap="#drone_8c_a3a3685ed7436c17274035fd5ab62a058_icgraph" alt=""/></div>
<map name="drone_8c_a3a3685ed7436c17274035fd5ab62a058_icgraph" id="drone_8c_a3a3685ed7436c17274035fd5ab62a058_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="199,5,353,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="403,5,453,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0c8b07d0be360e948fd5f870edc426d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvEnableVideo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Video control routines </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01554">1554</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;{</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="comment">/* TODO */</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;TODO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvEnableVideo()&quot;</span>,</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            <span class="stringliteral">&quot;Does nothing ATM&quot;</span> );</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="comment">/* GPIO_SetBits(GPIOx, GPIO_Pin) */</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;}</div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ae0c8b07d0be360e948fd5f870edc426d_cgraph.png" border="0" usemap="#drone_8c_ae0c8b07d0be360e948fd5f870edc426d_cgraph" alt=""/></div>
<map name="drone_8c_ae0c8b07d0be360e948fd5f870edc426d_cgraph" id="drone_8c_ae0c8b07d0be360e948fd5f870edc426d_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="169,5,263,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ae0c8b07d0be360e948fd5f870edc426d_icgraph.png" border="0" usemap="#drone_8c_ae0c8b07d0be360e948fd5f870edc426d_icgraph" alt=""/></div>
<map name="drone_8c_ae0c8b07d0be360e948fd5f870edc426d_icgraph" id="drone_8c_ae0c8b07d0be360e948fd5f870edc426d_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="169,5,324,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="373,5,424,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a82a6ebf7a4c139c50e1a7e812c8cb6ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvFlightCtrlTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Task to compute the desired flight behavior according to the current flight mode/state (set point for PID in prvMotorCtrlTask()). This task is periodic but can be woken by an event. This is possible using a timeout on a binary semaphore. The task repeats at each timeout, but reacts to the semaphore being given. This task checks the global variables for measurement timeouts and sets xDroneState.* accordingly. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00728">728</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;{</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneIMUWrapper.html">droneIMUWrapper</a> xNewIMUWrapper;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneState.html">droneState</a> xCurrDroneState;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> xCurrTlmWrapper;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneConfig.html">droneConfig</a> xCurrConfig;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> xCurrBatteryWrapper;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneGPSWrapper.html">droneGPSWrapper</a> xCurrGPSWrapper;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> xCurrZigbeeWrapper;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="keyword">struct </span><a class="code" href="structflightMovement.html">flightMovement</a> xNextFltMvt = <a class="code" href="drone_8c.html#aa27964d5f5462c40830fb4484a4279d0">xStationaryFlightMvt</a>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="keyword">enum</span> <a class="code" href="imu_8h.html#aa1fd10828f669d98e5e9f39f53f30892">IMUErrorMask</a> eIMUError;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">//uint8_t ucIMUMeasurementCnt = 0;</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">/* Condition already tested in main() */</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a> == NULL )</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvFlightCtrlTask()&quot;</span>,</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="stringliteral">&quot;xFlightCtrlSem is NULL !&quot;</span> );</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">while</span>( 1 )</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvFlightCtrlTask()&quot;</span>,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <span class="stringliteral">&quot;Woken up&quot;</span> );</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="comment">/* Update of local copy of xDroneState */</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <a class="code" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment">/* Update of local copy of xDroneConfig */</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a>( &amp;xCurrConfig );</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="comment">/* Attitude measurement */</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <a class="code" href="imu_8c.html#ac4ad027278ff7ebbcd4b4f1686aaa404">vIMUGetData</a>( &amp;( xNewIMUWrapper.xIMUData ) );</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="comment">/* Is data within valid range ? */</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        eIMUError = <a class="code" href="imu_8c.html#a11e78f1736ae8585497eff9eafe5ea07">eIMUIsDataValid</a>( &amp;( xNewIMUWrapper.xIMUData ) );</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="comment">/* TODO : Attitude measurement, retry if measurement is invalid */</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">//      do</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">//      {</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">//          ucIMUMeasurementCnt++;</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">//          /* Attitude measurement */</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">//          vIMUGetData( pxNewIMUData );</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">//          /* Is data within valid range ? */</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">//          eIMUError = eIMUIsDataValid( pxNewIMUData );</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">//      }</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">//      while( ( ucIMUMeasurementCnt &lt; 3 )</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">//              &amp;&amp;  ( eIMUError != IMU_ERR_NONE ) );</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="comment">/* At this point, xIMUData may or may not be valid */</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keywordflow">if</span>( eIMUError != <a class="code" href="imu_8h.html#aa1fd10828f669d98e5e9f39f53f30892a37b79e8fc1c62bdd4f3b68277433cd60">IMU_ERR_NONE</a> )</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="comment">/* We work with the last valid value - better than nothing */</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <a class="code" href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7">prvSafeGetIMUData</a>( &amp;xNewIMUWrapper );</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="comment">/* Update xDroneState.eErrorMask */</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433">DRN_ERR_IMU_INVAL</a>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">//          /* Check IMU timeout, as IMUDataWrapper was not updated */</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">//          if( prvIMUTimedout( &amp;xNewIMUWrapper, &amp;xCurrConfig ) )</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">//          {</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">//              /* Select relevant error state based on current state */</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">//              prvSelectErrorState( &amp;xCurrDroneState );</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">//              /* Add IMU timeout error to eErrorMask */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">//              xCurrDroneState.eErrorMask |= DRN_ERR_IMU_TOUT;</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">//              /* Apply the changes to xDroneState global variable */</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">//              prvSafeSetDroneState( &amp;xCurrDroneState );</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">//          }</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="comment">/* Update xIMUWrapper global variable */</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <a class="code" href="drone_8c.html#a6e476734aad041a30d224248842252ee">prvSafeSetIMUData</a>( &amp;( xNewIMUWrapper.xIMUData ) );</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <span class="comment">/* Clear DRN_ERR_IMU_INVAL out of xDroneState.eErrorMask to reflect</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">            no IMUData invalid error. */</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433">DRN_ERR_IMU_INVAL</a>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="comment">/* Update local data for centralized timeout checking */</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <a class="code" href="drone_8c.html#a7cf7884f575110d3c64162edc8e1fa95">prvSafeGetTelemeterData</a>( &amp;xCurrTlmWrapper );</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722">prvSafeGetBatteryData</a>( &amp;xCurrBatteryWrapper );</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="drone_8c.html#ad2163c1693d3186f6bf764a939764c90">prvSafeGetGPSData</a>( &amp;xCurrGPSWrapper );</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="drone_8c.html#a02c9abf2df2882099febd3a5329e94ad">prvSafeGetZigbeeData</a>( &amp;xCurrZigbeeWrapper );</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment">/* Checks every peripheral timeout and updates both local and global</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">        droneState variable */</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d">prvHandleTimouts</a>( &amp;xCurrTlmWrapper, &amp;xCurrBatteryWrapper,</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                &amp;xNewIMUWrapper, &amp;xCurrGPSWrapper, &amp;xCurrZigbeeWrapper,</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                &amp;xCurrConfig, &amp;xCurrDroneState );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="comment">/* At this point, the xDroneState reflects any timeout of peripheral</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">        measurements */</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="comment">/* PID set point computation based on state/orders (some transition</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">        orders are translated into states) */</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">switch</span>( xCurrDroneState.eFltState )</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a>:</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="comment">/* Nothing to do, the drone is idle on the ground. */</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a8675332e0b2080876b3a17ee1bcd17a3">prvObstacleDetected</a>( &amp;xCurrTlmWrapper ) )</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                <span class="comment">/* TODO : some led blinking */</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a>:</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <span class="comment">/* If some serious error fires while taking off, the state is</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">            switched to STATE_FLIGHT_ERR and takeoff is aborted */</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="drone_8c.html#a55ad73bd40e656d85654c7196d442055">prvTakeoffDone</a>( &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                    &amp;( xCurrConfig ) ) )</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                <span class="comment">/* Set xNextFlightMvt for takeoff */</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                <a class="code" href="flight_8c.html#ad89bf60943a4c09254b7bc38d35651aa">vFlightTakeoffMvt</a>( &amp;xNextFltMvt, &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                        &amp;( xCurrTlmWrapper.xTelemeterData ),</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                        <a class="code" href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a>.<a class="code" href="structdroneConfig.html#a484448908637319ab5d43e20f68264ee">ulTakeoffAltitude</a> );</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="comment">/* When takeoff has finished, switch to flying state.</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">                Does nothing for this period, STATE_FLIGHT will only be</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">                handled on next task period. */</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a>:</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="comment">/* Update flightMvt if autotune not finished, switch state</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">            otherwise */</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="flight_8c.html#a012b2b748783aff0385d79f1990a8eed">ucFlightAutotuneMvt</a>( &amp;xNextFltMvt,</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                    &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                    &amp;( xCurrTlmWrapper.xTelemeterData ) ) )</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                <span class="comment">/* TODO : Consider updating the PID parameters as part of</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">                xDroneConfig */</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                <span class="comment">/* xNextFltMvt is updated in the condition */</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                <span class="comment">/* Autotune done, switch to normal flight state */</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a>:</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <span class="comment">/* Normal flight, the drone reacts to movement orders from the base</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">            and saved in xZigbeeData.xFlightCmd, if it didn&#39;t timeout. */</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <a class="code" href="flight_8c.html#abd8c22b30dd926141a233934ee8c56ed">vFlightCommandMvt</a>( &amp;xNextFltMvt, &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                    &amp;( xCurrTlmWrapper.xTelemeterData ),</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                    &amp;( xCurrZigbeeWrapper.xFlightCmd ) );</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a>:</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">if</span> ( !<a class="code" href="drone_8c.html#af1ecc8f8fb6e88e193c25cff0bfc9250">prvLandingDone</a>( &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    &amp;( xCurrConfig ) ) )</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                <a class="code" href="flight_8c.html#a9572a0151bab9b0ef3506466d3952dec">vFlightLandMvt</a>( &amp;xNextFltMvt, &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                        &amp;( xCurrTlmWrapper.xTelemeterData ) );</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                <span class="comment">/* Landing finished */</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>:</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            <span class="comment">/* Nothing to do */</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a>:</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            <span class="comment">/* Emergency landing. In this state, IMUData, TelemeterData might</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">            be outdated */</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <span class="keywordflow">if</span> ( !<a class="code" href="drone_8c.html#af1ecc8f8fb6e88e193c25cff0bfc9250">prvLandingDone</a>( &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    &amp;( xCurrConfig ) ) )</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                <a class="code" href="flight_8c.html#a9572a0151bab9b0ef3506466d3952dec">vFlightLandMvt</a>( &amp;xNextFltMvt, &amp;( xNewIMUWrapper.xIMUData ),</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                        &amp;( xCurrTlmWrapper.xTelemeterData ) );</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                <span class="comment">/* Landing finished */</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="comment">/* STATE_STARTING, the scheduler has not yet started. */</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        } <span class="comment">/* switch( eDroneState ) */</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="comment">/* Execution of computed movement, if we aren&#39;t in STATE_GROUND_RDY,</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">        STATE_STARTING or STATE_GROUND_ERR. */</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="keywordflow">if</span>( ( <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> != <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a> )</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                &amp;&amp; ( <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> != <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a> )</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                &amp;&amp; ( <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> != <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a> ) )</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <a class="code" href="flight_8c.html#acac293933dc8e8dc33e9ad9cd6f36fdf">vFlightExecuteMvt</a>( &amp;xNextFltMvt );</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvFlightCtrlTask()&quot;</span>,</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                <span class="stringliteral">&quot;Trying to take xFlightCtrlSem&quot;</span> );</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        xSemaphoreTake( <a class="code" href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a>, xCurrConfig.xFlightCtrlPeriod );</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">/* Should never get there */</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>, <span class="stringliteral">&quot;prvFlightCtrlTask()&quot;</span>,</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="stringliteral">&quot;Got out of infinite loop !&quot;</span> );</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a02c9abf2df2882099febd3a5329e94ad"><div class="ttname"><a href="drone_8c.html#a02c9abf2df2882099febd3a5329e94ad">prvSafeGetZigbeeData</a></div><div class="ttdeci">static void prvSafeGetZigbeeData(struct droneZigbeeWrapper *const pxNewZigbeeWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01512">drone.c:1512</a></div></div>
<div class="ttc" id="structdroneState_html_a6bac61f96c145cf395b2a4fb359be46b"><div class="ttname"><a href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">droneState::eFltState</a></div><div class="ttdeci">enum droneFltState eFltState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00124">drone.c:124</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a65d6f68d28c3555056d18b2c273ac433">DRN_ERR_IMU_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00095">drone.c:95</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00080">drone.c:80</a></div></div>
<div class="ttc" id="imu_8h_html_aa1fd10828f669d98e5e9f39f53f30892a37b79e8fc1c62bdd4f3b68277433cd60"><div class="ttname"><a href="imu_8h.html#aa1fd10828f669d98e5e9f39f53f30892a37b79e8fc1c62bdd4f3b68277433cd60">IMU_ERR_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00019">imu.h:19</a></div></div>
<div class="ttc" id="drone_8c_html_af1ecc8f8fb6e88e193c25cff0bfc9250"><div class="ttname"><a href="drone_8c.html#af1ecc8f8fb6e88e193c25cff0bfc9250">prvLandingDone</a></div><div class="ttdeci">static uint8_t prvLandingDone(const struct IMUData *const pxCurrIMUData, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01580">drone.c:1580</a></div></div>
<div class="ttc" id="drone_8c_html_a3283bf4f08e89f5b0eb8d610720bb09b"><div class="ttname"><a href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a></div><div class="ttdeci">static struct droneConfig xDroneConfig</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00245">drone.c:245</a></div></div>
<div class="ttc" id="structdroneIMUWrapper_html"><div class="ttname"><a href="structdroneIMUWrapper.html">droneIMUWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00131">drone.c:131</a></div></div>
<div class="ttc" id="structdroneBatteryWrapper_html"><div class="ttname"><a href="structdroneBatteryWrapper.html">droneBatteryWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00168">drone.c:168</a></div></div>
<div class="ttc" id="flight_8c_html_a012b2b748783aff0385d79f1990a8eed"><div class="ttname"><a href="flight_8c.html#a012b2b748783aff0385d79f1990a8eed">ucFlightAutotuneMvt</a></div><div class="ttdeci">uint8_t ucFlightAutotuneMvt(struct flightMovement *const pxMovement, const struct IMUData *const pxIMUData, const struct telemeterData *const pxTelemeterData)</div><div class="ttdef"><b>Definition:</b> <a href="flight_8c_source.html#l00089">flight.c:89</a></div></div>
<div class="ttc" id="drone_8c_html_ae749156ddeaadb095f1dab13cd3d4b0d"><div class="ttname"><a href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d">prvHandleTimouts</a></div><div class="ttdeci">static void prvHandleTimouts(const struct droneTelemeterWrapper *const pxCurrTelemeterWrapper, const struct droneBatteryWrapper *const pxCurrBatteryWrapper, const struct droneIMUWrapper *const pxCurrIMUWrapper, const struct droneGPSWrapper *const pxCurrGPSWrapper, struct droneZigbeeWrapper *const pxCurrZigbeeWrapper, const struct droneConfig *const pxCurrDroneConfig, struct droneState *const pxCurrDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01690">drone.c:1690</a></div></div>
<div class="ttc" id="flight_8c_html_abd8c22b30dd926141a233934ee8c56ed"><div class="ttname"><a href="flight_8c.html#abd8c22b30dd926141a233934ee8c56ed">vFlightCommandMvt</a></div><div class="ttdeci">void vFlightCommandMvt(struct flightMovement *const pxMovement, const struct IMUData *const pxIMUData, const struct telemeterData *const pxTelemeterData, const struct flightCommand *const pxFlightCmd)</div><div class="ttdef"><b>Definition:</b> <a href="flight_8c_source.html#l00102">flight.c:102</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00072">drone.c:72</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00076">drone.c:76</a></div></div>
<div class="ttc" id="imu_8c_html_a11e78f1736ae8585497eff9eafe5ea07"><div class="ttname"><a href="imu_8c.html#a11e78f1736ae8585497eff9eafe5ea07">eIMUIsDataValid</a></div><div class="ttdeci">enum IMUErrorMask eIMUIsDataValid(const struct IMUData *const pxIMUData)</div><div class="ttdef"><b>Definition:</b> <a href="imu_8c_source.html#l00055">imu.c:55</a></div></div>
<div class="ttc" id="drone_8c_html_a95e9ad134d650153cb01a06003aeb343"><div class="ttname"><a href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a></div><div class="ttdeci">static void prvSafeGetDroneState(struct droneState *const pxNewState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01547">drone.c:1547</a></div></div>
<div class="ttc" id="drone_8c_html_a55ad73bd40e656d85654c7196d442055"><div class="ttname"><a href="drone_8c.html#a55ad73bd40e656d85654c7196d442055">prvTakeoffDone</a></div><div class="ttdeci">static uint8_t prvTakeoffDone(const struct IMUData *const pxCurrIMUData, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01573">drone.c:1573</a></div></div>
<div class="ttc" id="drone_8c_html_ad2163c1693d3186f6bf764a939764c90"><div class="ttname"><a href="drone_8c.html#ad2163c1693d3186f6bf764a939764c90">prvSafeGetGPSData</a></div><div class="ttdeci">static void prvSafeGetGPSData(struct droneGPSWrapper *const pxNewGPSWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01503">drone.c:1503</a></div></div>
<div class="ttc" id="drone_8c_html_aa27964d5f5462c40830fb4484a4279d0"><div class="ttname"><a href="drone_8c.html#aa27964d5f5462c40830fb4484a4279d0">xStationaryFlightMvt</a></div><div class="ttdeci">struct flightMovement xStationaryFlightMvt</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00182">drone.c:182</a></div></div>
<div class="ttc" id="structdroneZigbeeWrapper_html"><div class="ttname"><a href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00138">drone.c:138</a></div></div>
<div class="ttc" id="drone_8c_html_aba79a8c759d64b5d1df90fe8028cdd18"><div class="ttname"><a href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a></div><div class="ttdeci">static void prvSafeSetDroneState(const struct droneState *const xNewDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01482">drone.c:1482</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="drone_8c_html_a8675332e0b2080876b3a17ee1bcd17a3"><div class="ttname"><a href="drone_8c.html#a8675332e0b2080876b3a17ee1bcd17a3">prvObstacleDetected</a></div><div class="ttdeci">static uint8_t prvObstacleDetected(const struct droneTelemeterWrapper *const pxCurrTelemeterWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01592">drone.c:1592</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00078">drone.c:78</a></div></div>
<div class="ttc" id="imu_8c_html_ac4ad027278ff7ebbcd4b4f1686aaa404"><div class="ttname"><a href="imu_8c.html#ac4ad027278ff7ebbcd4b4f1686aaa404">vIMUGetData</a></div><div class="ttdeci">void vIMUGetData(struct IMUData *const pxIMUData)</div><div class="ttdef"><b>Definition:</b> <a href="imu_8c_source.html#l00046">imu.c:46</a></div></div>
<div class="ttc" id="structflightMovement_html"><div class="ttname"><a href="structflightMovement.html">flightMovement</a></div><div class="ttdef"><b>Definition:</b> <a href="flight_8h_source.html#l00010">flight.h:10</a></div></div>
<div class="ttc" id="drone_8c_html_a6b9ccec43699282550b9e25ee80bf2c8"><div class="ttname"><a href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a></div><div class="ttdeci">struct droneState xDroneState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00248">drone.c:248</a></div></div>
<div class="ttc" id="drone_8c_html_a7cf7884f575110d3c64162edc8e1fa95"><div class="ttname"><a href="drone_8c.html#a7cf7884f575110d3c64162edc8e1fa95">prvSafeGetTelemeterData</a></div><div class="ttdeci">static void prvSafeGetTelemeterData(struct droneTelemeterWrapper *const pxNewTlmWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01539">drone.c:1539</a></div></div>
<div class="ttc" id="flight_8c_html_a9572a0151bab9b0ef3506466d3952dec"><div class="ttname"><a href="flight_8c.html#a9572a0151bab9b0ef3506466d3952dec">vFlightLandMvt</a></div><div class="ttdeci">void vFlightLandMvt(struct flightMovement *const pxMovement, const struct IMUData *const pxIMUData, const struct telemeterData *const pxTelemeterData)</div><div class="ttdef"><b>Definition:</b> <a href="flight_8c_source.html#l00074">flight.c:74</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00070">drone.c:70</a></div></div>
<div class="ttc" id="drone_8c_html_a1c264049cf21d075ca999e8baed2b722"><div class="ttname"><a href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722">prvSafeGetBatteryData</a></div><div class="ttdeci">static void prvSafeGetBatteryData(struct droneBatteryWrapper *const pxNewBattWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01521">drone.c:1521</a></div></div>
<div class="ttc" id="structdroneConfig_html_a484448908637319ab5d43e20f68264ee"><div class="ttname"><a href="structdroneConfig.html#a484448908637319ab5d43e20f68264ee">droneConfig::ulTakeoffAltitude</a></div><div class="ttdeci">uint32_t ulTakeoffAltitude</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00018">drone.h:18</a></div></div>
<div class="ttc" id="structdroneState_html"><div class="ttname"><a href="structdroneState.html">droneState</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00121">drone.c:121</a></div></div>
<div class="ttc" id="imu_8h_html_aa1fd10828f669d98e5e9f39f53f30892"><div class="ttname"><a href="imu_8h.html#aa1fd10828f669d98e5e9f39f53f30892">IMUErrorMask</a></div><div class="ttdeci">IMUErrorMask</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00015">imu.h:15</a></div></div>
<div class="ttc" id="drone_8c_html_a6e476734aad041a30d224248842252ee"><div class="ttname"><a href="drone_8c.html#a6e476734aad041a30d224248842252ee">prvSafeSetIMUData</a></div><div class="ttdeci">static void prvSafeSetIMUData(const struct IMUData *const pxNewIMUData)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01394">drone.c:1394</a></div></div>
<div class="ttc" id="flight_8c_html_ad89bf60943a4c09254b7bc38d35651aa"><div class="ttname"><a href="flight_8c.html#ad89bf60943a4c09254b7bc38d35651aa">vFlightTakeoffMvt</a></div><div class="ttdeci">void vFlightTakeoffMvt(struct flightMovement *pxMovement, const struct IMUData *pxIMUData, const struct telemeterData *const pxTelemeterData, uint32_t ulTakeoffAltitude)</div><div class="ttdef"><b>Definition:</b> <a href="flight_8c_source.html#l00061">flight.c:61</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00068">drone.c:68</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00066">drone.c:66</a></div></div>
<div class="ttc" id="drone_8c_html_a52ed89dea0bcfffadeca6535234ee8a6"><div class="ttname"><a href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a></div><div class="ttdeci">static void prvSafeGetDroneConfig(struct droneConfig *const pxNewConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01530">drone.c:1530</a></div></div>
<div class="ttc" id="flight_8c_html_acac293933dc8e8dc33e9ad9cd6f36fdf"><div class="ttname"><a href="flight_8c.html#acac293933dc8e8dc33e9ad9cd6f36fdf">vFlightExecuteMvt</a></div><div class="ttdeci">void vFlightExecuteMvt(const struct flightMovement *pxMovement)</div><div class="ttdef"><b>Definition:</b> <a href="flight_8c_source.html#l00130">flight.c:130</a></div></div>
<div class="ttc" id="drone_8c_html_a7108c3d763912fb80781465b0b15f0a7"><div class="ttname"><a href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7">prvSafeGetIMUData</a></div><div class="ttdeci">static void prvSafeGetIMUData(struct droneIMUWrapper *const pxNewIMUWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01495">drone.c:1495</a></div></div>
<div class="ttc" id="drone_8c_html_a24c04e8b5033a2e1436a75ce4905ee01"><div class="ttname"><a href="drone_8c.html#a24c04e8b5033a2e1436a75ce4905ee01">xFlightCtrlSem</a></div><div class="ttdeci">static xSemaphoreHandle xFlightCtrlSem</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00218">drone.c:218</a></div></div>
<div class="ttc" id="structdroneConfig_html"><div class="ttname"><a href="structdroneConfig.html">droneConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00012">drone.h:12</a></div></div>
<div class="ttc" id="structdroneTelemeterWrapper_html"><div class="ttname"><a href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00160">drone.c:160</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00074">drone.c:74</a></div></div>
<div class="ttc" id="structdroneGPSWrapper_html"><div class="ttname"><a href="structdroneGPSWrapper.html">droneGPSWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00150">drone.c:150</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_cgraph.png" border="0" usemap="#drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_cgraph" alt=""/></div>
<map name="drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_cgraph" id="drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="604,879,697,909"/><area shape="rect" id="node5" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343" title="prvSafeGetDroneState" alt="" coords="187,138,341,167"/><area shape="rect" id="node7" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6" title="prvSafeGetDroneConfig" alt="" coords="184,191,344,221"/><area shape="rect" id="node9" href="imu_8c.html#ac4ad027278ff7ebbcd4b4f1686aaa404" title="vIMUGetData" alt="" coords="427,82,528,111"/><area shape="rect" id="node12" href="imu_8c.html#a11e78f1736ae8585497eff9eafe5ea07" title="eIMUIsDataValid" alt="" coords="203,295,325,325"/><area shape="rect" id="node23" href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7" title="prvSafeGetIMUData" alt="" coords="193,350,335,379"/><area shape="rect" id="node25" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18" title="prvSafeSetDroneState" alt="" coords="401,453,553,482"/><area shape="rect" id="node28" href="drone_8c.html#a6e476734aad041a30d224248842252ee" title="prvSafeSetIMUData" alt="" coords="408,399,547,429"/><area shape="rect" id="node31" href="drone_8c.html#a7cf7884f575110d3c64162edc8e1fa95" title="prvSafeGetTelemeterData" alt="" coords="177,505,351,534"/><area shape="rect" id="node33" href="drone_8c.html#a1c264049cf21d075ca999e8baed2b722" title="prvSafeGetBatteryData" alt="" coords="185,558,343,587"/><area shape="rect" id="node35" href="drone_8c.html#ad2163c1693d3186f6bf764a939764c90" title="prvSafeGetGPSData" alt="" coords="192,611,336,641"/><area shape="rect" id="node37" href="drone_8c.html#a02c9abf2df2882099febd3a5329e94ad" title="prvSafeGetZigbeeData" alt="" coords="187,665,341,694"/><area shape="rect" id="node39" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="200,718,328,747"/><area shape="rect" id="node59" href="drone_8c.html#a8675332e0b2080876b3a17ee1bcd17a3" title="prvObstacleDetected" alt="" coords="192,771,336,801"/><area shape="rect" id="node61" href="drone_8c.html#a55ad73bd40e656d85654c7196d442055" title="prvTakeoffDone" alt="" coords="207,825,321,854"/><area shape="rect" id="node63" href="flight_8c.html#ad89bf60943a4c09254b7bc38d35651aa" title="vFlightTakeoffMvt" alt="" coords="415,933,540,962"/><area shape="rect" id="node66" href="flight_8c.html#a012b2b748783aff0385d79f1990a8eed" title="ucFlightAutotuneMvt" alt="" coords="193,931,335,961"/><area shape="rect" id="node69" href="flight_8c.html#abd8c22b30dd926141a233934ee8c56ed" title="vFlightCommandMvt" alt="" coords="193,987,335,1017"/><area shape="rect" id="node72" href="drone_8c.html#af1ecc8f8fb6e88e193c25cff0bfc9250" title="prvLandingDone" alt="" coords="207,1046,321,1075"/><area shape="rect" id="node75" href="flight_8c.html#a9572a0151bab9b0ef3506466d3952dec" title="vFlightLandMvt" alt="" coords="209,1110,319,1139"/><area shape="rect" id="node78" href="flight_8c.html#acac293933dc8e8dc33e9ad9cd6f36fdf" title="vFlightExecuteMvt" alt="" coords="199,1186,329,1215"/><area shape="rect" id="node14" href="imu_8c.html#a89e3760bf039cf03c9f3b5714c78493e" title="prvIsAltitudeValid" alt="" coords="416,346,539,375"/><area shape="rect" id="node16" href="imu_8c.html#ab623abee8f07c1894202579a01f08c76" title="prvIsAngleValid" alt="" coords="421,135,533,165"/><area shape="rect" id="node18" href="imu_8c.html#a8092043a50cbea5490847fb09cb53f8e" title="prvIsSpeedValid" alt="" coords="419,189,536,218"/><area shape="rect" id="node20" href="imu_8c.html#a91f046a37bf1f7607076ef01f9a6fd7f" title="prvIsAccelValid" alt="" coords="421,242,533,271"/><area shape="rect" id="node41" href="drone_8c.html#a94711ce6896840fdb3ab94d61d976ff8" title="prvTelemeterTimedout" alt="" coords="401,879,553,909"/><area shape="rect" id="node43" href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c" title="prvSelectErrorState" alt="" coords="409,506,545,535"/><area shape="rect" id="node45" href="drone_8c.html#ab0b8e7c4d4d11484a45ec2552b5f996a" title="prvBatteryTimedout" alt="" coords="409,559,545,589"/><area shape="rect" id="node47" href="drone_8c.html#a3ce3420491fa2834d600ad074cdfbc81" title="prvIMUTimedout" alt="" coords="419,613,536,642"/><area shape="rect" id="node49" href="drone_8c.html#ac5e99e35d098018f72a95c59d4d6efb3" title="prvGPSTimedout" alt="" coords="416,666,539,695"/><area shape="rect" id="node51" href="drone_8c.html#a657ad9692e768102eeb45847d8048925" title="prvZigbeeTimedout" alt="" coords="411,719,544,749"/><area shape="rect" id="node53" href="drone_8c.html#a40e1041de28ba7002b53a2ee4922519f" title="prvFltCmdTimedout" alt="" coords="409,773,545,802"/><area shape="rect" id="node55" href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4" title="prvSafeSetZigbeeData" alt="" coords="400,826,555,855"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_icgraph.png" border="0" usemap="#drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_icgraph" alt=""/></div>
<map name="drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_icgraph" id="drone_8c_a82a6ebf7a4c139c50e1a7e812c8cb6ff_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="176,5,227,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a40e1041de28ba7002b53a2ee4922519f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvFltCmdTimedout </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrZigbeeWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01669">1669</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;{</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment">/* Since last update */</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;portTickType ulTimeElapsed;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="comment">/* TODO : take into account systick overflow (probably not an issue for low</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">    SysTick frequency and short periods). */</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    ulTimeElapsed = xTaskGetTickCount() - pxCurrZigbeeWrapper-&gt;<a class="code" href="structdroneZigbeeWrapper.html#ae066aa8680e74f30361a1fa85b7ad8c3">xCmdUpdateTime</a>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordflow">return</span> ulTimeElapsed &gt; ( pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a8786c72c5ed95183db3099cd86cf2704">xZigbeeCmdTimeout</a> * pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a54d86f8a7e32623b47d892a21f7c4dd4">xZigbeeReceivePeriod</a> );</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;}</div>
<div class="ttc" id="structdroneZigbeeWrapper_html_ae066aa8680e74f30361a1fa85b7ad8c3"><div class="ttname"><a href="structdroneZigbeeWrapper.html#ae066aa8680e74f30361a1fa85b7ad8c3">droneZigbeeWrapper::xCmdUpdateTime</a></div><div class="ttdeci">portTickType xCmdUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00147">drone.c:147</a></div></div>
<div class="ttc" id="structdroneConfig_html_a54d86f8a7e32623b47d892a21f7c4dd4"><div class="ttname"><a href="structdroneConfig.html#a54d86f8a7e32623b47d892a21f7c4dd4">droneConfig::xZigbeeReceivePeriod</a></div><div class="ttdeci">portTickType xZigbeeReceivePeriod</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00032">drone.h:32</a></div></div>
<div class="ttc" id="structdroneConfig_html_a8786c72c5ed95183db3099cd86cf2704"><div class="ttname"><a href="structdroneConfig.html#a8786c72c5ed95183db3099cd86cf2704">droneConfig::xZigbeeCmdTimeout</a></div><div class="ttdeci">uint8_t xZigbeeCmdTimeout</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00039">drone.h:39</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a40e1041de28ba7002b53a2ee4922519f_icgraph.png" border="0" usemap="#drone_8c_a40e1041de28ba7002b53a2ee4922519f_icgraph" alt=""/></div>
<map name="drone_8c_a40e1041de28ba7002b53a2ee4922519f_icgraph" id="drone_8c_a40e1041de28ba7002b53a2ee4922519f_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="192,5,320,35"/><area shape="rect" id="node5" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="368,5,491,35"/><area shape="rect" id="node7" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="539,5,589,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a20dca1b3854cdf78a615e59568f885af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvGetBatteryLvl </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pulBatteryLvl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01791">1791</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;{</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;TODO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvGetBatteryData()&quot;</span>,</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            <span class="stringliteral">&quot;Does nothing ATM&quot;</span> );</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="comment">/* TODO : Implement it */</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;}</div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a20dca1b3854cdf78a615e59568f885af_cgraph.png" border="0" usemap="#drone_8c_a20dca1b3854cdf78a615e59568f885af_cgraph" alt=""/></div>
<map name="drone_8c_a20dca1b3854cdf78a615e59568f885af_cgraph" id="drone_8c_a20dca1b3854cdf78a615e59568f885af_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="175,5,268,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a20dca1b3854cdf78a615e59568f885af_icgraph.png" border="0" usemap="#drone_8c_a20dca1b3854cdf78a615e59568f885af_icgraph" alt=""/></div>
<map name="drone_8c_a20dca1b3854cdf78a615e59568f885af_icgraph" id="drone_8c_a20dca1b3854cdf78a615e59568f885af_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="173,5,344,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="392,5,443,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1653124f3df3818ea0ae53f80f871399"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvGPSReceiveTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01206">1206</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;{</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">/* Updated by each call to vTaskDelayUntil() */</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;portTickType xNextWakeTime = xTaskGetTickCount();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneGPSWrapper.html">droneGPSWrapper</a> xNewGPSWrapper;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneConfig.html">droneConfig</a> xCurrConfig;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneState.html">droneState</a> xCurrDroneState;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">while</span>( 1 )</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvGPSReceiveTask()&quot;</span>,</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                <span class="stringliteral">&quot;Woken up&quot;</span> );</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="comment">/* Receive data from GPS module */</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <a class="code" href="gps_8c.html#aaa3d2c0fda8bcf02ddafd59a372da8ac">vGPSGetData</a>( &amp;( xNewGPSWrapper.xGPSData ) );</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="comment">/* Update local copy of xDroneState */</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="gps_8c.html#adc5f7af9a7366aee60e4d949043bda6c">eGPSIsDataValid</a>( &amp;( xNewGPSWrapper.xGPSData ) ) )</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            <span class="comment">/* Update global GPS data */</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            <a class="code" href="drone_8c.html#a877358e4b568f286c9e983dacbe76b90">prvSafeSetGPSData</a>( &amp;( xNewGPSWrapper.xGPSData ) );</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="comment">/* Register measurement success */</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4">DRN_ERR_GPS_INVAL</a>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4">DRN_ERR_GPS_INVAL</a>;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="comment">/* Update global xDroneState */</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="comment">/* Update local copy of xDroneConfig */</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <a class="code" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a>( &amp;xCurrConfig );</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvGPSReceiveTask()&quot;</span>,</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                <span class="stringliteral">&quot;Delayed&quot;</span> );</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        vTaskDelayUntil( &amp;xNextWakeTime,</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                xCurrConfig.xGPSReceivePeriod );</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>, <span class="stringliteral">&quot;prvGPSReceiveTask()&quot;</span>,</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <span class="stringliteral">&quot;Got out of infinite loop !&quot;</span> );</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a877358e4b568f286c9e983dacbe76b90"><div class="ttname"><a href="drone_8c.html#a877358e4b568f286c9e983dacbe76b90">prvSafeSetGPSData</a></div><div class="ttdeci">static void prvSafeSetGPSData(const struct GPSData *const pxNewGPSData)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01409">drone.c:1409</a></div></div>
<div class="ttc" id="gps_8c_html_aaa3d2c0fda8bcf02ddafd59a372da8ac"><div class="ttname"><a href="gps_8c.html#aaa3d2c0fda8bcf02ddafd59a372da8ac">vGPSGetData</a></div><div class="ttdeci">void vGPSGetData(struct GPSData *pxGPSData)</div><div class="ttdef"><b>Definition:</b> <a href="gps_8c_source.html#l00026">gps.c:26</a></div></div>
<div class="ttc" id="drone_8c_html_aba79a8c759d64b5d1df90fe8028cdd18"><div class="ttname"><a href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a></div><div class="ttdeci">static void prvSafeSetDroneState(const struct droneState *const xNewDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01482">drone.c:1482</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="gps_8c_html_adc5f7af9a7366aee60e4d949043bda6c"><div class="ttname"><a href="gps_8c.html#adc5f7af9a7366aee60e4d949043bda6c">eGPSIsDataValid</a></div><div class="ttdeci">enum GPSErrorMask eGPSIsDataValid(const struct GPSData *const pxNewGPSData)</div><div class="ttdef"><b>Definition:</b> <a href="gps_8c_source.html#l00032">gps.c:32</a></div></div>
<div class="ttc" id="structdroneState_html"><div class="ttname"><a href="structdroneState.html">droneState</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00121">drone.c:121</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a816cf76d244f3951ede4e2f8fb204af4">DRN_ERR_GPS_INVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00099">drone.c:99</a></div></div>
<div class="ttc" id="drone_8c_html_a52ed89dea0bcfffadeca6535234ee8a6"><div class="ttname"><a href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a></div><div class="ttdeci">static void prvSafeGetDroneConfig(struct droneConfig *const pxNewConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01530">drone.c:1530</a></div></div>
<div class="ttc" id="structdroneConfig_html"><div class="ttname"><a href="structdroneConfig.html">droneConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00012">drone.h:12</a></div></div>
<div class="ttc" id="structdroneGPSWrapper_html"><div class="ttname"><a href="structdroneGPSWrapper.html">droneGPSWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00150">drone.c:150</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a1653124f3df3818ea0ae53f80f871399_cgraph.png" border="0" usemap="#drone_8c_a1653124f3df3818ea0ae53f80f871399_cgraph" alt=""/></div>
<map name="drone_8c_a1653124f3df3818ea0ae53f80f871399_cgraph" id="drone_8c_a1653124f3df3818ea0ae53f80f871399_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="412,61,505,90"/><area shape="rect" id="node5" href="gps_8c.html#aaa3d2c0fda8bcf02ddafd59a372da8ac" title="vGPSGetData" alt="" coords="228,34,335,63"/><area shape="rect" id="node8" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18" title="prvSafeSetDroneState" alt="" coords="205,87,357,117"/><area shape="rect" id="node11" href="gps_8c.html#adc5f7af9a7366aee60e4d949043bda6c" title="eGPSIsDataValid" alt="" coords="219,141,344,170"/><area shape="rect" id="node13" href="drone_8c.html#a877358e4b568f286c9e983dacbe76b90" title="prvSafeSetGPSData" alt="" coords="211,194,352,223"/><area shape="rect" id="node16" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6" title="prvSafeGetDroneConfig" alt="" coords="201,247,361,277"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a1653124f3df3818ea0ae53f80f871399_icgraph.png" border="0" usemap="#drone_8c_a1653124f3df3818ea0ae53f80f871399_icgraph" alt=""/></div>
<map name="drone_8c_a1653124f3df3818ea0ae53f80f871399_icgraph" id="drone_8c_a1653124f3df3818ea0ae53f80f871399_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="200,5,251,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac5e99e35d098018f72a95c59d4d6efb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvGPSTimedout </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrGPSWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01645">1645</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;{</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="comment">/* Since last update */</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;portTickType ulTimeElapsed;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">/* TODO : take into account systick overflow (probably not an issue for low</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment">    SysTick frequency and short periods). */</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    ulTimeElapsed = xTaskGetTickCount() - pxCurrGPSWrapper-&gt;<a class="code" href="structdroneGPSWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">return</span> ulTimeElapsed &gt; ( pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a53fb288aae8c5c84fe042ad8172f5783">xGPSTimeout</a> * pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a66049dab35ccebf5dc841d309d7117db">xGPSReceivePeriod</a> );</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;}</div>
<div class="ttc" id="structdroneConfig_html_a66049dab35ccebf5dc841d309d7117db"><div class="ttname"><a href="structdroneConfig.html#a66049dab35ccebf5dc841d309d7117db">droneConfig::xGPSReceivePeriod</a></div><div class="ttdeci">portTickType xGPSReceivePeriod</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00034">drone.h:34</a></div></div>
<div class="ttc" id="structdroneGPSWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneGPSWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneGPSWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00155">drone.c:155</a></div></div>
<div class="ttc" id="structdroneConfig_html_a53fb288aae8c5c84fe042ad8172f5783"><div class="ttname"><a href="structdroneConfig.html#a53fb288aae8c5c84fe042ad8172f5783">droneConfig::xGPSTimeout</a></div><div class="ttdeci">uint8_t xGPSTimeout</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00043">drone.h:43</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ac5e99e35d098018f72a95c59d4d6efb3_icgraph.png" border="0" usemap="#drone_8c_ac5e99e35d098018f72a95c59d4d6efb3_icgraph" alt=""/></div>
<map name="drone_8c_ac5e99e35d098018f72a95c59d4d6efb3_icgraph" id="drone_8c_ac5e99e35d098018f72a95c59d4d6efb3_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="176,5,304,35"/><area shape="rect" id="node5" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="352,5,475,35"/><area shape="rect" id="node7" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="523,5,573,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae749156ddeaadb095f1dab13cd3d4b0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvHandleTimouts </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrTelemeterWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrBatteryWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrIMUWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrGPSWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrZigbeeWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdroneState.html">droneState</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates <a class="el" href="structdroneState.html">droneState</a> global AND local variables based on timeouts for every peripheral. If xFlightCmd is outdated, reverts it stationary command </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01690">1690</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;{</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a94711ce6896840fdb3ab94d61d976ff8">prvTelemeterTimedout</a>( pxCurrTelemeterWrapper, pxCurrDroneConfig ) )</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a>;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <span class="comment">/* Select relevant error state */</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <a class="code" href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c">prvSelectErrorState</a>( pxCurrDroneState );</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        <span class="comment">/* Unregister error in case it was registered */</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a>;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    }</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#ab0b8e7c4d4d11484a45ec2552b5f996a">prvBatteryTimedout</a>( pxCurrBatteryWrapper, pxCurrDroneConfig ) )</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="comment">/* Select relevant error state */</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <a class="code" href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c">prvSelectErrorState</a>( pxCurrDroneState );</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="comment">/* Unregister error in case it was registered */</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a>;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a3ce3420491fa2834d600ad074cdfbc81">prvIMUTimedout</a>( pxCurrIMUWrapper, pxCurrDroneConfig ) )</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a>;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <span class="comment">/* Select relevant error state */</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        <a class="code" href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c">prvSelectErrorState</a>( pxCurrDroneState );</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="comment">/* Unregister error in case it was registered */</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    }</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#ac5e99e35d098018f72a95c59d4d6efb3">prvGPSTimedout</a>( pxCurrGPSWrapper, pxCurrDroneConfig ) )</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <span class="comment">/* No switching to an error state : this is a minor error */</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    }</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="comment">/* Unregister error in case it was registered */</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a>;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    }</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a657ad9692e768102eeb45847d8048925">prvZigbeeTimedout</a>( pxCurrZigbeeWrapper, pxCurrDroneConfig) )</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a>;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <span class="comment">/* Select relevant error state */</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <a class="code" href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c">prvSelectErrorState</a>( pxCurrDroneState );</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="comment">/* Unregister error in case it was registered */</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    }</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a40e1041de28ba7002b53a2ee4922519f">prvFltCmdTimedout</a>( pxCurrZigbeeWrapper, pxCurrDroneConfig) )</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    {</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c">DRN_ERR_CMD_TOUT</a>;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="comment">/* This is not a critical error : the movement ordered has not been</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment">        updated for a while, we just disable it to ensure the drone doesn&#39;t</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment">        get stuck with an outdated order, ie. we put it into stationary</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">        movement again. */</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        pxCurrZigbeeWrapper-&gt;<a class="code" href="structdroneZigbeeWrapper.html#ac2a9f504f2600f2d95b1588b0d6072d7">xFlightCmd</a> = <a class="code" href="drone_8c.html#af497c945c13c6caaf85fb54e895bb5db">xStationaryFlightCmd</a>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <a class="code" href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4">prvSafeSetZigbeeData</a>( &amp;( pxCurrZigbeeWrapper-&gt;<a class="code" href="structdroneZigbeeWrapper.html#ac2a9f504f2600f2d95b1588b0d6072d7">xFlightCmd</a> ) );</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="comment">/* Unregister error in case it was registered */</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        pxCurrDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c">DRN_ERR_CMD_TOUT</a>;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">/* Set the drone to the resulting state */</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( pxCurrDroneState );</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00107">drone.c:107</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00089">drone.c:89</a></div></div>
<div class="ttc" id="drone_8c_html_a94711ce6896840fdb3ab94d61d976ff8"><div class="ttname"><a href="drone_8c.html#a94711ce6896840fdb3ab94d61d976ff8">prvTelemeterTimedout</a></div><div class="ttdeci">static uint8_t prvTelemeterTimedout(const struct droneTelemeterWrapper *const pxCurrTelemeterWrapper, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01597">drone.c:1597</a></div></div>
<div class="ttc" id="drone_8c_html_a40e1041de28ba7002b53a2ee4922519f"><div class="ttname"><a href="drone_8c.html#a40e1041de28ba7002b53a2ee4922519f">prvFltCmdTimedout</a></div><div class="ttdeci">static uint8_t prvFltCmdTimedout(const struct droneZigbeeWrapper *const pxCurrZigbeeWrapper, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01669">drone.c:1669</a></div></div>
<div class="ttc" id="drone_8c_html_af497c945c13c6caaf85fb54e895bb5db"><div class="ttname"><a href="drone_8c.html#af497c945c13c6caaf85fb54e895bb5db">xStationaryFlightCmd</a></div><div class="ttdeci">struct flightCommand xStationaryFlightCmd</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00183">drone.c:183</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00103">drone.c:103</a></div></div>
<div class="ttc" id="drone_8c_html_aba79a8c759d64b5d1df90fe8028cdd18"><div class="ttname"><a href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a></div><div class="ttdeci">static void prvSafeSetDroneState(const struct droneState *const xNewDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01482">drone.c:1482</a></div></div>
<div class="ttc" id="drone_8c_html_ac5e99e35d098018f72a95c59d4d6efb3"><div class="ttname"><a href="drone_8c.html#ac5e99e35d098018f72a95c59d4d6efb3">prvGPSTimedout</a></div><div class="ttdeci">static uint8_t prvGPSTimedout(const struct droneGPSWrapper *const pxCurrGPSWrapper, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01645">drone.c:1645</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4048ab78d8443f714af4f6cf9f5a1c0c">DRN_ERR_CMD_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00101">drone.c:101</a></div></div>
<div class="ttc" id="drone_8c_html_a1cc2e07bf4ac9357c253fe77a21c47c4"><div class="ttname"><a href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4">prvSafeSetZigbeeData</a></div><div class="ttdeci">static void prvSafeSetZigbeeData(const struct flightCommand *const pxNewFltCmd)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01424">drone.c:1424</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00097">drone.c:97</a></div></div>
<div class="ttc" id="drone_8c_html_a3ce3420491fa2834d600ad074cdfbc81"><div class="ttname"><a href="drone_8c.html#a3ce3420491fa2834d600ad074cdfbc81">prvIMUTimedout</a></div><div class="ttdeci">static uint8_t prvIMUTimedout(const struct droneIMUWrapper *const pxCurrIMUWrapper, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01633">drone.c:1633</a></div></div>
<div class="ttc" id="structdroneState_html_a79b353e05acdbce9cd51016fbc3eb61d"><div class="ttname"><a href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">droneState::eErrorMask</a></div><div class="ttdeci">enum droneError eErrorMask</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00126">drone.c:126</a></div></div>
<div class="ttc" id="drone_8c_html_ab0b8e7c4d4d11484a45ec2552b5f996a"><div class="ttname"><a href="drone_8c.html#ab0b8e7c4d4d11484a45ec2552b5f996a">prvBatteryTimedout</a></div><div class="ttdeci">static uint8_t prvBatteryTimedout(const struct droneBatteryWrapper *const pxCurrBatteryWrapper, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01621">drone.c:1621</a></div></div>
<div class="ttc" id="drone_8c_html_af8aba28838d473eae5660936d6f2f71c"><div class="ttname"><a href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c">prvSelectErrorState</a></div><div class="ttdeci">static void prvSelectErrorState(struct droneState *const pxCurrState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01373">drone.c:1373</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00093">drone.c:93</a></div></div>
<div class="ttc" id="drone_8c_html_a657ad9692e768102eeb45847d8048925"><div class="ttname"><a href="drone_8c.html#a657ad9692e768102eeb45847d8048925">prvZigbeeTimedout</a></div><div class="ttdeci">static uint8_t prvZigbeeTimedout(const struct droneZigbeeWrapper *const pxCurrZigbeeWrapper, const struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01657">drone.c:1657</a></div></div>
<div class="ttc" id="structdroneZigbeeWrapper_html_ac2a9f504f2600f2d95b1588b0d6072d7"><div class="ttname"><a href="structdroneZigbeeWrapper.html#ac2a9f504f2600f2d95b1588b0d6072d7">droneZigbeeWrapper::xFlightCmd</a></div><div class="ttdeci">struct flightCommand xFlightCmd</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00141">drone.c:141</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_cgraph.png" border="0" usemap="#drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_cgraph" alt=""/></div>
<map name="drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_cgraph" id="drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_cgraph">
<area shape="rect" id="node3" href="drone_8c.html#a94711ce6896840fdb3ab94d61d976ff8" title="prvTelemeterTimedout" alt="" coords="183,5,335,35"/><area shape="rect" id="node5" href="drone_8c.html#af8aba28838d473eae5660936d6f2f71c" title="prvSelectErrorState" alt="" coords="191,59,327,88"/><area shape="rect" id="node7" href="drone_8c.html#ab0b8e7c4d4d11484a45ec2552b5f996a" title="prvBatteryTimedout" alt="" coords="191,112,327,141"/><area shape="rect" id="node9" href="drone_8c.html#a3ce3420491fa2834d600ad074cdfbc81" title="prvIMUTimedout" alt="" coords="200,165,317,195"/><area shape="rect" id="node11" href="drone_8c.html#ac5e99e35d098018f72a95c59d4d6efb3" title="prvGPSTimedout" alt="" coords="197,219,320,248"/><area shape="rect" id="node13" href="drone_8c.html#a657ad9692e768102eeb45847d8048925" title="prvZigbeeTimedout" alt="" coords="192,272,325,301"/><area shape="rect" id="node15" href="drone_8c.html#a40e1041de28ba7002b53a2ee4922519f" title="prvFltCmdTimedout" alt="" coords="191,325,327,355"/><area shape="rect" id="node17" href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4" title="prvSafeSetZigbeeData" alt="" coords="181,379,336,408"/><area shape="rect" id="node21" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18" title="prvSafeSetDroneState" alt="" coords="183,432,335,461"/><area shape="rect" id="node19" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="385,405,479,435"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_icgraph.png" border="0" usemap="#drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_icgraph" alt=""/></div>
<map name="drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_icgraph" id="drone_8c_ae749156ddeaadb095f1dab13cd3d4b0d_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="181,5,304,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="352,5,403,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ce3420491fa2834d600ad074cdfbc81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvIMUTimedout </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrIMUWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01633">1633</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;{</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment">/* Since last update */</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;portTickType ulTimeElapsed;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="comment">/* TODO : take into account systick overflow (probably not an issue for low</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">    SysTick frequency and short periods). */</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    ulTimeElapsed = xTaskGetTickCount() - pxCurrIMUWrapper-&gt;<a class="code" href="structdroneIMUWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">return</span> ulTimeElapsed &gt; ( pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#afe7b2980dbf6ea1eda1e56027855e6cd">xIMUDataTimeout</a> * pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a7fd465deb1ae5377793be738ed1f2442">xFlightCtrlPeriod</a> );</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;}</div>
<div class="ttc" id="structdroneConfig_html_a7fd465deb1ae5377793be738ed1f2442"><div class="ttname"><a href="structdroneConfig.html#a7fd465deb1ae5377793be738ed1f2442">droneConfig::xFlightCtrlPeriod</a></div><div class="ttdeci">portTickType xFlightCtrlPeriod</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00033">drone.h:33</a></div></div>
<div class="ttc" id="structdroneIMUWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneIMUWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneIMUWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00135">drone.c:135</a></div></div>
<div class="ttc" id="structdroneConfig_html_afe7b2980dbf6ea1eda1e56027855e6cd"><div class="ttname"><a href="structdroneConfig.html#afe7b2980dbf6ea1eda1e56027855e6cd">droneConfig::xIMUDataTimeout</a></div><div class="ttdeci">uint8_t xIMUDataTimeout</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00038">drone.h:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a3ce3420491fa2834d600ad074cdfbc81_icgraph.png" border="0" usemap="#drone_8c_a3ce3420491fa2834d600ad074cdfbc81_icgraph" alt=""/></div>
<map name="drone_8c_a3ce3420491fa2834d600ad074cdfbc81_icgraph" id="drone_8c_a3ce3420491fa2834d600ad074cdfbc81_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="173,5,301,35"/><area shape="rect" id="node5" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="349,5,472,35"/><area shape="rect" id="node7" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="520,5,571,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a55b04c7311a05ab6768750b627eaa78a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvInitAltitude </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrIMUWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes the reference altitude in drone configuration, called at takeoff. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01784">1784</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;{</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a25f562330617f82cc04744cf17c797da">ulRefAltitude</a> = pxCurrIMUWrapper-&gt;<a class="code" href="structdroneIMUWrapper.html#a24e5ed93f14ddc03e745ce6d708b7423">xIMUData</a>.<a class="code" href="structIMUData.html#a3dbdb2be3068f998ad0b0ff721ceb258">lAltitude</a>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <a class="code" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig</a>( pxCurrDroneConfig );</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;}</div>
<div class="ttc" id="structIMUData_html_a3dbdb2be3068f998ad0b0ff721ceb258"><div class="ttname"><a href="structIMUData.html#a3dbdb2be3068f998ad0b0ff721ceb258">IMUData::lAltitude</a></div><div class="ttdeci">int32_t lAltitude</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00049">imu.h:49</a></div></div>
<div class="ttc" id="structdroneConfig_html_a25f562330617f82cc04744cf17c797da"><div class="ttname"><a href="structdroneConfig.html#a25f562330617f82cc04744cf17c797da">droneConfig::ulRefAltitude</a></div><div class="ttdeci">uint32_t ulRefAltitude</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00022">drone.h:22</a></div></div>
<div class="ttc" id="drone_8c_html_a7b501b8fd615ad95fb6d32f4bbadd9e6"><div class="ttname"><a href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig</a></div><div class="ttdeci">static void prvSafeSetDroneConfig(const struct droneConfig *const pxNewDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01454">drone.c:1454</a></div></div>
<div class="ttc" id="structdroneIMUWrapper_html_a24e5ed93f14ddc03e745ce6d708b7423"><div class="ttname"><a href="structdroneIMUWrapper.html#a24e5ed93f14ddc03e745ce6d708b7423">droneIMUWrapper::xIMUData</a></div><div class="ttdeci">struct IMUData xIMUData</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00133">drone.c:133</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a55b04c7311a05ab6768750b627eaa78a_cgraph.png" border="0" usemap="#drone_8c_a55b04c7311a05ab6768750b627eaa78a_cgraph" alt=""/></div>
<map name="drone_8c_a55b04c7311a05ab6768750b627eaa78a_cgraph" id="drone_8c_a55b04c7311a05ab6768750b627eaa78a_cgraph">
<area shape="rect" id="node3" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6" title="prvSafeSetDroneConfig" alt="" coords="157,5,317,35"/><area shape="rect" id="node5" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="367,5,460,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a55b04c7311a05ab6768750b627eaa78a_icgraph.png" border="0" usemap="#drone_8c_a55b04c7311a05ab6768750b627eaa78a_icgraph" alt=""/></div>
<map name="drone_8c_a55b04c7311a05ab6768750b627eaa78a_icgraph" id="drone_8c_a55b04c7311a05ab6768750b627eaa78a_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="159,5,313,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="363,5,413,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0724fb0f205cdcd54445b0bbb246dd44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvInitDroneConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the drone configuration and state </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01280">1280</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;{</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="comment">/* Initialization of base-configurable parameters */</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a> = <a class="code" href="drone_8c.html#a22f98659c296fba68aad49993f676bb7">xDfltDroneConfig</a>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">/* Drone state initialization */</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a> = <a class="code" href="drone_8c.html#a743e8352cd525db816aac0c78c0b5029">xInitDroneState</a>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a3283bf4f08e89f5b0eb8d610720bb09b"><div class="ttname"><a href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a></div><div class="ttdeci">static struct droneConfig xDroneConfig</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00245">drone.c:245</a></div></div>
<div class="ttc" id="drone_8c_html_a22f98659c296fba68aad49993f676bb7"><div class="ttname"><a href="drone_8c.html#a22f98659c296fba68aad49993f676bb7">xDfltDroneConfig</a></div><div class="ttdeci">const struct droneConfig xDfltDroneConfig</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00186">drone.c:186</a></div></div>
<div class="ttc" id="drone_8c_html_a743e8352cd525db816aac0c78c0b5029"><div class="ttname"><a href="drone_8c.html#a743e8352cd525db816aac0c78c0b5029">xInitDroneState</a></div><div class="ttdeci">const struct droneState xInitDroneState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00211">drone.c:211</a></div></div>
<div class="ttc" id="drone_8c_html_a6b9ccec43699282550b9e25ee80bf2c8"><div class="ttname"><a href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a></div><div class="ttdeci">struct droneState xDroneState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00248">drone.c:248</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a0724fb0f205cdcd54445b0bbb246dd44_icgraph.png" border="0" usemap="#drone_8c_a0724fb0f205cdcd54445b0bbb246dd44_icgraph" alt=""/></div>
<map name="drone_8c_a0724fb0f205cdcd54445b0bbb246dd44_icgraph" id="drone_8c_a0724fb0f205cdcd54445b0bbb246dd44_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="184,5,235,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa93cacd884464cad591e6bb9bc161bcd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352">droneError</a> prvInitTestPeriph </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Executes the PBITs (power-on built-in tests) and returns a code to identify the failed tests, or 0 if no test failed. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01303">1303</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;{</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="keyword">enum</span> <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352">droneError</a> <a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> = <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">/* Taking the most serious error codes to ensure the drone doesn&#39;t ignore</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">    them. */</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="gps_8c.html#afaa59ead95954d284cef53931b8a9b39">ucGPSInitTest</a>() )</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="imu_8c.html#a585f070e778f42d47703fb0b2b3402a4">ucIMUInitTest</a>() )</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="zigbee_8c.html#a3b7d284c2e4806df0c9b676ded44670b">ucZigbeeInitTest</a>() )</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="telemeter_8c.html#a0a690aa29f9fb858829e2f23df838068">ucTelemeterInitTest</a>() )</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a>;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="drone_8c.html#a2157f133b73a40a4e5f788ec29e842e5">ucBatteryInitTest</a>() )</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a>;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a22848fed5eebff66eaeb5e262435ce77">DRN_ERR_RX_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00107">drone.c:107</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a6490e84f47f8baed82eb8ec0c3635ee5">DRN_ERR_TLM_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00089">drone.c:89</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ac6ac67da7d10405e907c3672d84b9186">DRN_ERR_BATT_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00103">drone.c:103</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352">droneError</a></div><div class="ttdeci">droneError</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00084">drone.c:84</a></div></div>
<div class="ttc" id="gps_8c_html_afaa59ead95954d284cef53931b8a9b39"><div class="ttname"><a href="gps_8c.html#afaa59ead95954d284cef53931b8a9b39">ucGPSInitTest</a></div><div class="ttdeci">uint8_t ucGPSInitTest(void)</div><div class="ttdef"><b>Definition:</b> <a href="gps_8c_source.html#l00010">gps.c:10</a></div></div>
<div class="ttc" id="drone_8c_html_a2157f133b73a40a4e5f788ec29e842e5"><div class="ttname"><a href="drone_8c.html#a2157f133b73a40a4e5f788ec29e842e5">ucBatteryInitTest</a></div><div class="ttdeci">static uint8_t ucBatteryInitTest(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01681">drone.c:1681</a></div></div>
<div class="ttc" id="imu_8c_html_a585f070e778f42d47703fb0b2b3402a4"><div class="ttname"><a href="imu_8c.html#a585f070e778f42d47703fb0b2b3402a4">ucIMUInitTest</a></div><div class="ttdeci">uint8_t ucIMUInitTest(void)</div><div class="ttdef"><b>Definition:</b> <a href="imu_8c_source.html#l00027">imu.c:27</a></div></div>
<div class="ttc" id="telemeter_8c_html_a0a690aa29f9fb858829e2f23df838068"><div class="ttname"><a href="telemeter_8c.html#a0a690aa29f9fb858829e2f23df838068">ucTelemeterInitTest</a></div><div class="ttdeci">uint8_t ucTelemeterInitTest(void)</div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8c_source.html#l00036">telemeter.c:36</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352af0e3bb3a5358ffbf2efad0dbb7f6e45a">DRN_ERR_GPS_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00097">drone.c:97</a></div></div>
<div class="ttc" id="structdroneState_html_a79b353e05acdbce9cd51016fbc3eb61d"><div class="ttname"><a href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">droneState::eErrorMask</a></div><div class="ttdeci">enum droneError eErrorMask</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00126">drone.c:126</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00087">drone.c:87</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a795b43a2f0a142565346125d00a27d60">DRN_ERR_IMU_TOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00093">drone.c:93</a></div></div>
<div class="ttc" id="zigbee_8c_html_a3b7d284c2e4806df0c9b676ded44670b"><div class="ttname"><a href="zigbee_8c.html#a3b7d284c2e4806df0c9b676ded44670b">ucZigbeeInitTest</a></div><div class="ttdeci">uint8_t ucZigbeeInitTest(void)</div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8c_source.html#l00010">zigbee.c:10</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_aa93cacd884464cad591e6bb9bc161bcd_cgraph.png" border="0" usemap="#drone_8c_aa93cacd884464cad591e6bb9bc161bcd_cgraph" alt=""/></div>
<map name="drone_8c_aa93cacd884464cad591e6bb9bc161bcd_cgraph" id="drone_8c_aa93cacd884464cad591e6bb9bc161bcd_cgraph">
<area shape="rect" id="node3" href="gps_8c.html#afaa59ead95954d284cef53931b8a9b39" title="ucGPSInitTest" alt="" coords="192,5,299,35"/><area shape="rect" id="node7" href="imu_8c.html#a585f070e778f42d47703fb0b2b3402a4" title="ucIMUInitTest" alt="" coords="193,59,297,88"/><area shape="rect" id="node10" href="zigbee_8c.html#a3b7d284c2e4806df0c9b676ded44670b" title="ucZigbeeInitTest" alt="" coords="187,112,304,141"/><area shape="rect" id="node13" href="telemeter_8c.html#a0a690aa29f9fb858829e2f23df838068" title="ucTelemeterInitTest" alt="" coords="176,165,315,195"/><area shape="rect" id="node16" href="drone_8c.html#a2157f133b73a40a4e5f788ec29e842e5" title="ucBatteryInitTest" alt="" coords="184,219,307,248"/><area shape="rect" id="node5" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="364,112,457,141"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_aa93cacd884464cad591e6bb9bc161bcd_icgraph.png" border="0" usemap="#drone_8c_aa93cacd884464cad591e6bb9bc161bcd_icgraph" alt=""/></div>
<map name="drone_8c_aa93cacd884464cad591e6bb9bc161bcd_icgraph" id="drone_8c_aa93cacd884464cad591e6bb9bc161bcd_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="176,5,227,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1ecc8f8fb6e88e193c25cff0bfc9250"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvLandingDone </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structIMUData.html">IMUData</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrIMUData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns 0 if the drone has landed, !0 otherwise </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01580">1580</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;{</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="comment">/* TODO */</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;TODO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvLandingDone()&quot;</span>,</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            <span class="stringliteral">&quot;Does nothing ATM&quot;</span> );</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;}</div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_cgraph.png" border="0" usemap="#drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_cgraph" alt=""/></div>
<map name="drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_cgraph" id="drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="172,5,265,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_icgraph.png" border="0" usemap="#drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_icgraph" alt=""/></div>
<map name="drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_icgraph" id="drone_8c_af1ecc8f8fb6e88e193c25cff0bfc9250_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="171,5,293,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="341,5,392,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8675332e0b2080876b3a17ee1bcd17a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvObstacleDetected </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrTelemeterWrapper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns 0 if no obstacle has been detected. Checks whether xTelemeterData.eIdMask is TLM_NONE </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01592">1592</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;{</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">return</span> ( pxCurrTelemeterWrapper-&gt;<a class="code" href="structdroneTelemeterWrapper.html#acde4f0df38902e736eea06c729fc136c">xTelemeterData</a>.<a class="code" href="structtelemeterData.html#ac62f49ce827df12b96ea829b42672133">eIdMask</a> != <a class="code" href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a633464c2bc1c60bd686204417a306d3c">TLM_NONE</a> );</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}</div>
<div class="ttc" id="structdroneTelemeterWrapper_html_acde4f0df38902e736eea06c729fc136c"><div class="ttname"><a href="structdroneTelemeterWrapper.html#acde4f0df38902e736eea06c729fc136c">droneTelemeterWrapper::xTelemeterData</a></div><div class="ttdeci">struct telemeterData xTelemeterData</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00163">drone.c:163</a></div></div>
<div class="ttc" id="structtelemeterData_html_ac62f49ce827df12b96ea829b42672133"><div class="ttname"><a href="structtelemeterData.html#ac62f49ce827df12b96ea829b42672133">telemeterData::eIdMask</a></div><div class="ttdeci">enum telemeterId eIdMask</div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00040">telemeter.h:40</a></div></div>
<div class="ttc" id="telemeter_8h_html_a13b536fea421757f620d1086d9313d98a633464c2bc1c60bd686204417a306d3c"><div class="ttname"><a href="telemeter_8h.html#a13b536fea421757f620d1086d9313d98a633464c2bc1c60bd686204417a306d3c">TLM_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="telemeter_8h_source.html#l00010">telemeter.h:10</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a8675332e0b2080876b3a17ee1bcd17a3_icgraph.png" border="0" usemap="#drone_8c_a8675332e0b2080876b3a17ee1bcd17a3_icgraph" alt=""/></div>
<map name="drone_8c_a8675332e0b2080876b3a17ee1bcd17a3_icgraph" id="drone_8c_a8675332e0b2080876b3a17ee1bcd17a3_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="200,5,323,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="371,5,421,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1a48012129930abc6fec3f10590867f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvReboot </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reboot the MCU. DO NOT DO THIS WHILE FLYING ! </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01811">1811</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;{</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    NVIC_SystemReset();</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a1a48012129930abc6fec3f10590867f4_icgraph.png" border="0" usemap="#drone_8c_a1a48012129930abc6fec3f10590867f4_icgraph" alt=""/></div>
<map name="drone_8c_a1a48012129930abc6fec3f10590867f4_icgraph" id="drone_8c_a1a48012129930abc6fec3f10590867f4_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="136,5,187,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a31c6c01d7b7a525778a42d5d9d5ad22c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvResetDroneConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Resets the global drone configuration </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01366">1366</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;{</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig</a>( &amp;<a class="code" href="drone_8c.html#a22f98659c296fba68aad49993f676bb7">xDfltDroneConfig</a> );</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a22f98659c296fba68aad49993f676bb7"><div class="ttname"><a href="drone_8c.html#a22f98659c296fba68aad49993f676bb7">xDfltDroneConfig</a></div><div class="ttdeci">const struct droneConfig xDfltDroneConfig</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00186">drone.c:186</a></div></div>
<div class="ttc" id="drone_8c_html_a7b501b8fd615ad95fb6d32f4bbadd9e6"><div class="ttname"><a href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig</a></div><div class="ttdeci">static void prvSafeSetDroneConfig(const struct droneConfig *const pxNewDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01454">drone.c:1454</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_cgraph.png" border="0" usemap="#drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_cgraph" alt=""/></div>
<map name="drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_cgraph" id="drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_cgraph">
<area shape="rect" id="node3" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6" title="prvSafeSetDroneConfig" alt="" coords="203,5,363,35"/><area shape="rect" id="node5" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="412,5,505,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_icgraph.png" border="0" usemap="#drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_icgraph" alt=""/></div>
<map name="drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_icgraph" id="drone_8c_a31c6c01d7b7a525778a42d5d9d5ad22c_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="204,5,359,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="408,5,459,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c264049cf21d075ca999e8baed2b722"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeGetBatteryData </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxNewBattWrapper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from xBatteryWrapper global variable to plNewBatteryLvl buffer. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01521">1521</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;{</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    *pxNewBattWrapper = <a class="code" href="drone_8c.html#adcd6991a017520b9200602c2118bde5e">xBatteryWrapper</a>;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_adcd6991a017520b9200602c2118bde5e"><div class="ttname"><a href="drone_8c.html#adcd6991a017520b9200602c2118bde5e">xBatteryWrapper</a></div><div class="ttdeci">static struct droneBatteryWrapper xBatteryWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00241">drone.c:241</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a1c264049cf21d075ca999e8baed2b722_icgraph.png" border="0" usemap="#drone_8c_a1c264049cf21d075ca999e8baed2b722_icgraph" alt=""/></div>
<map name="drone_8c_a1c264049cf21d075ca999e8baed2b722_icgraph" id="drone_8c_a1c264049cf21d075ca999e8baed2b722_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="237,5,360,35"/><area shape="rect" id="node7" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="213,59,384,88"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="432,32,483,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a52ed89dea0bcfffadeca6535234ee8a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeGetDroneConfig </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxNewConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from xDroneConfig global variable to pxNewDroneConfig buffer. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01530">1530</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;{</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    *pxNewConfig = <a class="code" href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a>;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a3283bf4f08e89f5b0eb8d610720bb09b"><div class="ttname"><a href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a></div><div class="ttdeci">static struct droneConfig xDroneConfig</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00245">drone.c:245</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a52ed89dea0bcfffadeca6535234ee8a6_icgraph.png" border="0" usemap="#drone_8c_a52ed89dea0bcfffadeca6535234ee8a6_icgraph" alt=""/></div>
<map name="drone_8c_a52ed89dea0bcfffadeca6535234ee8a6_icgraph" id="drone_8c_a52ed89dea0bcfffadeca6535234ee8a6_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848" title="prvDetectObstacleTask" alt="" coords="221,5,381,35"/><area shape="rect" id="node7" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="240,59,363,88"/><area shape="rect" id="node10" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="224,112,379,141"/><area shape="rect" id="node13" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="216,165,387,195"/><area shape="rect" id="node16" href="drone_8c.html#a1653124f3df3818ea0ae53f80f871399" title="prvGPSReceiveTask" alt="" coords="229,219,373,248"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="435,112,485,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a95e9ad134d650153cb01a06003aeb343"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeGetDroneState </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneState.html">droneState</a> *const&#160;</td>
          <td class="paramname"><em>pxNewState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies the eDroneState global variable to peNewFltState. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01547">1547</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;{</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    *pxNewState = <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a6b9ccec43699282550b9e25ee80bf2c8"><div class="ttname"><a href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a></div><div class="ttdeci">struct droneState xDroneState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00248">drone.c:248</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a95e9ad134d650153cb01a06003aeb343_icgraph.png" border="0" usemap="#drone_8c_a95e9ad134d650153cb01a06003aeb343_icgraph" alt=""/></div>
<map name="drone_8c_a95e9ad134d650153cb01a06003aeb343_icgraph" id="drone_8c_a95e9ad134d650153cb01a06003aeb343_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848" title="prvDetectObstacleTask" alt="" coords="213,5,373,35"/><area shape="rect" id="node7" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="232,59,355,88"/><area shape="rect" id="node10" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="216,112,371,141"/><area shape="rect" id="node13" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="208,165,379,195"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="427,85,477,115"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad2163c1693d3186f6bf764a939764c90"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeGetGPSData </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxNewGPSWrapper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from xGPSWrapper global variable to pxNewGPSData buffer . </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01503">1503</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;{</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    *pxNewGPSWrapper = <a class="code" href="drone_8c.html#a95131cdfae1cf00f4e600b7a53952e12">xGPSWrapper</a>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a95131cdfae1cf00f4e600b7a53952e12"><div class="ttname"><a href="drone_8c.html#a95131cdfae1cf00f4e600b7a53952e12">xGPSWrapper</a></div><div class="ttdeci">static struct droneGPSWrapper xGPSWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00234">drone.c:234</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ad2163c1693d3186f6bf764a939764c90_icgraph.png" border="0" usemap="#drone_8c_ad2163c1693d3186f6bf764a939764c90_icgraph" alt=""/></div>
<map name="drone_8c_ad2163c1693d3186f6bf764a939764c90_icgraph" id="drone_8c_ad2163c1693d3186f6bf764a939764c90_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="197,5,320,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="368,5,419,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7108c3d763912fb80781465b0b15f0a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeGetIMUData </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxNewIMUWrapper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thread-safe global variable read routines</p>
<p>Safely copies from xIMUWrapper global variable to pxNewIMUData buffer. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01495">1495</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;{</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    *pxNewIMUWrapper = <a class="code" href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a171f507970d5344c145f142f325600f9"><div class="ttname"><a href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a></div><div class="ttdeci">static struct droneIMUWrapper xIMUWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00239">drone.c:239</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a7108c3d763912fb80781465b0b15f0a7_icgraph.png" border="0" usemap="#drone_8c_a7108c3d763912fb80781465b0b15f0a7_icgraph" alt=""/></div>
<map name="drone_8c_a7108c3d763912fb80781465b0b15f0a7_icgraph" id="drone_8c_a7108c3d763912fb80781465b0b15f0a7_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="212,5,335,35"/><area shape="rect" id="node7" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="196,59,351,88"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="400,32,451,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7cf7884f575110d3c64162edc8e1fa95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeGetTelemeterData </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxNewTlmWrapper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from xTelemeterWrapper global variable to pxNewTelemeterData buffer. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01539">1539</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;{</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    *pxNewTlmWrapper = <a class="code" href="drone_8c.html#ad2b82954258dd1d9c8da2cfd29600dc1">xTelemeterWrapper</a>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_ad2b82954258dd1d9c8da2cfd29600dc1"><div class="ttname"><a href="drone_8c.html#ad2b82954258dd1d9c8da2cfd29600dc1">xTelemeterWrapper</a></div><div class="ttdeci">static struct droneTelemeterWrapper xTelemeterWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00243">drone.c:243</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a7cf7884f575110d3c64162edc8e1fa95_icgraph.png" border="0" usemap="#drone_8c_a7cf7884f575110d3c64162edc8e1fa95_icgraph" alt=""/></div>
<map name="drone_8c_a7cf7884f575110d3c64162edc8e1fa95_icgraph" id="drone_8c_a7cf7884f575110d3c64162edc8e1fa95_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="229,5,352,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="400,5,451,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a02c9abf2df2882099febd3a5329e94ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeGetZigbeeData </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxNewZigbeeWrapper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from xZigbeeWrapper global variable to pxNewZigbeeData buffer. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01512">1512</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;{</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    *pxNewZigbeeWrapper = <a class="code" href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a>;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a0745b90bb718aa3f4a7b68c9c18aa60f"><div class="ttname"><a href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a></div><div class="ttdeci">static struct droneZigbeeWrapper xZigbeeWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00237">drone.c:237</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a02c9abf2df2882099febd3a5329e94ad_icgraph.png" border="0" usemap="#drone_8c_a02c9abf2df2882099febd3a5329e94ad_icgraph" alt=""/></div>
<map name="drone_8c_a02c9abf2df2882099febd3a5329e94ad_icgraph" id="drone_8c_a02c9abf2df2882099febd3a5329e94ad_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="208,5,331,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="379,5,429,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a60082ba0309194b6c32f3c0385e135f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeSetBatteryData </td>
          <td>(</td>
          <td class="paramtype">const uint32_t *const&#160;</td>
          <td class="paramname"><em>pulNewBatteryLvl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from plNewBatteryLvl buffer to xBatteryWrapper global variable and updates its xBatteryUpdateTime field. Doesn't check parameter consistency (every field must be defined). </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01440">1440</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;{</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="drone_8c.html#adcd6991a017520b9200602c2118bde5e">xBatteryWrapper</a>.<a class="code" href="structdroneBatteryWrapper.html#ace99ab7d1b237062343841952bc4b011">ulPowerLvl</a> = *pulNewBatteryLvl;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="drone_8c.html#adcd6991a017520b9200602c2118bde5e">xBatteryWrapper</a>.<a class="code" href="structdroneBatteryWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a> = xTaskGetTickCount();</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvSafeSetBatteryData()&quot;</span>,</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            <span class="stringliteral">&quot;ulPowerLvl updated&quot;</span> );</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_adcd6991a017520b9200602c2118bde5e"><div class="ttname"><a href="drone_8c.html#adcd6991a017520b9200602c2118bde5e">xBatteryWrapper</a></div><div class="ttdeci">static struct droneBatteryWrapper xBatteryWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00241">drone.c:241</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="structdroneBatteryWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneBatteryWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneBatteryWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00172">drone.c:172</a></div></div>
<div class="ttc" id="structdroneBatteryWrapper_html_ace99ab7d1b237062343841952bc4b011"><div class="ttname"><a href="structdroneBatteryWrapper.html#ace99ab7d1b237062343841952bc4b011">droneBatteryWrapper::ulPowerLvl</a></div><div class="ttdeci">uint32_t ulPowerLvl</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00170">drone.c:170</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a60082ba0309194b6c32f3c0385e135f3_cgraph.png" border="0" usemap="#drone_8c_a60082ba0309194b6c32f3c0385e135f3_cgraph" alt=""/></div>
<map name="drone_8c_a60082ba0309194b6c32f3c0385e135f3_cgraph" id="drone_8c_a60082ba0309194b6c32f3c0385e135f3_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="212,5,305,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a60082ba0309194b6c32f3c0385e135f3_icgraph.png" border="0" usemap="#drone_8c_a60082ba0309194b6c32f3c0385e135f3_icgraph" alt=""/></div>
<map name="drone_8c_a60082ba0309194b6c32f3c0385e135f3_icgraph" id="drone_8c_a60082ba0309194b6c32f3c0385e135f3_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="211,5,381,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="429,5,480,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b501b8fd615ad95fb6d32f4bbadd9e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeSetDroneConfig </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxNewDroneConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from pxNewDroneConfig buffer to xDroneConfig global variable. Doesn't check parameter consistency (every field must be defined). </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01454">1454</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;{</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a> = *pxNewDroneConfig;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvSafeSetDroneConfig()&quot;</span>,</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <span class="stringliteral">&quot;xDroneConfig updated&quot;</span> );</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a3283bf4f08e89f5b0eb8d610720bb09b"><div class="ttname"><a href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a></div><div class="ttdeci">static struct droneConfig xDroneConfig</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00245">drone.c:245</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_cgraph.png" border="0" usemap="#drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_cgraph" alt=""/></div>
<map name="drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_cgraph" id="drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="215,5,308,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_icgraph.png" border="0" usemap="#drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_icgraph" alt=""/></div>
<map name="drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_icgraph" id="drone_8c_a7b501b8fd615ad95fb6d32f4bbadd9e6_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="412,22,567,52"/><area shape="rect" id="node7" href="drone_8c.html#a31c6c01d7b7a525778a42d5d9d5ad22c" title="prvResetDroneConfig" alt="" coords="215,22,361,52"/><area shape="rect" id="node10" href="drone_8c.html#a55b04c7311a05ab6768750b627eaa78a" title="prvInitAltitude" alt="" coords="237,76,339,105"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="616,22,667,52"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aba79a8c759d64b5d1df90fe8028cdd18"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeSetDroneState </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneState.html">droneState</a> *const&#160;</td>
          <td class="paramname"><em>pxNewDroneState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies eNewDroneState to the xDroneState global variable. Updates eErrorMask by overwriting it </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01482">1482</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;{</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = pxNewDroneState-&gt;<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a>;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <a class="code" href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a>.<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a> = pxNewDroneState-&gt;<a class="code" href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">eErrorMask</a>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvSafeSetDroneState()&quot;</span>,</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            <span class="stringliteral">&quot;xDroneState updated&quot;</span> );</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div>
<div class="ttc" id="structdroneState_html_a6bac61f96c145cf395b2a4fb359be46b"><div class="ttname"><a href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">droneState::eFltState</a></div><div class="ttdeci">enum droneFltState eFltState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00124">drone.c:124</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="drone_8c_html_a6b9ccec43699282550b9e25ee80bf2c8"><div class="ttname"><a href="drone_8c.html#a6b9ccec43699282550b9e25ee80bf2c8">xDroneState</a></div><div class="ttdeci">struct droneState xDroneState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00248">drone.c:248</a></div></div>
<div class="ttc" id="structdroneState_html_a79b353e05acdbce9cd51016fbc3eb61d"><div class="ttname"><a href="structdroneState.html#a79b353e05acdbce9cd51016fbc3eb61d">droneState::eErrorMask</a></div><div class="ttdeci">enum droneError eErrorMask</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00126">drone.c:126</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_cgraph.png" border="0" usemap="#drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_cgraph" alt=""/></div>
<map name="drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_cgraph" id="drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="209,5,303,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_icgraph.png" border="0" usemap="#drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_icgraph" alt=""/></div>
<map name="drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_icgraph" id="drone_8c_aba79a8c759d64b5d1df90fe8028cdd18_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848" title="prvDetectObstacleTask" alt="" coords="427,5,587,35"/><area shape="rect" id="node7" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="445,83,568,112"/><area shape="rect" id="node10" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="429,136,584,165"/><area shape="rect" id="node13" href="drone_8c.html#abbdcc9b7762286ffa0216c945cb83a42" title="prvBatteryMonitoringTask" alt="" coords="208,188,379,217"/><area shape="rect" id="node16" href="drone_8c.html#a1653124f3df3818ea0ae53f80f871399" title="prvGPSReceiveTask" alt="" coords="221,241,365,271"/><area shape="rect" id="node19" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="229,84,357,113"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="635,136,685,165"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a877358e4b568f286c9e983dacbe76b90"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeSetGPSData </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structGPSData.html">GPSData</a> *const&#160;</td>
          <td class="paramname"><em>pxNewGPSData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from pxNewGPSData buffer to xGPSWrapper global variable and updates its xGPSUpdateTime field. Doesn't check parameter consistency (every field must be defined). </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01409">1409</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;{</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="drone_8c.html#a95131cdfae1cf00f4e600b7a53952e12">xGPSWrapper</a>.<a class="code" href="structdroneGPSWrapper.html#a10b2beda6001da1e8140e92d4cdf6437">xGPSData</a> = *pxNewGPSData;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="drone_8c.html#a95131cdfae1cf00f4e600b7a53952e12">xGPSWrapper</a>.<a class="code" href="structdroneGPSWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a> = xTaskGetTickCount();</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvSafeSetGPSData()&quot;</span>,</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;            <span class="stringliteral">&quot;xGPSData updated&quot;</span> );</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a95131cdfae1cf00f4e600b7a53952e12"><div class="ttname"><a href="drone_8c.html#a95131cdfae1cf00f4e600b7a53952e12">xGPSWrapper</a></div><div class="ttdeci">static struct droneGPSWrapper xGPSWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00234">drone.c:234</a></div></div>
<div class="ttc" id="structdroneGPSWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneGPSWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneGPSWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00155">drone.c:155</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="structdroneGPSWrapper_html_a10b2beda6001da1e8140e92d4cdf6437"><div class="ttname"><a href="structdroneGPSWrapper.html#a10b2beda6001da1e8140e92d4cdf6437">droneGPSWrapper::xGPSData</a></div><div class="ttdeci">struct GPSData xGPSData</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00153">drone.c:153</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a877358e4b568f286c9e983dacbe76b90_cgraph.png" border="0" usemap="#drone_8c_a877358e4b568f286c9e983dacbe76b90_cgraph" alt=""/></div>
<map name="drone_8c_a877358e4b568f286c9e983dacbe76b90_cgraph" id="drone_8c_a877358e4b568f286c9e983dacbe76b90_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="199,5,292,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a877358e4b568f286c9e983dacbe76b90_icgraph.png" border="0" usemap="#drone_8c_a877358e4b568f286c9e983dacbe76b90_icgraph" alt=""/></div>
<map name="drone_8c_a877358e4b568f286c9e983dacbe76b90_icgraph" id="drone_8c_a877358e4b568f286c9e983dacbe76b90_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a1653124f3df3818ea0ae53f80f871399" title="prvGPSReceiveTask" alt="" coords="199,5,343,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="392,5,443,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e476734aad041a30d224248842252ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeSetIMUData </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structIMUData.html">IMUData</a> *const&#160;</td>
          <td class="paramname"><em>pxNewIMUData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thread-safe global variable update routines</p>
<p>Safely copies from pxNewIMUData buffer to xIMUWrapper global variable and updates its xIMUUpdateTime field. Doesn't check parameter consistency (every field must be defined). </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01394">1394</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <a class="code" href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a>.<a class="code" href="structdroneIMUWrapper.html#a24e5ed93f14ddc03e745ce6d708b7423">xIMUData</a> = *pxNewIMUData;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a>.<a class="code" href="structdroneIMUWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a> = xTaskGetTickCount();</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvSafeSetIMUData()&quot;</span>,</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            <span class="stringliteral">&quot;xIMUData updated&quot;</span> );</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;}</div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="structdroneIMUWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneIMUWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneIMUWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00135">drone.c:135</a></div></div>
<div class="ttc" id="drone_8c_html_a171f507970d5344c145f142f325600f9"><div class="ttname"><a href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a></div><div class="ttdeci">static struct droneIMUWrapper xIMUWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00239">drone.c:239</a></div></div>
<div class="ttc" id="structdroneIMUWrapper_html_a24e5ed93f14ddc03e745ce6d708b7423"><div class="ttname"><a href="structdroneIMUWrapper.html#a24e5ed93f14ddc03e745ce6d708b7423">droneIMUWrapper::xIMUData</a></div><div class="ttdeci">struct IMUData xIMUData</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00133">drone.c:133</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a6e476734aad041a30d224248842252ee_cgraph.png" border="0" usemap="#drone_8c_a6e476734aad041a30d224248842252ee_cgraph" alt=""/></div>
<map name="drone_8c_a6e476734aad041a30d224248842252ee_cgraph" id="drone_8c_a6e476734aad041a30d224248842252ee_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="196,5,289,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a6e476734aad041a30d224248842252ee_icgraph.png" border="0" usemap="#drone_8c_a6e476734aad041a30d224248842252ee_icgraph" alt=""/></div>
<map name="drone_8c_a6e476734aad041a30d224248842252ee_icgraph" id="drone_8c_a6e476734aad041a30d224248842252ee_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="195,5,317,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="365,5,416,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afe4bece13abfc26bfff4fc4a4c80a175"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeSetTelemeterData </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtelemeterData.html">telemeterData</a> *const&#160;</td>
          <td class="paramname"><em>pxNewTelemeterData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from pxNewTelemeterData buffer to xTelemeterWrapper global variable and updates its xTelemeterUpdateTime field. Doesn't check parameter consistency (every field must be defined). </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01468">1468</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;{</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="drone_8c.html#ad2b82954258dd1d9c8da2cfd29600dc1">xTelemeterWrapper</a>.<a class="code" href="structdroneTelemeterWrapper.html#acde4f0df38902e736eea06c729fc136c">xTelemeterData</a> = *pxNewTelemeterData;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="drone_8c.html#ad2b82954258dd1d9c8da2cfd29600dc1">xTelemeterWrapper</a>.<a class="code" href="structdroneTelemeterWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a> = xTaskGetTickCount();</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvSafeSetTelemeterData()&quot;</span>,</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            <span class="stringliteral">&quot;xTelemeterData updated&quot;</span> );</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;}</div>
<div class="ttc" id="structdroneTelemeterWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneTelemeterWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneTelemeterWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00165">drone.c:165</a></div></div>
<div class="ttc" id="structdroneTelemeterWrapper_html_acde4f0df38902e736eea06c729fc136c"><div class="ttname"><a href="structdroneTelemeterWrapper.html#acde4f0df38902e736eea06c729fc136c">droneTelemeterWrapper::xTelemeterData</a></div><div class="ttdeci">struct telemeterData xTelemeterData</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00163">drone.c:163</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="drone_8c_html_ad2b82954258dd1d9c8da2cfd29600dc1"><div class="ttname"><a href="drone_8c.html#ad2b82954258dd1d9c8da2cfd29600dc1">xTelemeterWrapper</a></div><div class="ttdeci">static struct droneTelemeterWrapper xTelemeterWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00243">drone.c:243</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_cgraph.png" border="0" usemap="#drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_cgraph" alt=""/></div>
<map name="drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_cgraph" id="drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="228,5,321,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_icgraph.png" border="0" usemap="#drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_icgraph" alt=""/></div>
<map name="drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_icgraph" id="drone_8c_afe4bece13abfc26bfff4fc4a4c80a175_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a2f26a5a0f6e36469031ef12396418848" title="prvDetectObstacleTask" alt="" coords="227,5,387,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="435,5,485,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1cc2e07bf4ac9357c253fe77a21c47c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSafeSetZigbeeData </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structflightCommand.html">flightCommand</a> *const&#160;</td>
          <td class="paramname"><em>pxNewFltCmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Safely copies from pxNewFltCmd buffer to xZigbeeWrapper global variable and updates its xZigbeeUpdateTime and xCmdUpdateTime fields. Doesn't check parameter consistency (every field must be defined). </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01424">1424</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;{</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    taskENTER_CRITICAL();</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <a class="code" href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a>.<a class="code" href="structdroneZigbeeWrapper.html#ac2a9f504f2600f2d95b1588b0d6072d7">xFlightCmd</a> = *pxNewFltCmd;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <a class="code" href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a>.<a class="code" href="structdroneZigbeeWrapper.html#ae066aa8680e74f30361a1fa85b7ad8c3">xCmdUpdateTime</a> = xTaskGetTickCount();</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a>.<a class="code" href="structdroneZigbeeWrapper.html#a8f4c05e947b6b5126e0113c08351673f">xZigbeeUpdateTime</a> = xTaskGetTickCount();</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvSafeSetFltCmd()&quot;</span>,</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="stringliteral">&quot;xFlightCmd updated&quot;</span> );</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;}</div>
<div class="ttc" id="structdroneZigbeeWrapper_html_a8f4c05e947b6b5126e0113c08351673f"><div class="ttname"><a href="structdroneZigbeeWrapper.html#a8f4c05e947b6b5126e0113c08351673f">droneZigbeeWrapper::xZigbeeUpdateTime</a></div><div class="ttdeci">portTickType xZigbeeUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00145">drone.c:145</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="structdroneZigbeeWrapper_html_ae066aa8680e74f30361a1fa85b7ad8c3"><div class="ttname"><a href="structdroneZigbeeWrapper.html#ae066aa8680e74f30361a1fa85b7ad8c3">droneZigbeeWrapper::xCmdUpdateTime</a></div><div class="ttdeci">portTickType xCmdUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00147">drone.c:147</a></div></div>
<div class="ttc" id="structdroneZigbeeWrapper_html_ac2a9f504f2600f2d95b1588b0d6072d7"><div class="ttname"><a href="structdroneZigbeeWrapper.html#ac2a9f504f2600f2d95b1588b0d6072d7">droneZigbeeWrapper::xFlightCmd</a></div><div class="ttdeci">struct flightCommand xFlightCmd</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00141">drone.c:141</a></div></div>
<div class="ttc" id="drone_8c_html_a0745b90bb718aa3f4a7b68c9c18aa60f"><div class="ttname"><a href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a></div><div class="ttdeci">static struct droneZigbeeWrapper xZigbeeWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00237">drone.c:237</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_cgraph.png" border="0" usemap="#drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_cgraph" alt=""/></div>
<map name="drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_cgraph" id="drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="209,5,303,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_icgraph.png" border="0" usemap="#drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_icgraph" alt=""/></div>
<map name="drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_icgraph" id="drone_8c_a1cc2e07bf4ac9357c253fe77a21c47c4_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="385,5,540,35"/><area shape="rect" id="node7" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="208,59,336,88"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="589,32,640,61"/><area shape="rect" id="node9" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="401,59,524,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af8aba28838d473eae5660936d6f2f71c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSelectErrorState </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdroneState.html">droneState</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Selects STATE_FLIGHT_ERR if already flying, to STATE_GROUND_ERR otherwise, and updates pxCurrState. Does NOT update global xDroneState </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01373">1373</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;{</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">switch</span>( pxCurrState-&gt;<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> )</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a>:</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a>:</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a>:</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a>:</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        pxCurrState-&gt;<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a>;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a>:</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a>:</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        pxCurrState-&gt;<a class="code" href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">eFltState</a> = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;}</div>
<div class="ttc" id="structdroneState_html_a6bac61f96c145cf395b2a4fb359be46b"><div class="ttname"><a href="structdroneState.html#a6bac61f96c145cf395b2a4fb359be46b">droneState::eFltState</a></div><div class="ttdeci">enum droneFltState eFltState</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00124">drone.c:124</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00080">drone.c:80</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00072">drone.c:72</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00076">drone.c:76</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caed26b59c0afa78ad7080428ba383e2fa">STATE_FLIGHT_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00078">drone.c:78</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca0cab358e8f859a193657d1d9b854c235">STATE_GROUND_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00070">drone.c:70</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00068">drone.c:68</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00066">drone.c:66</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00074">drone.c:74</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_af8aba28838d473eae5660936d6f2f71c_icgraph.png" border="0" usemap="#drone_8c_af8aba28838d473eae5660936d6f2f71c_icgraph" alt=""/></div>
<map name="drone_8c_af8aba28838d473eae5660936d6f2f71c_icgraph" id="drone_8c_af8aba28838d473eae5660936d6f2f71c_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="189,5,317,35"/><area shape="rect" id="node5" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="365,5,488,35"/><area shape="rect" id="node7" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="536,5,587,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a487e133a34630d9ba54a1932e97d0383"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSendConfig </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxDroneConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Transmits current configuration to the base </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01274">1274</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;{</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="comment">/* TODO : Configuration IBIT transmission */</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a487e133a34630d9ba54a1932e97d0383_icgraph.png" border="0" usemap="#drone_8c_a487e133a34630d9ba54a1932e97d0383_icgraph" alt=""/></div>
<map name="drone_8c_a487e133a34630d9ba54a1932e97d0383_icgraph" id="drone_8c_a487e133a34630d9ba54a1932e97d0383_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="164,5,319,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="368,5,419,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae263682a12eb5f65afe246a9931efb07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSendError </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneState.html">droneState</a> *const&#160;</td>
          <td class="paramname"><em>xCurrDroneState</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01805">1805</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;{</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="comment">/* TODO : Implement */</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ae263682a12eb5f65afe246a9931efb07_icgraph.png" border="0" usemap="#drone_8c_ae263682a12eb5f65afe246a9931efb07_icgraph" alt=""/></div>
<map name="drone_8c_ae263682a12eb5f65afe246a9931efb07_icgraph" id="drone_8c_ae263682a12eb5f65afe246a9931efb07_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="152,5,203,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6ed0192c590c18579fd803b7dfd4b6ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSendStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends drone status to the base via the zigbee module </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01800">1800</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;{</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="comment">/* TODO : implement prvSendStatus() */</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a6ed0192c590c18579fd803b7dfd4b6ee_icgraph.png" border="0" usemap="#drone_8c_a6ed0192c590c18579fd803b7dfd4b6ee_icgraph" alt=""/></div>
<map name="drone_8c_a6ed0192c590c18579fd803b7dfd4b6ee_icgraph" id="drone_8c_a6ed0192c590c18579fd803b7dfd4b6ee_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#adc20e4087bfd6cf789c7552627ad89a8" title="prvZigbeeReceiveTask" alt="" coords="164,5,319,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="368,5,419,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a464ac1a014942c092b752b720c4ff294"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvSetupHardware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialization routines</p>
<p>Hardware specific clock configuration that was not already performed before <a class="el" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a> was called. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01291">1291</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;{</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="comment">/* Ensure all priority bits are assigned as preemption priority bits</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">    if using a ARM Cortex-M microcontroller. */</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    NVIC_SetPriorityGrouping( 0 );</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    SystemInit();</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    SystemCoreClockUpdate();</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a464ac1a014942c092b752b720c4ff294_icgraph.png" border="0" usemap="#drone_8c_a464ac1a014942c092b752b720c4ff294_icgraph" alt=""/></div>
<map name="drone_8c_a464ac1a014942c092b752b720c4ff294_icgraph" id="drone_8c_a464ac1a014942c092b752b720c4ff294_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="184,5,235,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ade91bfc77ee5354a85d413273f19ac0f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvShutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01816">1816</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="comment">/* TODO : Implement */</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    __WFI();</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_ade91bfc77ee5354a85d413273f19ac0f_icgraph.png" border="0" usemap="#drone_8c_ade91bfc77ee5354a85d413273f19ac0f_icgraph" alt=""/></div>
<map name="drone_8c_ade91bfc77ee5354a85d413273f19ac0f_icgraph" id="drone_8c_ade91bfc77ee5354a85d413273f19ac0f_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="152,5,203,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a55ad73bd40e656d85654c7196d442055"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvTakeoffDone </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structIMUData.html">IMUData</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrIMUData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tests routines</p>
<p>Returns 0 if xDroneConfig.ulTakeoffAltitude is not yet reached, !0 otherwise </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01573">1573</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;{</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a>.<a class="code" href="structdroneIMUWrapper.html#a24e5ed93f14ddc03e745ce6d708b7423">xIMUData</a>.<a class="code" href="structIMUData.html#a3dbdb2be3068f998ad0b0ff721ceb258">lAltitude</a> &lt; <a class="code" href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a>.<a class="code" href="structdroneConfig.html#a484448908637319ab5d43e20f68264ee">ulTakeoffAltitude</a>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;}</div>
<div class="ttc" id="structIMUData_html_a3dbdb2be3068f998ad0b0ff721ceb258"><div class="ttname"><a href="structIMUData.html#a3dbdb2be3068f998ad0b0ff721ceb258">IMUData::lAltitude</a></div><div class="ttdeci">int32_t lAltitude</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00049">imu.h:49</a></div></div>
<div class="ttc" id="drone_8c_html_a3283bf4f08e89f5b0eb8d610720bb09b"><div class="ttname"><a href="drone_8c.html#a3283bf4f08e89f5b0eb8d610720bb09b">xDroneConfig</a></div><div class="ttdeci">static struct droneConfig xDroneConfig</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00245">drone.c:245</a></div></div>
<div class="ttc" id="structdroneConfig_html_a484448908637319ab5d43e20f68264ee"><div class="ttname"><a href="structdroneConfig.html#a484448908637319ab5d43e20f68264ee">droneConfig::ulTakeoffAltitude</a></div><div class="ttdeci">uint32_t ulTakeoffAltitude</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00018">drone.h:18</a></div></div>
<div class="ttc" id="drone_8c_html_a171f507970d5344c145f142f325600f9"><div class="ttname"><a href="drone_8c.html#a171f507970d5344c145f142f325600f9">xIMUWrapper</a></div><div class="ttdeci">static struct droneIMUWrapper xIMUWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00239">drone.c:239</a></div></div>
<div class="ttc" id="structdroneIMUWrapper_html_a24e5ed93f14ddc03e745ce6d708b7423"><div class="ttname"><a href="structdroneIMUWrapper.html#a24e5ed93f14ddc03e745ce6d708b7423">droneIMUWrapper::xIMUData</a></div><div class="ttdeci">struct IMUData xIMUData</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00133">drone.c:133</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a55ad73bd40e656d85654c7196d442055_icgraph.png" border="0" usemap="#drone_8c_a55ad73bd40e656d85654c7196d442055_icgraph" alt=""/></div>
<map name="drone_8c_a55ad73bd40e656d85654c7196d442055_icgraph" id="drone_8c_a55ad73bd40e656d85654c7196d442055_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="168,5,291,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="339,5,389,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a94711ce6896840fdb3ab94d61d976ff8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvTelemeterTimedout </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrTelemeterWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01597">1597</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;{</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">/* Since last update */</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;portTickType ulTimeElapsed;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="comment">/* TODO : take into account systick overflow (probably not an issue for low</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">    SysTick frequency and short periods). */</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    ulTimeElapsed = xTaskGetTickCount() - pxCurrTelemeterWrapper-&gt;<a class="code" href="structdroneTelemeterWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">xUpdateTime</a>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">return</span> ulTimeElapsed &gt; ( pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a595d7bd00680e2e1864fd864294bae6c">xTelemeterTimeout</a> * pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a46edf93cbb15d0a3f1fd70eacea390e4">xDetectObstaclePeriod</a> );</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;}</div>
<div class="ttc" id="structdroneTelemeterWrapper_html_a3eb93eae26238af430cf63ce6d3d5b72"><div class="ttname"><a href="structdroneTelemeterWrapper.html#a3eb93eae26238af430cf63ce6d3d5b72">droneTelemeterWrapper::xUpdateTime</a></div><div class="ttdeci">portTickType xUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00165">drone.c:165</a></div></div>
<div class="ttc" id="structdroneConfig_html_a46edf93cbb15d0a3f1fd70eacea390e4"><div class="ttname"><a href="structdroneConfig.html#a46edf93cbb15d0a3f1fd70eacea390e4">droneConfig::xDetectObstaclePeriod</a></div><div class="ttdeci">portTickType xDetectObstaclePeriod</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00031">drone.h:31</a></div></div>
<div class="ttc" id="structdroneConfig_html_a595d7bd00680e2e1864fd864294bae6c"><div class="ttname"><a href="structdroneConfig.html#a595d7bd00680e2e1864fd864294bae6c">droneConfig::xTelemeterTimeout</a></div><div class="ttdeci">uint8_t xTelemeterTimeout</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00041">drone.h:41</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a94711ce6896840fdb3ab94d61d976ff8_icgraph.png" border="0" usemap="#drone_8c_a94711ce6896840fdb3ab94d61d976ff8_icgraph" alt=""/></div>
<map name="drone_8c_a94711ce6896840fdb3ab94d61d976ff8_icgraph" id="drone_8c_a94711ce6896840fdb3ab94d61d976ff8_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="205,5,333,35"/><area shape="rect" id="node5" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="381,5,504,35"/><area shape="rect" id="node7" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="552,5,603,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adc20e4087bfd6cf789c7552627ad89a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvZigbeeReceiveTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Periodically receives commands from the base. Updates xZigbeeWrapper global variable, which is checked by other tasks for commands. Manages Rx from the base and status Tx to it, along with video toggle. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00941">941</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;{</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;portTickType xNextWakeTime = xTaskGetTickCount();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="keyword">struct </span><a class="code" href="structzigbeeData.html">zigbeeData</a> xNewZigbeeData;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneConfig.html">droneConfig</a> xCurrConfig;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneState.html">droneState</a> xCurrDroneState;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="keyword">struct </span><a class="code" href="structdroneIMUWrapper.html">droneIMUWrapper</a> xCurrIMUWrapper;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">while</span>( 1 )</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvZigbeeReceiveTask()&quot;</span>,</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                <span class="stringliteral">&quot;Woken up&quot;</span> );</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="comment">/* Receive drone orders */</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <a class="code" href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac">vZigbeeReceiveData</a>( &amp;xNewZigbeeData );</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="comment">/* Update local copy of xDroneConfig */</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <a class="code" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a>( &amp;xCurrConfig );</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="comment">/* Update local copy of xDroneState */</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <a class="code" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">switch</span> ( xNewZigbeeData.eCmdId )</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6aa9f5e1d3fa7a48a053cb78acdf95e57a">CMD_GET_STATUS</a>:</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            <span class="comment">/* Update the global variable */</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            <span class="comment">/* Send status after updating it */</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            <a class="code" href="drone_8c.html#a6ed0192c590c18579fd803b7dfd4b6ee">prvSendStatus</a>();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a77553c4f9197b5892c5827a04c25a968">CMD_SET_CONFIG</a>:</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">if</span>( xCurrDroneState.eFltState == <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a> )</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="drone_8c.html#a3a3685ed7436c17274035fd5ab62a058">prvDroneConfigValid</a>( &amp;( xNewZigbeeData.xCmdParam.xDroneConfig ) ) )</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                    <span class="comment">/* Apply new configuration */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                    <a class="code" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig</a>( &amp;( xNewZigbeeData.xCmdParam.xDroneConfig ) );</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                    <span class="comment">/* Register success */</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                    xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2">DRN_ERR_CONFIG</a>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2">DRN_ERR_CONFIG</a>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6abb5a621b2e8f98474199365307c1583c">CMD_VIDEO_ENABLE</a>:</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <a class="code" href="drone_8c.html#ae0c8b07d0be360e948fd5f870edc426d">prvEnableVideo</a>();</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="comment">/* Update the global variable */</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a3147545d7cf162c55a4dfdb8a9b842f8">CMD_VIDEO_DISABLE</a>:</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <a class="code" href="drone_8c.html#a095421af495ba7c58b7595dc5bebeb86">prvDisableVideo</a>();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="comment">/* Update the global variable */</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a4c63207daec4bc4c947f0a63d48761cb">CMD_FLT_TAKEOFF</a>:</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="comment">/* Check if takeoff is possible */</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            <span class="keywordflow">if</span>( xCurrDroneState.eFltState == <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a> )</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                <span class="comment">/* Set reference altitude */</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                <a class="code" href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7">prvSafeGetIMUData</a>( &amp;xCurrIMUWrapper );</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                <a class="code" href="drone_8c.html#a55b04c7311a05ab6768750b627eaa78a">prvInitAltitude</a>( &amp;xCurrIMUWrapper, &amp;xCurrConfig );</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <span class="comment">/* Change its mode to STATE_TAKEOFF */</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <span class="comment">/* Update the global variable */</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a7f3b918346242aa7d684a14ba2c2b441">CMD_FLT_LANDING</a>:</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="keywordflow">if</span>( xCurrDroneState.eFltState == <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a> )</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="comment">/* Change its mode to STATE_LANDING */</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                <span class="comment">/* Update the global variable */</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6ae0ea43f407f8211a9acef5f717dcf933">CMD_FLT_AUTOTUNING</a>:</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <span class="keywordflow">if</span>( xCurrDroneState.eFltState == <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a> )</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                <span class="comment">/* Change its mode to STATE_AUTOTUNING */</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                xCurrDroneState.eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                <span class="comment">/* Update the global variable */</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            }</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                xCurrDroneState.eErrorMask = <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a79510fc7f07b52c1fef87c672e3a9d9e">CMD_RESET_AUTOTUNING</a>:</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <span class="comment">/* TODO : Implement autotuning reset */</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a824277770f43b1df4f00e8ee24b1d26c">CMD_RESET_CONFIG</a>:</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <span class="keywordflow">if</span>( xCurrDroneState.eFltState == <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a> )</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                <span class="comment">/* Reset xDroneConfig to its default value */</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                <a class="code" href="drone_8c.html#a31c6c01d7b7a525778a42d5d9d5ad22c">prvResetDroneConfig</a>();</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                xCurrDroneState.eErrorMask = <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a72722dc0846a5fc226f850301b703609">CMD_GET_CONFIG</a>:</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <a class="code" href="drone_8c.html#a487e133a34630d9ba54a1932e97d0383">prvSendConfig</a>( &amp;xCurrConfig );</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6aefb30be8a8f1fedd95be57cd09c85398">CMD_FLT_MANEUVER</a>:</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="flight_8c.html#a1e83905ebd5ae1ca2d6c4f627cc76ab0">ucFlightCmdValid</a>( &amp;( xNewZigbeeData.xCmdParam.xFlightCmd ) ) )</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                <span class="comment">/* Register command for next flight control task run */</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <a class="code" href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4">prvSafeSetZigbeeData</a>( &amp;( xNewZigbeeData.xCmdParam.xFlightCmd ) );</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                <span class="comment">/* Register command validity */</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                xCurrDroneState.eErrorMask &amp;= ~<a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <span class="comment">/* Register error */</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            xCurrDroneState.eErrorMask |= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a>;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <a class="code" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a>( &amp;xCurrDroneState );</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="comment">/* Checks whether the communication was successful */</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">if</span>( !( xCurrDroneState.eErrorMask &amp;= <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a> ) )</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="comment">/* Register successful communication */</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            taskENTER_CRITICAL();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <a class="code" href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a>.<a class="code" href="structdroneZigbeeWrapper.html#a8f4c05e947b6b5126e0113c08351673f">xZigbeeUpdateTime</a> = xTaskGetTickCount();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            taskEXIT_CRITICAL();</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;prvZigbeeReceiveTask()&quot;</span>,</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                <span class="stringliteral">&quot;Delayed&quot;</span> );</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        vTaskDelayUntil( &amp;xNextWakeTime, xCurrConfig.xZigbeeReceivePeriod );</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="comment">/* Should never get there */</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;ERROR&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>, <span class="stringliteral">&quot;prvZigbeeReceiveTask()&quot;</span>,</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <span class="stringliteral">&quot;Got out of infinite loop !&quot;</span> );</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;}</div>
<div class="ttc" id="drone_8c_html_a6ed0192c590c18579fd803b7dfd4b6ee"><div class="ttname"><a href="drone_8c.html#a6ed0192c590c18579fd803b7dfd4b6ee">prvSendStatus</a></div><div class="ttdeci">static void prvSendStatus(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01800">drone.c:1800</a></div></div>
<div class="ttc" id="structdroneZigbeeWrapper_html_a8f4c05e947b6b5126e0113c08351673f"><div class="ttname"><a href="structdroneZigbeeWrapper.html#a8f4c05e947b6b5126e0113c08351673f">droneZigbeeWrapper::xZigbeeUpdateTime</a></div><div class="ttdeci">portTickType xZigbeeUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00145">drone.c:145</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a79510fc7f07b52c1fef87c672e3a9d9e"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a79510fc7f07b52c1fef87c672e3a9d9e">CMD_RESET_AUTOTUNING</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00028">zigbee.h:28</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a72722dc0846a5fc226f850301b703609"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a72722dc0846a5fc226f850301b703609">CMD_GET_CONFIG</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00034">zigbee.h:34</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca8022b6b06eea757154be17d06c5441b7">STATE_LANDING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00080">drone.c:80</a></div></div>
<div class="ttc" id="structdroneIMUWrapper_html"><div class="ttname"><a href="structdroneIMUWrapper.html">droneIMUWrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00131">drone.c:131</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352ad87cede38525b6afdd6dc98bea304204">DRN_ERR_CMD</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00113">drone.c:113</a></div></div>
<div class="ttc" id="drone_8c_html_ae0c8b07d0be360e948fd5f870edc426d"><div class="ttname"><a href="drone_8c.html#ae0c8b07d0be360e948fd5f870edc426d">prvEnableVideo</a></div><div class="ttdeci">static void prvEnableVideo(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01554">drone.c:1554</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a824277770f43b1df4f00e8ee24b1d26c"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a824277770f43b1df4f00e8ee24b1d26c">CMD_RESET_CONFIG</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00032">zigbee.h:32</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca53e82bf3cade7e163576fa495996d853">STATE_TAKEOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00072">drone.c:72</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cad4e643150006cdb1e80a11aa25cd860f">STATE_AUTOTUNING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00076">drone.c:76</a></div></div>
<div class="ttc" id="drone_8c_html_a95e9ad134d650153cb01a06003aeb343"><div class="ttname"><a href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343">prvSafeGetDroneState</a></div><div class="ttdeci">static void prvSafeGetDroneState(struct droneState *const pxNewState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01547">drone.c:1547</a></div></div>
<div class="ttc" id="flight_8c_html_a1e83905ebd5ae1ca2d6c4f627cc76ab0"><div class="ttname"><a href="flight_8c.html#a1e83905ebd5ae1ca2d6c4f627cc76ab0">ucFlightCmdValid</a></div><div class="ttdeci">uint8_t ucFlightCmdValid(const struct flightCommand *const pxFlightCmd)</div><div class="ttdef"><b>Definition:</b> <a href="flight_8c_source.html#l00044">flight.c:44</a></div></div>
<div class="ttc" id="zigbee_8c_html_a086880a41e9dcff0444893eaa3aa5eac"><div class="ttname"><a href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac">vZigbeeReceiveData</a></div><div class="ttdeci">void vZigbeeReceiveData(struct zigbeeData *const pxZigbeeData)</div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8c_source.html#l00034">zigbee.c:34</a></div></div>
<div class="ttc" id="structzigbeeData_html"><div class="ttname"><a href="structzigbeeData.html">zigbeeData</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00057">zigbee.h:57</a></div></div>
<div class="ttc" id="drone_8c_html_aba79a8c759d64b5d1df90fe8028cdd18"><div class="ttname"><a href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState</a></div><div class="ttdeci">static void prvSafeSetDroneState(const struct droneState *const xNewDroneState)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01482">drone.c:1482</a></div></div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
<div class="ttc" id="drone_8c_html_a7b501b8fd615ad95fb6d32f4bbadd9e6"><div class="ttname"><a href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig</a></div><div class="ttdeci">static void prvSafeSetDroneConfig(const struct droneConfig *const pxNewDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01454">drone.c:1454</a></div></div>
<div class="ttc" id="drone_8c_html_a487e133a34630d9ba54a1932e97d0383"><div class="ttname"><a href="drone_8c.html#a487e133a34630d9ba54a1932e97d0383">prvSendConfig</a></div><div class="ttdeci">static void prvSendConfig(const struct droneConfig *const pxDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01274">drone.c:1274</a></div></div>
<div class="ttc" id="structdroneState_html"><div class="ttname"><a href="structdroneState.html">droneState</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00121">drone.c:121</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6abb5a621b2e8f98474199365307c1583c"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6abb5a621b2e8f98474199365307c1583c">CMD_VIDEO_ENABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00018">zigbee.h:18</a></div></div>
<div class="ttc" id="drone_8c_html_a1cc2e07bf4ac9357c253fe77a21c47c4"><div class="ttname"><a href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4">prvSafeSetZigbeeData</a></div><div class="ttdeci">static void prvSafeSetZigbeeData(const struct flightCommand *const pxNewFltCmd)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01424">drone.c:1424</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a77553c4f9197b5892c5827a04c25a968"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a77553c4f9197b5892c5827a04c25a968">CMD_SET_CONFIG</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00030">zigbee.h:30</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a7f3b918346242aa7d684a14ba2c2b441"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a7f3b918346242aa7d684a14ba2c2b441">CMD_FLT_LANDING</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00024">zigbee.h:24</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a3147545d7cf162c55a4dfdb8a9b842f8"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a3147545d7cf162c55a4dfdb8a9b842f8">CMD_VIDEO_DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00020">zigbee.h:20</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6aa9f5e1d3fa7a48a053cb78acdf95e57a"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6aa9f5e1d3fa7a48a053cb78acdf95e57a">CMD_GET_STATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00036">zigbee.h:36</a></div></div>
<div class="ttc" id="drone_8c_html_a095421af495ba7c58b7595dc5bebeb86"><div class="ttname"><a href="drone_8c.html#a095421af495ba7c58b7595dc5bebeb86">prvDisableVideo</a></div><div class="ttdeci">static void prvDisableVideo(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01563">drone.c:1563</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6a4c63207daec4bc4c947f0a63d48761cb"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6a4c63207daec4bc4c947f0a63d48761cb">CMD_FLT_TAKEOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00022">zigbee.h:22</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6ca6bbc8323e31abccea998c00dfe5d20a0">STATE_GROUND_RDY</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00068">drone.c:68</a></div></div>
<div class="ttc" id="drone_8c_html_a31c6c01d7b7a525778a42d5d9d5ad22c"><div class="ttname"><a href="drone_8c.html#a31c6c01d7b7a525778a42d5d9d5ad22c">prvResetDroneConfig</a></div><div class="ttdeci">static void prvResetDroneConfig(void)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01366">drone.c:1366</a></div></div>
<div class="ttc" id="drone_8c_html_a3a3685ed7436c17274035fd5ab62a058"><div class="ttname"><a href="drone_8c.html#a3a3685ed7436c17274035fd5ab62a058">prvDroneConfigValid</a></div><div class="ttdeci">static uint8_t prvDroneConfigValid(struct droneConfig *pxNewDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01345">drone.c:1345</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6ae0ea43f407f8211a9acef5f717dcf933"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6ae0ea43f407f8211a9acef5f717dcf933">CMD_FLT_AUTOTUNING</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00026">zigbee.h:26</a></div></div>
<div class="ttc" id="drone_8c_html_a52ed89dea0bcfffadeca6535234ee8a6"><div class="ttname"><a href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6">prvSafeGetDroneConfig</a></div><div class="ttdeci">static void prvSafeGetDroneConfig(struct droneConfig *const pxNewConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01530">drone.c:1530</a></div></div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a80138de1c3a91db00596e22a7544e0b2">DRN_ERR_CONFIG</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00111">drone.c:111</a></div></div>
<div class="ttc" id="drone_8c_html_a7108c3d763912fb80781465b0b15f0a7"><div class="ttname"><a href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7">prvSafeGetIMUData</a></div><div class="ttdeci">static void prvSafeGetIMUData(struct droneIMUWrapper *const pxNewIMUWrapper)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01495">drone.c:1495</a></div></div>
<div class="ttc" id="zigbee_8h_html_aa8a212aca1d1f49ff85fe2ac4b74cbb6aefb30be8a8f1fedd95be57cd09c85398"><div class="ttname"><a href="zigbee_8h.html#aa8a212aca1d1f49ff85fe2ac4b74cbb6aefb30be8a8f1fedd95be57cd09c85398">CMD_FLT_MANEUVER</a></div><div class="ttdef"><b>Definition:</b> <a href="zigbee_8h_source.html#l00038">zigbee.h:38</a></div></div>
<div class="ttc" id="structdroneConfig_html"><div class="ttname"><a href="structdroneConfig.html">droneConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00012">drone.h:12</a></div></div>
<div class="ttc" id="drone_8c_html_a55b04c7311a05ab6768750b627eaa78a"><div class="ttname"><a href="drone_8c.html#a55b04c7311a05ab6768750b627eaa78a">prvInitAltitude</a></div><div class="ttdeci">static void prvInitAltitude(const struct droneIMUWrapper *const pxCurrIMUWrapper, struct droneConfig *const pxCurrDroneConfig)</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l01784">drone.c:1784</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6cadaf68b8f3e3aa6f6f7250e8965aa720c">STATE_FLIGHT</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00074">drone.c:74</a></div></div>
<div class="ttc" id="drone_8c_html_a0745b90bb718aa3f4a7b68c9c18aa60f"><div class="ttname"><a href="drone_8c.html#a0745b90bb718aa3f4a7b68c9c18aa60f">xZigbeeWrapper</a></div><div class="ttdeci">static struct droneZigbeeWrapper xZigbeeWrapper</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00237">drone.c:237</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_adc20e4087bfd6cf789c7552627ad89a8_cgraph.png" border="0" usemap="#drone_8c_adc20e4087bfd6cf789c7552627ad89a8_cgraph" alt=""/></div>
<map name="drone_8c_adc20e4087bfd6cf789c7552627ad89a8_cgraph" id="drone_8c_adc20e4087bfd6cf789c7552627ad89a8_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="631,361,724,391"/><area shape="rect" id="node5" href="zigbee_8c.html#a086880a41e9dcff0444893eaa3aa5eac" title="vZigbeeReceiveData" alt="" coords="429,127,573,156"/><area shape="rect" id="node8" href="drone_8c.html#a52ed89dea0bcfffadeca6535234ee8a6" title="prvSafeGetDroneConfig" alt="" coords="212,101,372,131"/><area shape="rect" id="node10" href="drone_8c.html#a95e9ad134d650153cb01a06003aeb343" title="prvSafeGetDroneState" alt="" coords="215,155,369,184"/><area shape="rect" id="node12" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18" title="prvSafeSetDroneState" alt="" coords="425,257,577,287"/><area shape="rect" id="node15" href="drone_8c.html#a6ed0192c590c18579fd803b7dfd4b6ee" title="prvSendStatus" alt="" coords="239,259,345,288"/><area shape="rect" id="node17" href="drone_8c.html#a3a3685ed7436c17274035fd5ab62a058" title="prvDroneConfigValid" alt="" coords="221,312,363,341"/><area shape="rect" id="node19" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6" title="prvSafeSetDroneConfig" alt="" coords="421,519,581,548"/><area shape="rect" id="node22" href="drone_8c.html#ae0c8b07d0be360e948fd5f870edc426d" title="prvEnableVideo" alt="" coords="445,361,557,391"/><area shape="rect" id="node25" href="drone_8c.html#a095421af495ba7c58b7595dc5bebeb86" title="prvDisableVideo" alt="" coords="443,415,560,444"/><area shape="rect" id="node28" href="drone_8c.html#a7108c3d763912fb80781465b0b15f0a7" title="prvSafeGetIMUData" alt="" coords="221,517,363,547"/><area shape="rect" id="node30" href="drone_8c.html#a55b04c7311a05ab6768750b627eaa78a" title="prvInitAltitude" alt="" coords="241,571,343,600"/><area shape="rect" id="node33" href="drone_8c.html#a31c6c01d7b7a525778a42d5d9d5ad22c" title="prvResetDroneConfig" alt="" coords="219,624,365,653"/><area shape="rect" id="node36" href="drone_8c.html#a487e133a34630d9ba54a1932e97d0383" title="prvSendConfig" alt="" coords="239,677,345,707"/><area shape="rect" id="node38" href="flight_8c.html#a1e83905ebd5ae1ca2d6c4f627cc76ab0" title="ucFlightCmdValid" alt="" coords="229,731,355,760"/><area shape="rect" id="node40" href="drone_8c.html#a1cc2e07bf4ac9357c253fe77a21c47c4" title="prvSafeSetZigbeeData" alt="" coords="424,703,579,732"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_adc20e4087bfd6cf789c7552627ad89a8_icgraph.png" border="0" usemap="#drone_8c_adc20e4087bfd6cf789c7552627ad89a8_icgraph" alt=""/></div>
<map name="drone_8c_adc20e4087bfd6cf789c7552627ad89a8_icgraph" id="drone_8c_adc20e4087bfd6cf789c7552627ad89a8_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="211,5,261,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab575e06e044c1798598861974642a5fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvZigbeeSignalCritical </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrZigbeeWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01615">1615</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;{</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">return</span> ( pxCurrZigbeeWrapper-&gt;<a class="code" href="structdroneZigbeeWrapper.html#a6394e2d17c23e769e4d261172b17a547">ulSignalLvl</a> &lt; pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a36783b99ccbbea59c14fcc0e002c47c9">ulCritZigbeeSignalLvl</a> );</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div>
<div class="ttc" id="structdroneConfig_html_a36783b99ccbbea59c14fcc0e002c47c9"><div class="ttname"><a href="structdroneConfig.html#a36783b99ccbbea59c14fcc0e002c47c9">droneConfig::ulCritZigbeeSignalLvl</a></div><div class="ttdeci">uint32_t ulCritZigbeeSignalLvl</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00028">drone.h:28</a></div></div>
<div class="ttc" id="structdroneZigbeeWrapper_html_a6394e2d17c23e769e4d261172b17a547"><div class="ttname"><a href="structdroneZigbeeWrapper.html#a6394e2d17c23e769e4d261172b17a547">droneZigbeeWrapper::ulSignalLvl</a></div><div class="ttdeci">uint32_t ulSignalLvl</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00143">drone.c:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a657ad9692e768102eeb45847d8048925"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t prvZigbeeTimedout </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrZigbeeWrapper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> *const&#160;</td>
          <td class="paramname"><em>pxCurrDroneConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01657">1657</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;{</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">/* Since last update */</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;portTickType ulTimeElapsed;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="comment">/* TODO : take into account systick overflow (probably not an issue for low</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">    SysTick frequency and short periods). */</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    ulTimeElapsed = xTaskGetTickCount() - pxCurrZigbeeWrapper-&gt;<a class="code" href="structdroneZigbeeWrapper.html#a8f4c05e947b6b5126e0113c08351673f">xZigbeeUpdateTime</a>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">return</span> ulTimeElapsed &gt; ( pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a73c2331fe8a9f7db0f4061f8271a0245">xZigbeeReceiveTimeout</a> * pxCurrDroneConfig-&gt;<a class="code" href="structdroneConfig.html#a54d86f8a7e32623b47d892a21f7c4dd4">xZigbeeReceivePeriod</a> );</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;}</div>
<div class="ttc" id="structdroneZigbeeWrapper_html_a8f4c05e947b6b5126e0113c08351673f"><div class="ttname"><a href="structdroneZigbeeWrapper.html#a8f4c05e947b6b5126e0113c08351673f">droneZigbeeWrapper::xZigbeeUpdateTime</a></div><div class="ttdeci">portTickType xZigbeeUpdateTime</div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00145">drone.c:145</a></div></div>
<div class="ttc" id="structdroneConfig_html_a54d86f8a7e32623b47d892a21f7c4dd4"><div class="ttname"><a href="structdroneConfig.html#a54d86f8a7e32623b47d892a21f7c4dd4">droneConfig::xZigbeeReceivePeriod</a></div><div class="ttdeci">portTickType xZigbeeReceivePeriod</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00032">drone.h:32</a></div></div>
<div class="ttc" id="structdroneConfig_html_a73c2331fe8a9f7db0f4061f8271a0245"><div class="ttname"><a href="structdroneConfig.html#a73c2331fe8a9f7db0f4061f8271a0245">droneConfig::xZigbeeReceiveTimeout</a></div><div class="ttdeci">uint8_t xZigbeeReceiveTimeout</div><div class="ttdef"><b>Definition:</b> <a href="drone_8h_source.html#l00040">drone.h:40</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a657ad9692e768102eeb45847d8048925_icgraph.png" border="0" usemap="#drone_8c_a657ad9692e768102eeb45847d8048925_icgraph" alt=""/></div>
<map name="drone_8c_a657ad9692e768102eeb45847d8048925_icgraph" id="drone_8c_a657ad9692e768102eeb45847d8048925_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#ae749156ddeaadb095f1dab13cd3d4b0d" title="prvHandleTimouts" alt="" coords="187,5,315,35"/><area shape="rect" id="node5" href="drone_8c.html#a82a6ebf7a4c139c50e1a7e812c8cb6ff" title="prvFlightCtrlTask" alt="" coords="363,5,485,35"/><area shape="rect" id="node7" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="533,5,584,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2157f133b73a40a4e5f788ec29e842e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t ucBatteryInitTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l01681">1681</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;{</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;TODO&quot;</span>, pcTaskGetTaskName( NULL ), uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>, <span class="stringliteral">&quot;ucBatteryInitTest()&quot;</span>, <span class="stringliteral">&quot;Does nothing ATM&quot;</span> );</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a2157f133b73a40a4e5f788ec29e842e5_cgraph.png" border="0" usemap="#drone_8c_a2157f133b73a40a4e5f788ec29e842e5_cgraph" alt=""/></div>
<map name="drone_8c_a2157f133b73a40a4e5f788ec29e842e5_cgraph" id="drone_8c_a2157f133b73a40a4e5f788ec29e842e5_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="177,5,271,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a2157f133b73a40a4e5f788ec29e842e5_icgraph.png" border="0" usemap="#drone_8c_a2157f133b73a40a4e5f788ec29e842e5_icgraph" alt=""/></div>
<map name="drone_8c_a2157f133b73a40a4e5f788ec29e842e5_icgraph" id="drone_8c_a2157f133b73a40a4e5f788ec29e842e5_icgraph">
<area shape="rect" id="node3" href="drone_8c.html#aa93cacd884464cad591e6bb9bc161bcd" title="prvInitTestPeriph" alt="" coords="177,5,297,35"/><area shape="rect" id="node5" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="347,5,397,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a97fd430f36f8b065226e2bff9bad1de5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vApplicationIdleHook </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Executed when no other task is runnable. Could be used to simulate events </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l01258">1258</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;{</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;vApplicationIdleHook()&quot;</span>,</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="stringliteral">&quot;Entering idle task&quot;</span> );</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a>( xTaskGetTickCount(), <span class="stringliteral">&quot;INFO&quot;</span>, pcTaskGetTaskName( NULL ),</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            uxTaskPriorityGet( NULL ), <span class="stringliteral">&quot;drone&quot;</span>,  <span class="stringliteral">&quot;vApplicationIdleHook()&quot;</span>,</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            <span class="stringliteral">&quot;Going into sleep mode&quot;</span> );</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">/* Wait for interrupt to save power (sleeping mode) */</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    __WFI();</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;}</div>
<div class="ttc" id="debug_8c_html_a2d3888037c45cc6599c5ab1dea029e02"><div class="ttname"><a href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02">ulDebugMsg</a></div><div class="ttdeci">uint32_t ulDebugMsg(unsigned long ulTickCnt, char *pcTag, signed char *pcTask, unsigned long ulTaskPrio, char *pcModule, char *pcFunc, char *pcMessage)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00058">debug.c:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="drone_8c_a97fd430f36f8b065226e2bff9bad1de5_cgraph.png" border="0" usemap="#drone_8c_a97fd430f36f8b065226e2bff9bad1de5_cgraph" alt=""/></div>
<map name="drone_8c_a97fd430f36f8b065226e2bff9bad1de5_cgraph" id="drone_8c_a97fd430f36f8b065226e2bff9bad1de5_cgraph">
<area shape="rect" id="node3" href="debug_8c.html#a2d3888037c45cc6599c5ab1dea029e02" title="ulDebugMsg" alt="" coords="201,5,295,35"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a42451c65b3fff36ca56dcd9cd1bf3442"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xTaskHandle xBatteryMonitoringHandle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00226">226</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="adcd6991a017520b9200602c2118bde5e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdroneBatteryWrapper.html">droneBatteryWrapper</a> xBatteryWrapper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Battery level and time of last update </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00241">241</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a37e8d0933ca64cf79d6f310d004928c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xTaskHandle xDetectObstacleHandle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00224">224</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a22f98659c296fba68aad49993f676bb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structdroneConfig.html">droneConfig</a> xDfltDroneConfig</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    </div>
<div class="line">    .ulMaxAngle                 = 25,   </div>
<div class="line">    .ulTakeoffAltitude          = 1000, </div>
<div class="line">    .ulMinAltitude              = 2000, </div>
<div class="line">    .ulCritBatteryLvl           = 15,   </div>
<div class="line">    .ulCritObstacleDist         = 750,  </div>
<div class="line">    .ulCritZigbeeSignalLvl      = 5,    </div>
<div class="line">    .ulRefAltitude              = 0,</div>
<div class="line">    </div>
<div class="line">    .xBatteryMonitoringPeriod   = 30000 / portTICK_RATE_MS,</div>
<div class="line">    .xDetectObstaclePeriod      = 50 / portTICK_RATE_MS,</div>
<div class="line">    .xFlightCtrlPeriod          = 50 / portTICK_RATE_MS,</div>
<div class="line">    .xGPSReceivePeriod          = 10000 / portTICK_RATE_MS,</div>
<div class="line">    .xZigbeeReceivePeriod       = 500 / portTICK_RATE_MS,</div>
<div class="line">    </div>
<div class="line">    .xIMUDataTimeout            = 3,</div>
<div class="line">    .xZigbeeCmdTimeout          = 2,</div>
<div class="line">    .xZigbeeReceiveTimeout      = 10,</div>
<div class="line">    .xTelemeterTimeout          = 2,</div>
<div class="line">    .xBatteryTimeout            = 2,</div>
<div class="line">    .xGPSTimeout                = 10,</div>
<div class="line">}</div>
</div><!-- fragment --><p>Default drone configuration </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00186">186</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3283bf4f08e89f5b0eb8d610720bb09b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdroneConfig.html">droneConfig</a> xDroneConfig</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Must be updated through <a class="el" href="drone_8c.html#a7b501b8fd615ad95fb6d32f4bbadd9e6">prvSafeSetDroneConfig()</a> </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00245">245</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6b9ccec43699282550b9e25ee80bf2c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdroneState.html">droneState</a> xDroneState</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to specify the current behavior of each task, must be updated through <a class="el" href="drone_8c.html#aba79a8c759d64b5d1df90fe8028cdd18">prvSafeSetDroneState()</a> for preemption safety. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00248">248</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6a02b3d4c485151a4860c6a02648ede3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xTaskHandle xFlightCtrlHandle</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to associate an analog voltage "tag" to each task - see <a class="el" href="drone_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a> </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00223">223</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a24c04e8b5033a2e1436a75ce4905ee01"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">xSemaphoreHandle xFlightCtrlSem = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00218">218</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5729ce590faf1b566d18ec398eeaed6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xTaskHandle xGPSReceiveHandle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00227">227</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a95131cdfae1cf00f4e600b7a53952e12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdroneGPSWrapper.html">droneGPSWrapper</a> xGPSWrapper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GPS data and time of last update </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00234">234</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a171f507970d5344c145f142f325600f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdroneIMUWrapper.html">droneIMUWrapper</a> xIMUWrapper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attitude measured by the IMU module and time of last update </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00239">239</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a743e8352cd525db816aac0c78c0b5029"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="structdroneState.html">droneState</a> xInitDroneState</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .eFltState = <a class="code" href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a>,</div>
<div class="line">    .eErrorMask = <a class="code" href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a>,</div>
<div class="line">}</div>
<div class="ttc" id="drone_8c_html_aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a"><div class="ttname"><a href="drone_8c.html#aad4124e5a34e185d704fe88506ecf352a4eb8e22beceecc6e83a76fc46f56e03a">DRN_ERR_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00087">drone.c:87</a></div></div>
<div class="ttc" id="drone_8c_html_aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037"><div class="ttname"><a href="drone_8c.html#aac9034800b5ef8e755ade03d164e3b6caa5f51c4eb8c8eec3b16b058c5e29a037">STATE_STARTING</a></div><div class="ttdef"><b>Definition:</b> <a href="drone_8c_source.html#l00066">drone.c:66</a></div></div>
</div><!-- fragment --><p>Initial drone state </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00211">211</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="af497c945c13c6caaf85fb54e895bb5db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structflightCommand.html">flightCommand</a> xStationaryFlightCmd</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00183">183</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa27964d5f5462c40830fb4484a4279d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structflightMovement.html">flightMovement</a> xStationaryFlightMvt</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defined in <a class="el" href="flight_8h.html">flight.h</a> </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00182">182</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad2b82954258dd1d9c8da2cfd29600dc1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdroneTelemeterWrapper.html">droneTelemeterWrapper</a> xTelemeterWrapper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Telemeter measures and time of last update </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00243">243</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="aecb3ddfcb69cef27439613d15f2fff6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xTaskHandle xZigbeeReceiveHandle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="drone_8c_source.html#l00225">225</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0745b90bb718aa3f4a7b68c9c18aa60f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdroneZigbeeWrapper.html">droneZigbeeWrapper</a> xZigbeeWrapper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flight command received from the base, time of last command update and of last reception. </p>

<p>Definition at line <a class="el" href="drone_8c_source.html#l00237">237</a> of file <a class="el" href="drone_8c_source.html">drone.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="drone_8c.html">drone.c</a></li>
    <li class="footer">Generated on Wed Jan 22 2014 13:05:33 for Drone hexacoptère, segment vol by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
